(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){var n=t[o][1][e];return s(n?n:e)}),l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var imagePath="//s1.hdslb.com/bfs/static/blive/live-assets/title/",titleMap=[{id:1,name:["红叶祭"],width:[68]},{id:2,name:["年糕团"],width:[68]},{id:3,name:["年糕团长"],width:[64]},{id:4,name:["超年糕团长"],width:[81]},{id:5,name:["圣诞老人"],width:[50]},{id:6,name:["圣诞中年人"],width:[61]},{id:7,name:["圣诞青年"],width:[50]},{id:8,name:["圣诞小天使"],width:[61]},{id:9,name:["真圣诞爸爸"],width:[75]},{id:10,name:["圣尼古拉斯"],width:[78]},{id:11,name:["雪亲王"],width:[62]},{id:12,name:["辅导员"],width:[81]},{id:13,name:["班主任"],width:[81]},{id:14,name:["教导主任"],width:[81]},{id:15,name:["校长"],width:[81]},{id:16,name:["资深老司机"],width:[94]},{id:17,name:["月老"],width:[81]},{id:18,name:["庇护之光"],width:[58]},{id:19,name:["圣骑士"],width:[56]},{id:20,name:["冒险家"],width:[54]},{id:21,name:["旅人"],width:[54]},{id:22,name:["甜心神话"],width:[85]},{id:23,name:["甜心天使"],width:[74]},{id:24,name:["甜心精灵"],width:[74]},{id:25,name:["唱见神话"],width:[85]},{id:26,name:["唱见天使"],width:[74]},{id:27,name:["唱见精灵"],width:[74]},{id:28,name:["姹紫嫣红"],width:[88]},{id:29,name:["度年如日"],width:[68]},{id:30,name:["追云逐月"],width:[84]},{id:31,name:["神龙"],width:[52]},{id:32,name:["菠菜"],width:[36]},{id:33,name:["被窝"],width:[36]},{id:34,name:["起来嗨"],width:[70]},{id:35,name:["关灯"],width:[70]},{id:36,name:["方得始终"],width:[81]},{id:37,name:["久负盛名"],width:[80]},{id:38,name:["超耐久"],width:[54]},{id:39,name:["七周年"],width:[100]},{id:40,name:["甜咸无双"],width:[98]},{id:41,name:["咸党"],width:[51]},{id:42,name:["咸蛋超人"],width:[86]},{id:43,name:["咸鱼皇"],width:[69]},{id:44,name:["甜党"],width:[51]},{id:45,name:["砂糖战士"],width:[86]},{id:46,name:["甘sugiru"],width:[74]},{id:47,name:["电视王"],width:[100]},{id:48,name:["钻石星尘"],width:[86]},{id:49,name:["绝对零度"],width:[86]},{id:50,name:["钻石王老五"],width:[64]},{id:51,name:["大神"],width:[63]},{id:52,name:["高手"],width:[63]},{id:53,name:["神七"],width:[71]},{id:54,name:["暖心"],width:[69]},{id:55,name:["全是套路"],width:[88]},{id:56,name:["红叶祭","栖霞红枫","香山黄栌","秋之回忆"],width:[60,92,88,94]},{id:57,name:["金闪闪"],width:[70]},{id:58,name:["盛夏花火"],width:[86]},{id:59,name:["一本满足"],width:[86]},{id:60,name:["百鬼夜行"],width:[86]},{id:61,name:["吃瓜群众"],width:[83]},{id:62,name:["応援"],width:[74]},{id:63,name:["応援"],width:[74]},{id:64,name:["応援"],width:[74]},{id:65,name:["Star"],width:[33]},{id:66,name:["Star"],width:[33]},{id:67,name:["Star"],width:[33]},{id:68,name:["Star"],width:[33]},{id:69,name:["Star"],width:[33]},{id:70,name:["SuperStar"],width:[43]},{id:71,name:["SuperStar"],width:[43]},{id:72,name:["SuperStar"],width:[43]},{id:73,name:["SuperStar"],width:[43]},{id:74,name:["SuperStar"],width:[43]},{id:75,name:["见习舰长","代理提督","名誉总督"],width:[76,86,80]},{id:76,name:["理事长"],width:[64]},{id:77,name:["Miss·椛"],width:[89]},{id:78,name:["FFF团员"],width:[82]},{id:79,name:["FFF团长"],width:[80]},{id:80,name:["Santa Claus"],width:[65]},{id:81,name:["新年快乐"],width:[87]},{id:82,name:["御守","满分御守","桃花御守"],width:[41,76,80]},{id:83,name:["功成名就"],width:[55]},{id:84,name:["水滴石穿"],width:[66]},{id:85,name:["孜孜不倦"],width:[75]},{id:86,name:["季老"],width:[60]},{id:87,name:["四季老"],width:[84]},{id:88,name:["不负初心"],width:[76]},{id:89,name:["爆竹","意大利炮"],width:[53,59]},{id:90,name:["财神爷"],width:[69]},{id:91,name:["灶神"],width:[69]},{id:92,name:["年兽抱回家"],width:[56]},{id:93,name:["注孤生"],width:[60]},{id:94,name:["酋长"],width:[56]},{id:95,name:["丘比特","维纳斯"],width:[71,80]},{id:96,name:["神曲终焉"],width:[76]},{id:97,name:["无上至尊"],width:[80]},{id:98,name:["至高骑士"],width:[86]},{id:99,name:["神域阐释者"],width:[89]},{id:100,name:["蒸汽"],width:[73]},{id:101,name:["神州"],width:[71]},{id:102,name:["骑士"],width:[69]},{id:103,name:["神圣"],width:[70]},{id:104,name:["蒸汽"],width:[69]},{id:105,name:["神州"],width:[68]},{id:106,name:["骑士"],width:[66]},{id:107,name:["神州"],width:[67]},{id:108,name:["演武者","武神"],width:[73,67]},{id:109,name:["征服者"],width:[78]},{id:110,name:["征服王"],width:[76]},{id:111,name:["bilibili link"],width:[69]},{id:112,name:["旅人"],width:[54]},{id:113,name:["初级应援"],width:[74]},{id:114,name:["高级应援"],width:[74]},{id:115,name:["终极应援"],width:[74]},{id:116,name:["庇护之光"],width:[58]},{id:117,name:["圣骑士"],width:[56]},{id:118,name:["冒险家"],width:[54]},{id:119,name:["五魁首"],width:[70]}];exports.imagePath=imagePath,exports.titleMap=titleMap;
},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.titleParser=exports.titleIconHtml=exports.getTitleInfo=void 0;var _getTitleInfo=require("./src/getTitleInfo.js"),_getTitleInfo2=_interopRequireDefault(_getTitleInfo),_titleParser=require("./src/titleParser.js"),_titleParser2=_interopRequireDefault(_titleParser),_titleIconHtml=require("./src/title-icon-html.js"),_titleIconHtml2=_interopRequireDefault(_titleIconHtml);exports.getTitleInfo=_getTitleInfo2.default,exports.titleIconHtml=_titleIconHtml2.default,exports.titleParser=_titleParser2.default;
},{"./src/getTitleInfo.js":3,"./src/title-icon-html.js":4,"./src/titleParser.js":5}],3:[function(require,module,exports){
"use strict";function getTitleInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e-1,n=t-1,o=e+"-"+t+".png",g={width:_config.titleMap[i].width[n]+"px",imagePath:_config.imagePath+o};return g}Object.defineProperty(exports,"__esModule",{value:!0});var _config=require("./../config.js");exports.default=getTitleInfo;
},{"./../config.js":1}],4:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function titleIconHtml(e,t){var i=(0,_getTitleInfo2.default)(e,t);return'<span style="display: inline-block; vertical-align: middle; height: 20px; width: '+i.width+"; background: url('"+i.imagePath+"');\"></span>"}Object.defineProperty(exports,"__esModule",{value:!0});var _getTitleInfo=require("./getTitleInfo.js"),_getTitleInfo2=_interopRequireDefault(_getTitleInfo);exports.default=titleIconHtml;
},{"./getTitleInfo.js":3}],5:[function(require,module,exports){
"use strict";function titleParser(e){var t=e.indexOf("-"),r=e.lastIndexOf("-");return{id:e.slice(t+1,r),level:e.slice(r+1)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=titleParser;
},{}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMedalHtml=void 0;var _iconHtml=require("./src/icon-html");exports.getMedalHtml=_iconHtml.getMedalHtml;
},{"./src/icon-html":7}],7:[function(require,module,exports){
"use strict";function getMedalHtml(e,l){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'\n    <div class="fans-medal-item level-'+e+'">\n      <span class="label">'+l+'</span>\n      <span class="level">'+e+"</span>\n      "+n+"\n    </div>\n  "}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMedalHtml=getMedalHtml;
},{}],8:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/json/stringify"),__esModule:!0};
},{"core-js/library/fn/json/stringify":20}],9:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/create"),__esModule:!0};
},{"core-js/library/fn/object/create":21}],10:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/define-property"),__esModule:!0};
},{"core-js/library/fn/object/define-property":22}],11:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/object/keys"),__esModule:!0};
},{"core-js/library/fn/object/keys":23}],12:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/promise"),__esModule:!0};
},{"core-js/library/fn/promise":24}],13:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/symbol"),__esModule:!0};
},{"core-js/library/fn/symbol":25}],14:[function(require,module,exports){
module.exports={default:require("core-js/library/fn/symbol/iterator"),__esModule:!0};
},{"core-js/library/fn/symbol/iterator":26}],15:[function(require,module,exports){
"use strict";exports.__esModule=!0,exports.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};
},{}],16:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _defineProperty=require("../core-js/object/define-property"),_defineProperty2=_interopRequireDefault(_defineProperty);exports.default=(function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,_defineProperty2.default)(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}})();
},{"../core-js/object/define-property":10}],17:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _defineProperty=require("../core-js/object/define-property"),_defineProperty2=_interopRequireDefault(_defineProperty);exports.default=function(e,r,t){return r in e?(0,_defineProperty2.default)(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e};
},{"../core-js/object/define-property":10}],18:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}exports.__esModule=!0;var _iterator=require("../core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("../core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator2.default?function(e){return typeof e}:function(e){return e&&"function"==typeof _symbol2.default&&e.constructor===_symbol2.default&&e!==_symbol2.default.prototype?"symbol":typeof e};exports.default="function"==typeof _symbol2.default&&"symbol"===_typeof(_iterator2.default)?function(e){return"undefined"==typeof e?"undefined":_typeof(e)}:function(e){return e&&"function"==typeof _symbol2.default&&e.constructor===_symbol2.default&&e!==_symbol2.default.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof(e)};
},{"../core-js/symbol":13,"../core-js/symbol/iterator":14}],19:[function(require,module,exports){
(function (global){
function createBundlePromise(r,e,n){return Promise.resolve().then((function(){return e(""+r.name)})).catch((function(){return new Promise(function(t,c){loader(n+r.url,(function(n){if(n)return c(n);try{t(e(""+r.name))}catch(n){if(/require.async/.test(n))return c(Error(n));try{t(e(""+r.hash))}catch(r){c(Error(n))}}}))})}))}var Promise=require("lie"),loader=require("little-loader"),cache=global.__requireAsyncCache=global.__requireAsyncCache||{};module.exports=function(r,e){return function(n,t,c){var o,u,a,i=[].concat(n),h=[];for(u=0,a=i.length;u<a;u++)o=i[u],cache[o.hash]||(cache[o.hash]=createBundlePromise(o,r,e.urlRoot)),h.push(cache[o.hash]);return Promise.all(h).then((function(r){return t&&t.apply(null,r)})).catch((function(r){return e.rethrowError?setTimeout((function(){throw r}),0):c&&c(r)}))}};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"lie":110,"little-loader":111}],20:[function(require,module,exports){
var core=require("../../modules/_core"),$JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function(r){return $JSON.stringify.apply($JSON,arguments)};
},{"../../modules/_core":34}],21:[function(require,module,exports){
require("../../modules/es6.object.create");var $Object=require("../../modules/_core").Object;module.exports=function(e,r){return $Object.create(e,r)};
},{"../../modules/_core":34,"../../modules/es6.object.create":98}],22:[function(require,module,exports){
require("../../modules/es6.object.define-property");var $Object=require("../../modules/_core").Object;module.exports=function(e,r,o){return $Object.defineProperty(e,r,o)};
},{"../../modules/_core":34,"../../modules/es6.object.define-property":99}],23:[function(require,module,exports){
require("../../modules/es6.object.keys"),module.exports=require("../../modules/_core").Object.keys;
},{"../../modules/_core":34,"../../modules/es6.object.keys":100}],24:[function(require,module,exports){
require("../modules/es6.object.to-string"),require("../modules/es6.string.iterator"),require("../modules/web.dom.iterable"),require("../modules/es6.promise"),module.exports=require("../modules/_core").Promise;
},{"../modules/_core":34,"../modules/es6.object.to-string":101,"../modules/es6.promise":102,"../modules/es6.string.iterator":103,"../modules/web.dom.iterable":107}],25:[function(require,module,exports){
require("../../modules/es6.symbol"),require("../../modules/es6.object.to-string"),require("../../modules/es7.symbol.async-iterator"),require("../../modules/es7.symbol.observable"),module.exports=require("../../modules/_core").Symbol;
},{"../../modules/_core":34,"../../modules/es6.object.to-string":101,"../../modules/es6.symbol":104,"../../modules/es7.symbol.async-iterator":105,"../../modules/es7.symbol.observable":106}],26:[function(require,module,exports){
require("../../modules/es6.string.iterator"),require("../../modules/web.dom.iterable"),module.exports=require("../../modules/_wks-ext").f("iterator");
},{"../../modules/_wks-ext":94,"../../modules/es6.string.iterator":103,"../../modules/web.dom.iterable":107}],27:[function(require,module,exports){
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],28:[function(require,module,exports){
module.exports=function(){};
},{}],29:[function(require,module,exports){
module.exports=function(o,n,r,i){if(!(o instanceof n)||void 0!==i&&i in o)throw TypeError(r+": incorrect invocation!");return o};
},{}],30:[function(require,module,exports){
var isObject=require("./_is-object");module.exports=function(e){if(!isObject(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":53}],31:[function(require,module,exports){
var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toIndex=require("./_to-index");module.exports=function(e){return function(t,r,n){var o,i=toIObject(t),u=toLength(i.length),f=toIndex(n,u);if(e&&r!=r){for(;u>f;)if(o=i[f++],o!=o)return!0}else for(;u>f;f++)if((e||f in i)&&i[f]===r)return e||f||0;return!e&&-1}};
},{"./_to-index":86,"./_to-iobject":88,"./_to-length":89}],32:[function(require,module,exports){
var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(t,e){try{return t[e]}catch(t){}};module.exports=function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=tryGet(e=Object(t),TAG))?r:ARG?cof(e):"Object"==(n=cof(e))&&"function"==typeof e.callee?"Arguments":n};
},{"./_cof":33,"./_wks":95}],33:[function(require,module,exports){
var toString={}.toString;module.exports=function(t){return toString.call(t).slice(8,-1)};
},{}],34:[function(require,module,exports){
var core=module.exports={version:"2.4.0"};"number"==typeof __e&&(__e=core);
},{}],35:[function(require,module,exports){
var aFunction=require("./_a-function");module.exports=function(n,r,t){if(aFunction(n),void 0===r)return n;switch(t){case 1:return function(t){return n.call(r,t)};case 2:return function(t,u){return n.call(r,t,u)};case 3:return function(t,u,e){return n.call(r,t,u,e)}}return function(){return n.apply(r,arguments)}};
},{"./_a-function":27}],36:[function(require,module,exports){
module.exports=function(o){if(void 0==o)throw TypeError("Can't call method on  "+o);return o};
},{}],37:[function(require,module,exports){
module.exports=!require("./_fails")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}));
},{"./_fails":42}],38:[function(require,module,exports){
var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(e){return is?document.createElement(e):{}};
},{"./_global":44,"./_is-object":53}],39:[function(require,module,exports){
module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
},{}],40:[function(require,module,exports){
var getKeys=require("./_object-keys"),gOPS=require("./_object-gops"),pIE=require("./_object-pie");module.exports=function(e){var r=getKeys(e),t=gOPS.f;if(t)for(var o,u=t(e),g=pIE.f,i=0;u.length>i;)g.call(e,o=u[i++])&&r.push(o);return r};
},{"./_object-gops":70,"./_object-keys":73,"./_object-pie":74}],41:[function(require,module,exports){
var global=require("./_global"),core=require("./_core"),ctx=require("./_ctx"),hide=require("./_hide"),PROTOTYPE="prototype",$export=function(e,r,t){var o,n,p,i=e&$export.F,x=e&$export.G,c=e&$export.S,l=e&$export.P,u=e&$export.B,a=e&$export.W,$=x?core:core[r]||(core[r]={}),P=$[PROTOTYPE],f=x?global:c?global[r]:(global[r]||{})[PROTOTYPE];x&&(t=r);for(o in t)n=!i&&f&&void 0!==f[o],n&&o in $||(p=n?f[o]:t[o],$[o]=x&&"function"!=typeof f[o]?t[o]:u&&n?ctx(p,global):a&&f[o]==p?(function(e){var r=function(r,t,o){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,t)}return new e(r,t,o)}return e.apply(this,arguments)};return r[PROTOTYPE]=e[PROTOTYPE],r})(p):l&&"function"==typeof p?ctx(Function.call,p):p,l&&(($.virtual||($.virtual={}))[o]=p,e&$export.R&&P&&!P[o]&&hide(P,o,p)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export;
},{"./_core":34,"./_ctx":35,"./_global":44,"./_hide":46}],42:[function(require,module,exports){
module.exports=function(r){try{return!!r()}catch(r){return!0}};
},{}],43:[function(require,module,exports){
var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method"),BREAK={},RETURN={},exports=module.exports=function(e,r,t,o,i){var n,a,R,c,l=i?function(){return e}:getIterFn(e),u=ctx(t,o,r?2:1),E=0;if("function"!=typeof l)throw TypeError(e+" is not iterable!");if(isArrayIter(l)){for(n=toLength(e.length);n>E;E++)if(c=r?u(anObject(a=e[E])[0],a[1]):u(e[E]),c===BREAK||c===RETURN)return c}else for(R=l.call(e);!(a=R.next()).done;)if(c=call(R,u,a.value,r),c===BREAK||c===RETURN)return c};exports.BREAK=BREAK,exports.RETURN=RETURN;
},{"./_an-object":30,"./_ctx":35,"./_is-array-iter":51,"./_iter-call":54,"./_to-length":89,"./core.get-iterator-method":96}],44:[function(require,module,exports){
var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global);
},{}],45:[function(require,module,exports){
var hasOwnProperty={}.hasOwnProperty;module.exports=function(r,e){return hasOwnProperty.call(r,e)};
},{}],46:[function(require,module,exports){
var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(e,r,t){return dP.f(e,r,createDesc(1,t))}:function(e,r,t){return e[r]=t,e};
},{"./_descriptors":37,"./_object-dp":65,"./_property-desc":76}],47:[function(require,module,exports){
module.exports=require("./_global").document&&document.documentElement;
},{"./_global":44}],48:[function(require,module,exports){
module.exports=!require("./_descriptors")&&!require("./_fails")((function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a}));
},{"./_descriptors":37,"./_dom-create":38,"./_fails":42}],49:[function(require,module,exports){
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};
},{}],50:[function(require,module,exports){
var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==cof(e)?e.split(""):Object(e)};
},{"./_cof":33}],51:[function(require,module,exports){
var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(r){return void 0!==r&&(Iterators.Array===r||ArrayProto[ITERATOR]===r)};
},{"./_iterators":59,"./_wks":95}],52:[function(require,module,exports){
var cof=require("./_cof");module.exports=Array.isArray||function(r){return"Array"==cof(r)};
},{"./_cof":33}],53:[function(require,module,exports){
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],54:[function(require,module,exports){
var anObject=require("./_an-object");module.exports=function(r,t,e,a){try{return a?t(anObject(e)[0],e[1]):t(e)}catch(t){var c=r.return;throw void 0!==c&&anObject(c.call(r)),t}};
},{"./_an-object":30}],55:[function(require,module,exports){
"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),(function(){return this})),module.exports=function(r,t,e){r.prototype=create(IteratorPrototype,{next:descriptor(1,e)}),setToStringTag(r,t+" Iterator")};
},{"./_hide":46,"./_object-create":64,"./_property-desc":76,"./_set-to-string-tag":80,"./_wks":95}],56:[function(require,module,exports){
"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),has=require("./_has"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),FF_ITERATOR="@@iterator",KEYS="keys",VALUES="values",returnThis=function(){return this};module.exports=function(e,r,t,i,n,o,s){$iterCreate(t,r,i);var u,a,T,R=function(e){if(!BUGGY&&e in h)return h[e];switch(e){case KEYS:return function(){return new t(this,e)};case VALUES:return function(){return new t(this,e)}}return function(){return new t(this,e)}},A=r+" Iterator",c=n==VALUES,f=!1,h=e.prototype,E=h[ITERATOR]||h[FF_ITERATOR]||n&&h[n],I=E||R(n),p=n?c?R("entries"):I:void 0,_="Array"==r?h.entries||E:E;if(_&&(T=getPrototypeOf(_.call(new e)),T!==Object.prototype&&(setToStringTag(T,A,!0),LIBRARY||has(T,ITERATOR)||hide(T,ITERATOR,returnThis))),c&&E&&E.name!==VALUES&&(f=!0,I=function(){return E.call(this)}),LIBRARY&&!s||!BUGGY&&!f&&h[ITERATOR]||hide(h,ITERATOR,I),Iterators[r]=I,Iterators[A]=returnThis,n)if(u={values:c?I:R(VALUES),keys:o?I:R(KEYS),entries:p},s)for(a in u)a in h||redefine(h,a,u[a]);else $export($export.P+$export.F*(BUGGY||f),r,u);return u};
},{"./_export":41,"./_has":45,"./_hide":46,"./_iter-create":55,"./_iterators":59,"./_library":61,"./_object-gpo":71,"./_redefine":78,"./_set-to-string-tag":80,"./_wks":95}],57:[function(require,module,exports){
var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,(function(){throw 2}))}catch(r){}module.exports=function(r,t){if(!t&&!SAFE_CLOSING)return!1;var n=!1;try{var e=[7],u=e[ITERATOR]();u.next=function(){return{done:n=!0}},e[ITERATOR]=function(){return u},r(e)}catch(r){}return n};
},{"./_wks":95}],58:[function(require,module,exports){
module.exports=function(e,n){return{value:n,done:!!e}};
},{}],59:[function(require,module,exports){
module.exports={};
},{}],60:[function(require,module,exports){
var getKeys=require("./_object-keys"),toIObject=require("./_to-iobject");module.exports=function(e,t){for(var r,o=toIObject(e),c=getKeys(o),i=c.length,u=0;i>u;)if(o[r=c[u++]]===t)return r};
},{"./_object-keys":73,"./_to-iobject":88}],61:[function(require,module,exports){
module.exports=!0;
},{}],62:[function(require,module,exports){
var META=require("./_uid")("meta"),isObject=require("./_is-object"),has=require("./_has"),setDesc=require("./_object-dp").f,id=0,isExtensible=Object.isExtensible||function(){return!0},FREEZE=!require("./_fails")((function(){return isExtensible(Object.preventExtensions({}))})),setMeta=function(e){setDesc(e,META,{value:{i:"O"+ ++id,w:{}}})},fastKey=function(e,t){if(!isObject(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!has(e,META)){if(!isExtensible(e))return"F";if(!t)return"E";setMeta(e)}return e[META].i},getWeak=function(e,t){if(!has(e,META)){if(!isExtensible(e))return!0;if(!t)return!1;setMeta(e)}return e[META].w},onFreeze=function(e){return FREEZE&&meta.NEED&&isExtensible(e)&&!has(e,META)&&setMeta(e),e},meta=module.exports={KEY:META,NEED:!1,fastKey:fastKey,getWeak:getWeak,onFreeze:onFreeze};
},{"./_fails":42,"./_has":45,"./_is-object":53,"./_object-dp":65,"./_uid":92}],63:[function(require,module,exports){
var global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==require("./_cof")(process);module.exports=function(){var e,r,o,s=function(){var s,t;for(isNode&&(s=process.domain)&&s.exit();e;){t=e.fn,e=e.next;try{t()}catch(s){throw e?o():r=void 0,s}}r=void 0,s&&s.enter()};if(isNode)o=function(){process.nextTick(s)};else if(Observer){var t=!0,a=document.createTextNode("");new Observer(s).observe(a,{characterData:!0}),o=function(){a.data=t=!t}}else if(Promise&&Promise.resolve){var i=Promise.resolve();o=function(){i.then(s)}}else o=function(){macrotask.call(global,s)};return function(s){var t={fn:s,next:void 0};r&&(r.next=t),e||(e=t,o()),r=t}};
},{"./_cof":33,"./_global":44,"./_task":85}],64:[function(require,module,exports){
var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},PROTOTYPE="prototype",createDict=function(){var e,t=require("./_dom-create")("iframe"),r=enumBugKeys.length,c="<",n=">";for(t.style.display="none",require("./_html").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(c+"script"+n+"document.F=Object"+c+"/script"+n),e.close(),createDict=e.F;r--;)delete createDict[PROTOTYPE][enumBugKeys[r]];return createDict()};module.exports=Object.create||function(e,t){var r;return null!==e?(Empty[PROTOTYPE]=anObject(e),r=new Empty,Empty[PROTOTYPE]=null,r[IE_PROTO]=e):r=createDict(),void 0===t?r:dPs(r,t)};
},{"./_an-object":30,"./_dom-create":38,"./_enum-bug-keys":39,"./_html":47,"./_object-dps":66,"./_shared-key":81}],65:[function(require,module,exports){
var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(e,r,t){if(anObject(e),r=toPrimitive(r,!0),anObject(t),IE8_DOM_DEFINE)try{return dP(e,r,t)}catch(e){}if("get"in t||"set"in t)throw TypeError("Accessors not supported!");return"value"in t&&(e[r]=t.value),e};
},{"./_an-object":30,"./_descriptors":37,"./_ie8-dom-define":48,"./_to-primitive":91}],66:[function(require,module,exports){
var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(e,r){anObject(e);for(var t,o=getKeys(r),c=o.length,i=0;c>i;)dP.f(e,t=o[i++],r[t]);return e};
},{"./_an-object":30,"./_descriptors":37,"./_object-dp":65,"./_object-keys":73}],67:[function(require,module,exports){
var pIE=require("./_object-pie"),createDesc=require("./_property-desc"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),has=require("./_has"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),gOPD=Object.getOwnPropertyDescriptor;exports.f=require("./_descriptors")?gOPD:function(e,r){if(e=toIObject(e),r=toPrimitive(r,!0),IE8_DOM_DEFINE)try{return gOPD(e,r)}catch(e){}if(has(e,r))return createDesc(!pIE.f.call(e,r),e[r])};
},{"./_descriptors":37,"./_has":45,"./_ie8-dom-define":48,"./_object-pie":74,"./_property-desc":76,"./_to-iobject":88,"./_to-primitive":91}],68:[function(require,module,exports){
var toIObject=require("./_to-iobject"),gOPN=require("./_object-gopn").f,toString={}.toString,windowNames="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(e){try{return gOPN(e)}catch(e){return windowNames.slice()}};module.exports.f=function(e){return windowNames&&"[object Window]"==toString.call(e)?getWindowNames(e):gOPN(toIObject(e))};
},{"./_object-gopn":69,"./_to-iobject":88}],69:[function(require,module,exports){
var $keys=require("./_object-keys-internal"),hiddenKeys=require("./_enum-bug-keys").concat("length","prototype");exports.f=Object.getOwnPropertyNames||function(e){return $keys(e,hiddenKeys)};
},{"./_enum-bug-keys":39,"./_object-keys-internal":72}],70:[function(require,module,exports){
exports.f=Object.getOwnPropertySymbols;
},{}],71:[function(require,module,exports){
var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(t){return t=toObject(t),has(t,IE_PROTO)?t[IE_PROTO]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ObjectProto:null};
},{"./_has":45,"./_shared-key":81,"./_to-object":90}],72:[function(require,module,exports){
var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(r,e){var a,t=toIObject(r),u=0,O=[];for(a in t)a!=IE_PROTO&&has(t,a)&&O.push(a);for(;e.length>u;)has(t,a=e[u++])&&(~arrayIndexOf(O,a)||O.push(a));return O};
},{"./_array-includes":31,"./_has":45,"./_shared-key":81,"./_to-iobject":88}],73:[function(require,module,exports){
var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(e){return $keys(e,enumBugKeys)};
},{"./_enum-bug-keys":39,"./_object-keys-internal":72}],74:[function(require,module,exports){
exports.f={}.propertyIsEnumerable;
},{}],75:[function(require,module,exports){
var $export=require("./_export"),core=require("./_core"),fails=require("./_fails");module.exports=function(e,r){var o=(core.Object||{})[e]||Object[e],t={};t[e]=r(o),$export($export.S+$export.F*fails((function(){o(1)})),"Object",t)};
},{"./_core":34,"./_export":41,"./_fails":42}],76:[function(require,module,exports){
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],77:[function(require,module,exports){
var hide=require("./_hide");module.exports=function(e,r,i){for(var d in r)i&&e[d]?e[d]=r[d]:hide(e,d,r[d]);return e};
},{"./_hide":46}],78:[function(require,module,exports){
module.exports=require("./_hide");
},{"./_hide":46}],79:[function(require,module,exports){
"use strict";var global=require("./_global"),core=require("./_core"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(e){var r="function"==typeof core[e]?core[e]:global[e];DESCRIPTORS&&r&&!r[SPECIES]&&dP.f(r,SPECIES,{configurable:!0,get:function(){return this}})};
},{"./_core":34,"./_descriptors":37,"./_global":44,"./_object-dp":65,"./_wks":95}],80:[function(require,module,exports){
var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(e,r,o){e&&!has(e=o?e:e.prototype,TAG)&&def(e,TAG,{configurable:!0,value:r})};
},{"./_has":45,"./_object-dp":65,"./_wks":95}],81:[function(require,module,exports){
var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(e){return shared[e]||(shared[e]=uid(e))};
},{"./_shared":82,"./_uid":92}],82:[function(require,module,exports){
var global=require("./_global"),SHARED="__core-js_shared__",store=global[SHARED]||(global[SHARED]={});module.exports=function(o){return store[o]||(store[o]={})};
},{"./_global":44}],83:[function(require,module,exports){
var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(e,n){var r,t=anObject(e).constructor;return void 0===t||void 0==(r=anObject(t)[SPECIES])?n:aFunction(r)};
},{"./_a-function":27,"./_an-object":30,"./_wks":95}],84:[function(require,module,exports){
var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(e){return function(r,t){var n,i,d=String(defined(r)),o=toInteger(t),u=d.length;return o<0||o>=u?e?"":void 0:(n=d.charCodeAt(o),n<55296||n>56319||o+1===u||(i=d.charCodeAt(o+1))<56320||i>57343?e?d.charAt(o):n:e?d.slice(o,o+2):(n-55296<<10)+(i-56320)+65536)}};
},{"./_defined":36,"./_to-integer":87}],85:[function(require,module,exports){
var ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,counter=0,queue={},ONREADYSTATECHANGE="onreadystatechange",defer,channel,port,run=function(){var e=+this;if(queue.hasOwnProperty(e)){var n=queue[e];delete queue[e],n()}},listener=function(e){run.call(e.data)};setTask&&clearTask||(setTask=function(e){for(var n=[],t=1;arguments.length>t;)n.push(arguments[t++]);return queue[++counter]=function(){invoke("function"==typeof e?e:Function(e),n)},defer(counter),counter},clearTask=function(e){delete queue[e]},"process"==require("./_cof")(process)?defer=function(e){process.nextTick(ctx(run,e,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(e){global.postMessage(e+"","*")},global.addEventListener("message",listener,!1)):defer=ONREADYSTATECHANGE in cel("script")?function(e){html.appendChild(cel("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run.call(e)}}:function(e){setTimeout(ctx(run,e,1),0)}),module.exports={set:setTask,clear:clearTask};
},{"./_cof":33,"./_ctx":35,"./_dom-create":38,"./_global":44,"./_html":47,"./_invoke":49}],86:[function(require,module,exports){
var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(e,t){return e=toInteger(e),e<0?max(e+t,0):min(e,t)};
},{"./_to-integer":87}],87:[function(require,module,exports){
var ceil=Math.ceil,floor=Math.floor;module.exports=function(o){return isNaN(o=+o)?0:(o>0?floor:ceil)(o)};
},{}],88:[function(require,module,exports){
var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(e){return IObject(defined(e))};
},{"./_defined":36,"./_iobject":50}],89:[function(require,module,exports){
var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(e){return e>0?min(toInteger(e),9007199254740991):0};
},{"./_to-integer":87}],90:[function(require,module,exports){
var defined=require("./_defined");module.exports=function(e){return Object(defined(e))};
},{"./_defined":36}],91:[function(require,module,exports){
var isObject=require("./_is-object");module.exports=function(t,e){if(!isObject(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!isObject(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!isObject(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!isObject(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":53}],92:[function(require,module,exports){
var id=0,px=Math.random();module.exports=function(o){return"Symbol(".concat(void 0===o?"":o,")_",(++id+px).toString(36))};
},{}],93:[function(require,module,exports){
var global=require("./_global"),core=require("./_core"),LIBRARY=require("./_library"),wksExt=require("./_wks-ext"),defineProperty=require("./_object-dp").f;module.exports=function(e){var r=core.Symbol||(core.Symbol=LIBRARY?{}:global.Symbol||{});"_"==e.charAt(0)||e in r||defineProperty(r,e,{value:wksExt.f(e)})};
},{"./_core":34,"./_global":44,"./_library":61,"./_object-dp":65,"./_wks-ext":94}],94:[function(require,module,exports){
exports.f=require("./_wks");
},{"./_wks":95}],95:[function(require,module,exports){
var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof Symbol,$exports=module.exports=function(o){return store[o]||(store[o]=USE_SYMBOL&&Symbol[o]||(USE_SYMBOL?Symbol:uid)("Symbol."+o))};$exports.store=store;
},{"./_global":44,"./_shared":82,"./_uid":92}],96:[function(require,module,exports){
var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(r){if(void 0!=r)return r[ITERATOR]||r["@@iterator"]||Iterators[classof(r)]};
},{"./_classof":32,"./_core":34,"./_iterators":59,"./_wks":95}],97:[function(require,module,exports){
"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",(function(e,t){this._t=toIObject(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,s=this._i++;return!e||s>=e.length?(this._t=void 0,step(1)):"keys"==t?step(0,s):"values"==t?step(0,e[s]):step(0,[s,e[s]])}),"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries");
},{"./_add-to-unscopables":28,"./_iter-define":56,"./_iter-step":58,"./_iterators":59,"./_to-iobject":88}],98:[function(require,module,exports){
var $export=require("./_export");$export($export.S,"Object",{create:require("./_object-create")});
},{"./_export":41,"./_object-create":64}],99:[function(require,module,exports){
var $export=require("./_export");$export($export.S+$export.F*!require("./_descriptors"),"Object",{defineProperty:require("./_object-dp").f});
},{"./_descriptors":37,"./_export":41,"./_object-dp":65}],100:[function(require,module,exports){
var toObject=require("./_to-object"),$keys=require("./_object-keys");require("./_object-sap")("keys",(function(){return function(e){return $keys(toObject(e))}}));
},{"./_object-keys":73,"./_object-sap":75,"./_to-object":90}],101:[function(require,module,exports){

},{}],102:[function(require,module,exports){
"use strict";var LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),PROMISE="Promise",TypeError=global.TypeError,process=global.process,$Promise=global[PROMISE],process=global.process,isNode="process"==classof(process),empty=function(){},Internal,GenericPromiseCapability,Wrapper,USE_NATIVE=!!(function(){try{var e=$Promise.resolve(1),r=(e.constructor={})[require("./_wks")("species")]=function(e){e(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&e.then(empty)instanceof r}catch(e){}})(),sameConstructor=function(e,r){return e===r||e===$Promise&&r===Wrapper},isThenable=function(e){var r;return!(!isObject(e)||"function"!=typeof(r=e.then))&&r},newPromiseCapability=function(e){return sameConstructor($Promise,e)?new PromiseCapability(e):new GenericPromiseCapability(e)},PromiseCapability=GenericPromiseCapability=function(e){var r,t;this.promise=new e(function(e,o){if(void 0!==r||void 0!==t)throw TypeError("Bad Promise constructor");r=e,t=o}),this.resolve=aFunction(r),this.reject=aFunction(t)},perform=function(e){try{e()}catch(e){return{error:e}}},notify=function(e,r){if(!e._n){e._n=!0;var t=e._c;microtask((function(){for(var o=e._v,i=1==e._s,n=0,s=function(r){var t,n,s=i?r.ok:r.fail,c=r.resolve,a=r.reject,l=r.domain;try{s?(i||(2==e._h&&onHandleUnhandled(e),e._h=1),s===!0?t=o:(l&&l.enter(),t=s(o),l&&l.exit()),t===r.promise?a(TypeError("Promise-chain cycle")):(n=isThenable(t))?n.call(t,c,a):c(t)):a(o)}catch(e){a(e)}};t.length>n;)s(t[n++]);e._c=[],e._n=!1,r&&!e._h&&onUnhandled(e)}))}},onUnhandled=function(e){task.call(global,(function(){var r,t,o,i=e._v;if(isUnhandled(e)&&(r=perform((function(){isNode?process.emit("unhandledRejection",i,e):(t=global.onunhandledrejection)?t({promise:e,reason:i}):(o=global.console)&&o.error&&o.error("Unhandled promise rejection",i)})),e._h=isNode||isUnhandled(e)?2:1),e._a=void 0,r)throw r.error}))},isUnhandled=function(e){if(1==e._h)return!1;for(var r,t=e._a||e._c,o=0;t.length>o;)if(r=t[o++],r.fail||!isUnhandled(r.promise))return!1;return!0},onHandleUnhandled=function(e){task.call(global,(function(){var r;isNode?process.emit("rejectionHandled",e):(r=global.onrejectionhandled)&&r({promise:e,reason:e._v})}))},$reject=function(e){var r=this;r._d||(r._d=!0,r=r._w||r,r._v=e,r._s=2,r._a||(r._a=r._c.slice()),notify(r,!0))},$resolve=function(e){var r,t=this;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw TypeError("Promise can't be resolved itself");(r=isThenable(e))?microtask((function(){var o={_w:t,_d:!1};try{r.call(e,ctx($resolve,o,1),ctx($reject,o,1))}catch(e){$reject.call(o,e)}})):(t._v=e,t._s=1,notify(t,!1))}catch(e){$reject.call({_w:t,_d:!1},e)}}};USE_NATIVE||($Promise=function(e){anInstance(this,$Promise,PROMISE,"_h"),aFunction(e),Internal.call(this);try{e(ctx($resolve,this,1),ctx($reject,this,1))}catch(e){$reject.call(this,e)}},Internal=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=require("./_redefine-all")($Promise.prototype,{then:function(e,r){var t=newPromiseCapability(speciesConstructor(this,$Promise));return t.ok="function"!=typeof e||e,t.fail="function"==typeof r&&r,t.domain=isNode?process.domain:void 0,this._c.push(t),this._a&&this._a.push(t),this._s&&notify(this,!1),t.promise},catch:function(e){return this.then(void 0,e)}}),PromiseCapability=function(){var e=new Internal;this.promise=e,this.resolve=ctx($resolve,e,1),this.reject=ctx($reject,e,1)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,PROMISE),require("./_set-species")(PROMISE),Wrapper=require("./_core")[PROMISE],$export($export.S+$export.F*!USE_NATIVE,PROMISE,{reject:function(e){var r=newPromiseCapability(this),t=r.reject;return t(e),r.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),PROMISE,{resolve:function(e){if(e instanceof $Promise&&sameConstructor(e.constructor,this))return e;var r=newPromiseCapability(this),t=r.resolve;return t(e),r.promise}}),$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")((function(e){$Promise.all(e).catch(empty)}))),PROMISE,{all:function(e){var r=this,t=newPromiseCapability(r),o=t.resolve,i=t.reject,n=perform((function(){var t=[],n=0,s=1;forOf(e,!1,(function(e){var c=n++,a=!1;t.push(void 0),s++,r.resolve(e).then((function(e){a||(a=!0,t[c]=e,--s||o(t))}),i)})),--s||o(t)}));return n&&i(n.error),t.promise},race:function(e){var r=this,t=newPromiseCapability(r),o=t.reject,i=perform((function(){forOf(e,!1,(function(e){r.resolve(e).then(t.resolve,o)}))}));return i&&o(i.error),t.promise}});
},{"./_a-function":27,"./_an-instance":29,"./_classof":32,"./_core":34,"./_ctx":35,"./_export":41,"./_for-of":43,"./_global":44,"./_is-object":53,"./_iter-detect":57,"./_library":61,"./_microtask":63,"./_redefine-all":77,"./_set-species":79,"./_set-to-string-tag":80,"./_species-constructor":83,"./_task":85,"./_wks":95}],103:[function(require,module,exports){
"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,i=this._t,e=this._i;return e>=i.length?{value:void 0,done:!0}:(t=$at(i,e),this._i+=t.length,{value:t,done:!1})}));
},{"./_iter-define":56,"./_string-at":84}],104:[function(require,module,exports){
"use strict";var global=require("./_global"),has=require("./_has"),DESCRIPTORS=require("./_descriptors"),$export=require("./_export"),redefine=require("./_redefine"),META=require("./_meta").KEY,$fails=require("./_fails"),shared=require("./_shared"),setToStringTag=require("./_set-to-string-tag"),uid=require("./_uid"),wks=require("./_wks"),wksExt=require("./_wks-ext"),wksDefine=require("./_wks-define"),keyOf=require("./_keyof"),enumKeys=require("./_enum-keys"),isArray=require("./_is-array"),anObject=require("./_an-object"),toIObject=require("./_to-iobject"),toPrimitive=require("./_to-primitive"),createDesc=require("./_property-desc"),_create=require("./_object-create"),gOPNExt=require("./_object-gopn-ext"),$GOPD=require("./_object-gopd"),$DP=require("./_object-dp"),$keys=require("./_object-keys"),gOPD=$GOPD.f,dP=$DP.f,gOPN=gOPNExt.f,$Symbol=global.Symbol,$JSON=global.JSON,_stringify=$JSON&&$JSON.stringify,PROTOTYPE="prototype",HIDDEN=wks("_hidden"),TO_PRIMITIVE=wks("toPrimitive"),isEnum={}.propertyIsEnumerable,SymbolRegistry=shared("symbol-registry"),AllSymbols=shared("symbols"),OPSymbols=shared("op-symbols"),ObjectProto=Object[PROTOTYPE],USE_NATIVE="function"==typeof $Symbol,QObject=global.QObject,setter=!QObject||!QObject[PROTOTYPE]||!QObject[PROTOTYPE].findChild,setSymbolDesc=DESCRIPTORS&&$fails((function(){return 7!=_create(dP({},"a",{get:function(){return dP(this,"a",{value:7}).a}})).a}))?function(e,r,t){var o=gOPD(ObjectProto,r);o&&delete ObjectProto[r],dP(e,r,t),o&&e!==ObjectProto&&dP(ObjectProto,r,o)}:dP,wrap=function(e){var r=AllSymbols[e]=_create($Symbol[PROTOTYPE]);return r._k=e,r},isSymbol=USE_NATIVE&&"symbol"==typeof $Symbol.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof $Symbol},$defineProperty=function(e,r,t){return e===ObjectProto&&$defineProperty(OPSymbols,r,t),anObject(e),r=toPrimitive(r,!0),anObject(t),has(AllSymbols,r)?(t.enumerable?(has(e,HIDDEN)&&e[HIDDEN][r]&&(e[HIDDEN][r]=!1),t=_create(t,{enumerable:createDesc(0,!1)})):(has(e,HIDDEN)||dP(e,HIDDEN,createDesc(1,{})),e[HIDDEN][r]=!0),setSymbolDesc(e,r,t)):dP(e,r,t)},$defineProperties=function(e,r){anObject(e);for(var t,o=enumKeys(r=toIObject(r)),i=0,s=o.length;s>i;)$defineProperty(e,t=o[i++],r[t]);return e},$create=function(e,r){return void 0===r?_create(e):$defineProperties(_create(e),r)},$propertyIsEnumerable=function(e){var r=isEnum.call(this,e=toPrimitive(e,!0));return!(this===ObjectProto&&has(AllSymbols,e)&&!has(OPSymbols,e))&&(!(r||!has(this,e)||!has(AllSymbols,e)||has(this,HIDDEN)&&this[HIDDEN][e])||r)},$getOwnPropertyDescriptor=function(e,r){if(e=toIObject(e),r=toPrimitive(r,!0),e!==ObjectProto||!has(AllSymbols,r)||has(OPSymbols,r)){var t=gOPD(e,r);return!t||!has(AllSymbols,r)||has(e,HIDDEN)&&e[HIDDEN][r]||(t.enumerable=!0),t}},$getOwnPropertyNames=function(e){for(var r,t=gOPN(toIObject(e)),o=[],i=0;t.length>i;)has(AllSymbols,r=t[i++])||r==HIDDEN||r==META||o.push(r);return o},$getOwnPropertySymbols=function(e){for(var r,t=e===ObjectProto,o=gOPN(t?OPSymbols:toIObject(e)),i=[],s=0;o.length>s;)!has(AllSymbols,r=o[s++])||t&&!has(ObjectProto,r)||i.push(AllSymbols[r]);return i};USE_NATIVE||($Symbol=function(){if(this instanceof $Symbol)throw TypeError("Symbol is not a constructor!");var e=uid(arguments.length>0?arguments[0]:void 0),r=function(t){this===ObjectProto&&r.call(OPSymbols,t),has(this,HIDDEN)&&has(this[HIDDEN],e)&&(this[HIDDEN][e]=!1),setSymbolDesc(this,e,createDesc(1,t))};return DESCRIPTORS&&setter&&setSymbolDesc(ObjectProto,e,{configurable:!0,set:r}),wrap(e)},redefine($Symbol[PROTOTYPE],"toString",(function(){return this._k})),$GOPD.f=$getOwnPropertyDescriptor,$DP.f=$defineProperty,require("./_object-gopn").f=gOPNExt.f=$getOwnPropertyNames,require("./_object-pie").f=$propertyIsEnumerable,require("./_object-gops").f=$getOwnPropertySymbols,DESCRIPTORS&&!require("./_library")&&redefine(ObjectProto,"propertyIsEnumerable",$propertyIsEnumerable,!0),wksExt.f=function(e){return wrap(wks(e))}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Symbol:$Symbol});for(var symbols="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),i=0;symbols.length>i;)wks(symbols[i++]);for(var symbols=$keys(wks.store),i=0;symbols.length>i;)wksDefine(symbols[i++]);$export($export.S+$export.F*!USE_NATIVE,"Symbol",{for:function(e){return has(SymbolRegistry,e+="")?SymbolRegistry[e]:SymbolRegistry[e]=$Symbol(e)},keyFor:function(e){if(isSymbol(e))return keyOf(SymbolRegistry,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){setter=!0},useSimple:function(){setter=!1}}),$export($export.S+$export.F*!USE_NATIVE,"Object",{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor,getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols}),$JSON&&$export($export.S+$export.F*(!USE_NATIVE||$fails((function(){var e=$Symbol();return"[null]"!=_stringify([e])||"{}"!=_stringify({a:e})||"{}"!=_stringify(Object(e))}))),"JSON",{stringify:function(e){if(void 0!==e&&!isSymbol(e)){for(var r,t,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);return r=o[1],"function"==typeof r&&(t=r),!t&&isArray(r)||(r=function(e,r){if(t&&(r=t.call(this,e,r)),!isSymbol(r))return r}),o[1]=r,_stringify.apply($JSON,o)}}}),$Symbol[PROTOTYPE][TO_PRIMITIVE]||require("./_hide")($Symbol[PROTOTYPE],TO_PRIMITIVE,$Symbol[PROTOTYPE].valueOf),setToStringTag($Symbol,"Symbol"),setToStringTag(Math,"Math",!0),setToStringTag(global.JSON,"JSON",!0);
},{"./_an-object":30,"./_descriptors":37,"./_enum-keys":40,"./_export":41,"./_fails":42,"./_global":44,"./_has":45,"./_hide":46,"./_is-array":52,"./_keyof":60,"./_library":61,"./_meta":62,"./_object-create":64,"./_object-dp":65,"./_object-gopd":67,"./_object-gopn":69,"./_object-gopn-ext":68,"./_object-gops":70,"./_object-keys":73,"./_object-pie":74,"./_property-desc":76,"./_redefine":78,"./_set-to-string-tag":80,"./_shared":82,"./_to-iobject":88,"./_to-primitive":91,"./_uid":92,"./_wks":95,"./_wks-define":93,"./_wks-ext":94}],105:[function(require,module,exports){
require("./_wks-define")("asyncIterator");
},{"./_wks-define":93}],106:[function(require,module,exports){
require("./_wks-define")("observable");
},{"./_wks-define":93}],107:[function(require,module,exports){
require("./es6.array.iterator");for(var global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),TO_STRING_TAG=require("./_wks")("toStringTag"),collections=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],i=0;i<5;i++){var NAME=collections[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}
},{"./_global":44,"./_hide":46,"./_iterators":59,"./_wks":95,"./es6.array.iterator":97}],108:[function(require,module,exports){
(function (process,global){
!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()})(this,(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return function(){H(a)}}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(t){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!(function(){var t=n[i-1];J((function(){return x(i,o,t,r._result)}))})():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(t){return it.error=t,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function m(t,e,n){J((function(t){var r=!1,o=y(n,e,(function(n){r||(r=!0,e!==n?g(t,n):S(t,n))}),(function(e){r||(r=!0,j(t,e))}),"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))}),t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,(function(e){return g(t,e)}),(function(e){return j(t,e)}))}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?j(t,it.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(T,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(t){return st.error=t,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=P(r,o),s===st?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e((function(e){g(t,e)}),(function(e){j(t,e)}))}catch(e){j(t,e)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new M,st=new M,ut=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,(function(t){return n._settledAt(rt,e,t)}),(function(t){return n._settledAt(ot,e,t)}))},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,catch:function(t){return this.then(null,t)}},W(),U.polyfill=W,U.Promise=U,U}));
}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":134}],109:[function(require,module,exports){
(function (global){
"use strict";function nextTick(){draining=!0;for(var e,n,t=queue.length;t;){for(n=queue,queue=[],e=-1;++e<t;)n[e]();t=queue.length}draining=!1}function immediate(e){1!==queue.push(e)||draining||scheduleDrain()}var Mutation=global.MutationObserver||global.WebKitMutationObserver,scheduleDrain;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode("");observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(global.setImmediate||"undefined"==typeof global.MessageChannel)scheduleDrain="document"in global&&"onreadystatechange"in global.document.createElement("script")?function(){var e=global.document.createElement("script");e.onreadystatechange=function(){nextTick(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e)}:function(){setTimeout(nextTick,0)};else{var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}var draining,queue=[];module.exports=immediate;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],110:[function(require,module,exports){
"use strict";function INTERNAL(){}function Promise(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=PENDING,this.queue=[],this.outcome=void 0,e!==INTERNAL&&safelyResolveThenable(this,e)}function QueueItem(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function unwrap(e,t,r){immediate((function(){var n;try{n=t(r)}catch(t){return handlers.reject(e,t)}n===e?handlers.reject(e,new TypeError("Cannot resolve promise with itself")):handlers.resolve(e,n)}))}function getThen(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function safelyResolveThenable(e,t){function r(t){s||(s=!0,handlers.reject(e,t))}function n(t){s||(s=!0,handlers.resolve(e,t))}function o(){t(n,r)}var s=!1,i=tryCatch(o);"error"===i.status&&r(i.value)}function tryCatch(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function resolve(e){return e instanceof this?e:handlers.resolve(new this(INTERNAL),e)}function reject(e){var t=new this(INTERNAL);return handlers.reject(t,e)}function all(e){function t(e,t){function u(e){s[t]=e,++i!==n||o||(o=!0,handlers.resolve(l,s))}r.resolve(e).then(u,(function(e){o||(o=!0,handlers.reject(l,e))}))}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=new Array(n),i=0,u=-1,l=new this(INTERNAL);++u<n;)t(e[u],u);return l}function race(e){function t(e){r.resolve(e).then((function(e){o||(o=!0,handlers.resolve(i,e))}),(function(e){o||(o=!0,handlers.reject(i,e))}))}var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var s=-1,i=new this(INTERNAL);++s<n;)t(e[s]);return i}var immediate=require("immediate"),handlers={},REJECTED=["REJECTED"],FULFILLED=["FULFILLED"],PENDING=["PENDING"];module.exports=Promise,Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){if("function"!=typeof e&&this.state===FULFILLED||"function"!=typeof t&&this.state===REJECTED)return this;var r=new this.constructor(INTERNAL);if(this.state!==PENDING){var n=this.state===FULFILLED?e:t;unwrap(r,n,this.outcome)}else this.queue.push(new QueueItem(r,e,t));return r},QueueItem.prototype.callFulfilled=function(e){handlers.resolve(this.promise,e)},QueueItem.prototype.otherCallFulfilled=function(e){unwrap(this.promise,this.onFulfilled,e)},QueueItem.prototype.callRejected=function(e){handlers.reject(this.promise,e)},QueueItem.prototype.otherCallRejected=function(e){unwrap(this.promise,this.onRejected,e)},handlers.resolve=function(e,t){var r=tryCatch(getThen,t);if("error"===r.status)return handlers.reject(e,r.value);var n=r.value;if(n)safelyResolveThenable(e,n);else{e.state=FULFILLED,e.outcome=t;for(var o=-1,s=e.queue.length;++o<s;)e.queue[o].callFulfilled(t)}return e},handlers.reject=function(e,t){e.state=REJECTED,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},Promise.resolve=resolve,Promise.reject=reject,Promise.all=all,Promise.race=race;
},{"immediate":109}],111:[function(require,module,exports){
!(function(){var e={},n=0,o=function(e){var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)},t=function(t,r,a){var c,d,i=document.createElement("script"),l=!1,f=function(){l||(l=!0,d(),r&&r.call(a,c))},u=function(){c=new Error(t||"EMPTY"),f()};if(!i.readyState||"async"in i)d=function(){i.onload=i.onerror=null},i.onerror=u,i.onload=f,i.async=!0,i.charset="utf-8",i.src=t,o(i);else{var s=n++,y={loaded:!0,complete:!0},m=!1;d=function(){i.onreadystatechange=i.onerror=null,e[s]=void 0},i.onreadystatechange=function(){var e=i.readyState;if(!c)return!m&&y[e]&&(m=!0,o(i)),"loaded"===e&&(i.children,"loading"===i.readyState)?u():void("complete"===i.readyState&&f())},i.onerror=u,e[s]=i,i.src=t}};"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define&&define.amd?define([],(function(){return t})):window._lload=t})();
},{}],112:[function(require,module,exports){
"use strict";module.exports=require("./src/js/adaptor/jquery");
},{"./src/js/adaptor/jquery":113}],113:[function(require,module,exports){
"use strict";function mountJQuery(e){e.fn.perfectScrollbar=function(e){return this.each((function(){if("object"==typeof e||"undefined"==typeof e){var n=e;psInstances.get(this)||ps.initialize(this,n)}else{var t=e;"update"===t?ps.update(this):"destroy"===t&&ps.destroy(this)}}))}}var ps=require("../main"),psInstances=require("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],mountJQuery);else{var jq=window.jQuery?window.jQuery:window.$;"undefined"!=typeof jq&&mountJQuery(jq)}module.exports=mountJQuery;
},{"../main":119,"../plugin/instances":130}],114:[function(require,module,exports){
"use strict";function oldAdd(s,e){var t=s.className.split(" ");t.indexOf(e)<0&&t.push(e),s.className=t.join(" ")}function oldRemove(s,e){var t=s.className.split(" "),a=t.indexOf(e);a>=0&&t.splice(a,1),s.className=t.join(" ")}exports.add=function(s,e){s.classList?s.classList.add(e):oldAdd(s,e)},exports.remove=function(s,e){s.classList?s.classList.remove(e):oldRemove(s,e)},exports.list=function(s){return s.classList?Array.prototype.slice.apply(s.classList):s.className.split(" ")};
},{}],115:[function(require,module,exports){
"use strict";function cssGet(e,t){return window.getComputedStyle(e)[t]}function cssSet(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function cssMultiSet(e,t){for(var n in t){var o=t[n];"number"==typeof o&&(o=o.toString()+"px"),e.style[n]=o}return e}var DOM={};DOM.e=function(e,t){var n=document.createElement(e);return n.className=t,n},DOM.appendTo=function(e,t){return t.appendChild(e),e},DOM.css=function(e,t,n){return"object"==typeof t?cssMultiSet(e,t):"undefined"==typeof n?cssGet(e,t):cssSet(e,t,n)},DOM.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},DOM.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},DOM.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,(function(e){return DOM.matches(e,t)}))},module.exports=DOM;
},{}],116:[function(require,module,exports){
"use strict";var EventElement=function(e){this.element=e,this.events={}};EventElement.prototype.bind=function(e,n){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(n),this.element.addEventListener(e,n,!1)},EventElement.prototype.unbind=function(e,n){var t="undefined"!=typeof n;this.events[e]=this.events[e].filter((function(i){return!(!t||i===n)||(this.element.removeEventListener(e,i,!1),!1)}),this)},EventElement.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var EventManager=function(){this.eventElements=[]};EventManager.prototype.eventElement=function(e){var n=this.eventElements.filter((function(n){return n.element===e}))[0];return"undefined"==typeof n&&(n=new EventElement(e),this.eventElements.push(n)),n},EventManager.prototype.bind=function(e,n,t){this.eventElement(e).bind(n,t)},EventManager.prototype.unbind=function(e,n,t){this.eventElement(e).unbind(n,t)},EventManager.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},EventManager.prototype.once=function(e,n,t){var i=this.eventElement(e),s=function(e){i.unbind(n,s),t(e)};i.bind(n,s)},module.exports=EventManager;
},{}],117:[function(require,module,exports){
"use strict";module.exports=(function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}})();
},{}],118:[function(require,module,exports){
"use strict";var cls=require("./class"),dom=require("./dom"),toInt=exports.toInt=function(t){return parseInt(t,10)||0},clone=exports.clone=function(t){if(t){if(t.constructor===Array)return t.map(clone);if("object"==typeof t){var e={};for(var o in t)e[o]=clone(t[o]);return e}return t}return null};exports.extend=function(t,e){var o=clone(t);for(var n in e)o[n]=clone(e[n]);return o},exports.isEditable=function(t){return dom.matches(t,"input,[contenteditable]")||dom.matches(t,"select,[contenteditable]")||dom.matches(t,"textarea,[contenteditable]")||dom.matches(t,"button,[contenteditable]")},exports.removePsClasses=function(t){for(var e=cls.list(t),o=0;o<e.length;o++){var n=e[o];0===n.indexOf("ps-")&&cls.remove(t,n)}},exports.outerWidth=function(t){return toInt(dom.css(t,"width"))+toInt(dom.css(t,"paddingLeft"))+toInt(dom.css(t,"paddingRight"))+toInt(dom.css(t,"borderLeftWidth"))+toInt(dom.css(t,"borderRightWidth"))},exports.startScrolling=function(t,e){cls.add(t,"ps-in-scrolling"),"undefined"!=typeof e?cls.add(t,"ps-"+e):(cls.add(t,"ps-x"),cls.add(t,"ps-y"))},exports.stopScrolling=function(t,e){cls.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?cls.remove(t,"ps-"+e):(cls.remove(t,"ps-x"),cls.remove(t,"ps-y"))},exports.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints};
},{"./class":114,"./dom":115}],119:[function(require,module,exports){
"use strict";var destroy=require("./plugin/destroy"),initialize=require("./plugin/initialize"),update=require("./plugin/update");module.exports={initialize:initialize,update:update,destroy:destroy};
},{"./plugin/destroy":121,"./plugin/initialize":129,"./plugin/update":133}],120:[function(require,module,exports){
"use strict";module.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"};
},{}],121:[function(require,module,exports){
"use strict";var _=require("../lib/helper"),dom=require("../lib/dom"),instances=require("./instances");module.exports=function(e){var r=instances.get(e);r&&(r.event.unbindAll(),dom.remove(r.scrollbarX),dom.remove(r.scrollbarY),dom.remove(r.scrollbarXRail),dom.remove(r.scrollbarYRail),_.removePsClasses(e),instances.remove(e))};
},{"../lib/dom":115,"../lib/helper":118,"./instances":130}],122:[function(require,module,exports){
"use strict";function bindClickRailHandler(e,t){function r(e){return e.getBoundingClientRect()}var l=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",l),t.event.bind(t.scrollbarYRail,"click",(function(l){var a=l.pageY-window.pageYOffset-r(t.scrollbarYRail).top,o=a>t.scrollbarYTop?1:-1;updateScroll(e,"top",e.scrollTop+o*t.containerHeight),updateGeometry(e),l.stopPropagation()})),t.event.bind(t.scrollbarX,"click",l),t.event.bind(t.scrollbarXRail,"click",(function(l){var a=l.pageX-window.pageXOffset-r(t.scrollbarXRail).left,o=a>t.scrollbarXLeft?1:-1;updateScroll(e,"left",e.scrollLeft+o*t.containerWidth),updateGeometry(e),l.stopPropagation()}))}var instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(e){var t=instances.get(e);bindClickRailHandler(e,t)};
},{"../instances":130,"../update-geometry":131,"../update-scroll":132}],123:[function(require,module,exports){
"use strict";function bindMouseScrollXHandler(e,o){function t(t){var r=n+t*o.railXRatio,l=Math.max(0,o.scrollbarXRail.getBoundingClientRect().left)+o.railXRatio*(o.railXWidth-o.scrollbarXWidth);r<0?o.scrollbarXLeft=0:r>l?o.scrollbarXLeft=l:o.scrollbarXLeft=r;var a=_.toInt(o.scrollbarXLeft*(o.contentWidth-o.containerWidth)/(o.containerWidth-o.railXRatio*o.scrollbarXWidth))-o.negativeScrollAdjustment;updateScroll(e,"left",a)}var n=null,r=null,l=function(o){t(o.pageX-r),updateGeometry(e),o.stopPropagation(),o.preventDefault()},a=function(){_.stopScrolling(e,"x"),o.event.unbind(o.ownerDocument,"mousemove",l)};o.event.bind(o.scrollbarX,"mousedown",(function(t){r=t.pageX,n=_.toInt(dom.css(o.scrollbarX,"left"))*o.railXRatio,_.startScrolling(e,"x"),o.event.bind(o.ownerDocument,"mousemove",l),o.event.once(o.ownerDocument,"mouseup",a),t.stopPropagation(),t.preventDefault()}))}function bindMouseScrollYHandler(e,o){function t(t){var r=n+t*o.railYRatio,l=Math.max(0,o.scrollbarYRail.getBoundingClientRect().top)+o.railYRatio*(o.railYHeight-o.scrollbarYHeight);r<0?o.scrollbarYTop=0:r>l?o.scrollbarYTop=l:o.scrollbarYTop=r;var a=_.toInt(o.scrollbarYTop*(o.contentHeight-o.containerHeight)/(o.containerHeight-o.railYRatio*o.scrollbarYHeight));updateScroll(e,"top",a)}var n=null,r=null,l=function(o){t(o.pageY-r),updateGeometry(e),o.stopPropagation(),o.preventDefault()},a=function(){_.stopScrolling(e,"y"),o.event.unbind(o.ownerDocument,"mousemove",l)};o.event.bind(o.scrollbarY,"mousedown",(function(t){r=t.pageY,n=_.toInt(dom.css(o.scrollbarY,"top"))*o.railYRatio,_.startScrolling(e,"y"),o.event.bind(o.ownerDocument,"mousemove",l),o.event.once(o.ownerDocument,"mouseup",a),t.stopPropagation(),t.preventDefault()}))}var _=require("../../lib/helper"),dom=require("../../lib/dom"),instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(e){var o=instances.get(e);bindMouseScrollXHandler(e,o),bindMouseScrollYHandler(e,o)};
},{"../../lib/dom":115,"../../lib/helper":118,"../instances":130,"../update-geometry":131,"../update-scroll":132}],124:[function(require,module,exports){
"use strict";function bindKeyboardHandler(e,t){function n(n,r){var a=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===a&&r>0||a>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var i=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===i&&n<0||i>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var r=!1;t.event.bind(e,"mouseenter",(function(){r=!0})),t.event.bind(e,"mouseleave",(function(){r=!1}));var a=!1;t.event.bind(t.ownerDocument,"keydown",(function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)){var o=dom.matches(t.scrollbarX,":focus")||dom.matches(t.scrollbarY,":focus");if(r||o){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(_.isEditable(c))return}var l=0,s=0;switch(i.which){case 37:l=i.metaKey?-t.contentWidth:i.altKey?-t.containerWidth:-30;break;case 38:s=i.metaKey?t.contentHeight:i.altKey?t.containerHeight:30;break;case 39:l=i.metaKey?t.contentWidth:i.altKey?t.containerWidth:30;break;case 40:s=i.metaKey?-t.contentHeight:i.altKey?-t.containerHeight:-30;break;case 33:s=90;break;case 32:s=i.shiftKey?90:-90;break;case 34:s=-90;break;case 35:s=i.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:s=i.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}updateScroll(e,"top",e.scrollTop-s),updateScroll(e,"left",e.scrollLeft+l),updateGeometry(e),a=n(l,s),a&&i.preventDefault()}}}))}var _=require("../../lib/helper"),dom=require("../../lib/dom"),instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(e){var t=instances.get(e);bindKeyboardHandler(e,t)};
},{"../../lib/dom":115,"../../lib/helper":118,"../instances":130,"../update-geometry":131,"../update-scroll":132}],125:[function(require,module,exports){
"use strict";function bindMouseWheelHandler(e,t){function l(l,r){var o=e.scrollTop;if(0===l){if(!t.scrollbarYActive)return!1;if(0===o&&r>0||o>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var n=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===n&&l<0||n>=t.contentWidth-t.containerWidth&&l>0)return!t.settings.wheelPropagation}return!0}function r(e){var t=e.deltaX,l=-1*e.deltaY;return"undefined"!=typeof t&&"undefined"!=typeof l||(t=-1*e.wheelDeltaX/6,l=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,l*=10),t!==t&&l!==l&&(t=0,l=e.wheelDelta),e.shiftKey?[-l,-t]:[t,l]}function o(t,l){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if(!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&l>0||r.scrollTop===o&&l<0))return!0;var n=r.scrollLeft-r.clientWidth;if(n>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===n&&t>0))return!0}return!1}function n(n){var s=r(n),c=s[0],a=s[1];o(c,a)||(i=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a?updateScroll(e,"top",e.scrollTop-a*t.settings.wheelSpeed):updateScroll(e,"top",e.scrollTop+c*t.settings.wheelSpeed),i=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(c?updateScroll(e,"left",e.scrollLeft+c*t.settings.wheelSpeed):updateScroll(e,"left",e.scrollLeft-a*t.settings.wheelSpeed),i=!0):(updateScroll(e,"top",e.scrollTop-a*t.settings.wheelSpeed),updateScroll(e,"left",e.scrollLeft+c*t.settings.wheelSpeed)),updateGeometry(e),i=i||l(c,a),i&&(n.stopPropagation(),n.preventDefault()))}var i=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",n):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",n)}var instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(e){var t=instances.get(e);bindMouseWheelHandler(e,t)};
},{"../instances":130,"../update-geometry":131,"../update-scroll":132}],126:[function(require,module,exports){
"use strict";function bindNativeScrollHandler(e,t){t.event.bind(e,"scroll",(function(){updateGeometry(e)}))}var instances=require("../instances"),updateGeometry=require("../update-geometry");module.exports=function(e){var t=instances.get(e);bindNativeScrollHandler(e,t)};
},{"../instances":130,"../update-geometry":131}],127:[function(require,module,exports){
"use strict";function bindSelectionHandler(t,e){function o(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function n(){i||(i=setInterval((function(){return instances.get(t)?(updateScroll(t,"top",t.scrollTop+r.top),updateScroll(t,"left",t.scrollLeft+r.left),void updateGeometry(t)):void clearInterval(i)}),50))}function l(){i&&(clearInterval(i),i=null),_.stopScrolling(t)}var i=null,r={top:0,left:0},c=!1;e.event.bind(e.ownerDocument,"selectionchange",(function(){t.contains(o())?c=!0:(c=!1,l())})),e.event.bind(window,"mouseup",(function(){c&&(c=!1,l())})),e.event.bind(window,"keyup",(function(){c&&(c=!1,l())})),e.event.bind(window,"mousemove",(function(e){if(c){var o={x:e.pageX,y:e.pageY},i={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};o.x<i.left+3?(r.left=-5,_.startScrolling(t,"x")):o.x>i.right-3?(r.left=5,_.startScrolling(t,"x")):r.left=0,o.y<i.top+3?(i.top+3-o.y<5?r.top=-5:r.top=-20,_.startScrolling(t,"y")):o.y>i.bottom-3?(o.y-i.bottom+3<5?r.top=5:r.top=20,_.startScrolling(t,"y")):r.top=0,0===r.top&&0===r.left?l():n()}}))}var _=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(t){var e=instances.get(t);bindSelectionHandler(t,e)};
},{"../../lib/helper":118,"../instances":130,"../update-geometry":131,"../update-scroll":132}],128:[function(require,module,exports){
"use strict";function bindTouchHandler(e,n,t,o){function i(t,o){var i=e.scrollTop,r=e.scrollLeft,a=Math.abs(t),p=Math.abs(o);if(p>a){if(o<0&&i===n.contentHeight-n.containerHeight||o>0&&0===i)return!n.settings.swipePropagation}else if(a>p&&(t<0&&r===n.contentWidth-n.containerWidth||t>0&&0===r))return!n.settings.swipePropagation;return!0}function r(n,t){updateScroll(e,"top",e.scrollTop-t),updateScroll(e,"left",e.scrollLeft-n),updateGeometry(e)}function a(){b=!0}function p(){b=!1}function u(e){return e.targetTouches?e.targetTouches[0]:e}function s(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function c(e){if(s(e)){f=!0;var n=u(e);l.pageX=n.pageX,l.pageY=n.pageY,g=(new Date).getTime(),null!==h&&clearInterval(h),e.stopPropagation()}}function d(e){if(!f&&n.settings.swipePropagation&&c(e),!b&&f&&s(e)){var t=u(e),o={pageX:t.pageX,pageY:t.pageY},a=o.pageX-l.pageX,p=o.pageY-l.pageY;r(a,p),l=o;var d=(new Date).getTime(),v=d-g;v>0&&(w.x=a/v,w.y=p/v,g=d),i(a,p)&&(e.stopPropagation(),e.preventDefault())}}function v(){!b&&f&&(f=!1,clearInterval(h),h=setInterval((function(){return instances.get(e)&&(w.x||w.y)?Math.abs(w.x)<.01&&Math.abs(w.y)<.01?void clearInterval(h):(r(30*w.x,30*w.y),w.x*=.8,void(w.y*=.8)):void clearInterval(h)}),10))}var l={},g=0,w={},h=null,b=!1,f=!1;t?(n.event.bind(window,"touchstart",a),n.event.bind(window,"touchend",p),n.event.bind(e,"touchstart",c),n.event.bind(e,"touchmove",d),n.event.bind(e,"touchend",v)):o&&(window.PointerEvent?(n.event.bind(window,"pointerdown",a),n.event.bind(window,"pointerup",p),n.event.bind(e,"pointerdown",c),n.event.bind(e,"pointermove",d),n.event.bind(e,"pointerup",v)):window.MSPointerEvent&&(n.event.bind(window,"MSPointerDown",a),n.event.bind(window,"MSPointerUp",p),n.event.bind(e,"MSPointerDown",c),n.event.bind(e,"MSPointerMove",d),n.event.bind(e,"MSPointerUp",v)))}var _=require("../../lib/helper"),instances=require("../instances"),updateGeometry=require("../update-geometry"),updateScroll=require("../update-scroll");module.exports=function(e){if(_.env.supportsTouch||_.env.supportsIePointer){var n=instances.get(e);bindTouchHandler(e,n,_.env.supportsTouch,_.env.supportsIePointer)}};
},{"../../lib/helper":118,"../instances":130,"../update-geometry":131,"../update-scroll":132}],129:[function(require,module,exports){
"use strict";var _=require("../lib/helper"),cls=require("../lib/class"),instances=require("./instances"),updateGeometry=require("./update-geometry"),handlers={"click-rail":require("./handler/click-rail"),"drag-scrollbar":require("./handler/drag-scrollbar"),keyboard:require("./handler/keyboard"),wheel:require("./handler/mouse-wheel"),touch:require("./handler/touch"),selection:require("./handler/selection")},nativeScrollHandler=require("./handler/native-scroll");module.exports=function(e,r){r="object"==typeof r?r:{},cls.add(e,"ps-container");var l=instances.add(e);l.settings=_.extend(l.settings,r),cls.add(e,"ps-theme-"+l.settings.theme),l.settings.handlers.forEach((function(r){handlers[r](e)})),nativeScrollHandler(e),updateGeometry(e)};
},{"../lib/class":114,"../lib/helper":118,"./handler/click-rail":122,"./handler/drag-scrollbar":123,"./handler/keyboard":124,"./handler/mouse-wheel":125,"./handler/native-scroll":126,"./handler/selection":127,"./handler/touch":128,"./instances":130,"./update-geometry":131}],130:[function(require,module,exports){
"use strict";function Instance(l){function r(){cls.add(l,"ps-focus")}function t(){cls.remove(l,"ps-focus")}var o=this;o.settings=_.clone(defaultSettings),o.containerWidth=null,o.containerHeight=null,o.contentWidth=null,o.contentHeight=null,o.isRtl="rtl"===dom.css(l,"direction"),o.isNegativeScroll=(function(){var r=l.scrollLeft,t=null;return l.scrollLeft=-1,t=l.scrollLeft<0,l.scrollLeft=r,t})(),o.negativeScrollAdjustment=o.isNegativeScroll?l.scrollWidth-l.clientWidth:0,o.event=new EventManager,o.ownerDocument=l.ownerDocument||document,o.scrollbarXRail=dom.appendTo(dom.e("div","ps-scrollbar-x-rail"),l),o.scrollbarX=dom.appendTo(dom.e("div","ps-scrollbar-x"),o.scrollbarXRail),o.scrollbarX.setAttribute("tabindex",0),o.event.bind(o.scrollbarX,"focus",r),o.event.bind(o.scrollbarX,"blur",t),o.scrollbarXActive=null,o.scrollbarXWidth=null,o.scrollbarXLeft=null,o.scrollbarXBottom=_.toInt(dom.css(o.scrollbarXRail,"bottom")),o.isScrollbarXUsingBottom=o.scrollbarXBottom===o.scrollbarXBottom,o.scrollbarXTop=o.isScrollbarXUsingBottom?null:_.toInt(dom.css(o.scrollbarXRail,"top")),o.railBorderXWidth=_.toInt(dom.css(o.scrollbarXRail,"borderLeftWidth"))+_.toInt(dom.css(o.scrollbarXRail,"borderRightWidth")),dom.css(o.scrollbarXRail,"display","block"),o.railXMarginWidth=_.toInt(dom.css(o.scrollbarXRail,"marginLeft"))+_.toInt(dom.css(o.scrollbarXRail,"marginRight")),dom.css(o.scrollbarXRail,"display",""),o.railXWidth=null,o.railXRatio=null,o.scrollbarYRail=dom.appendTo(dom.e("div","ps-scrollbar-y-rail"),l),o.scrollbarY=dom.appendTo(dom.e("div","ps-scrollbar-y"),o.scrollbarYRail),o.scrollbarY.setAttribute("tabindex",0),o.event.bind(o.scrollbarY,"focus",r),o.event.bind(o.scrollbarY,"blur",t),o.scrollbarYActive=null,o.scrollbarYHeight=null,o.scrollbarYTop=null,o.scrollbarYRight=_.toInt(dom.css(o.scrollbarYRail,"right")),o.isScrollbarYUsingRight=o.scrollbarYRight===o.scrollbarYRight,o.scrollbarYLeft=o.isScrollbarYUsingRight?null:_.toInt(dom.css(o.scrollbarYRail,"left")),o.scrollbarYOuterWidth=o.isRtl?_.outerWidth(o.scrollbarY):null,o.railBorderYWidth=_.toInt(dom.css(o.scrollbarYRail,"borderTopWidth"))+_.toInt(dom.css(o.scrollbarYRail,"borderBottomWidth")),dom.css(o.scrollbarYRail,"display","block"),o.railYMarginHeight=_.toInt(dom.css(o.scrollbarYRail,"marginTop"))+_.toInt(dom.css(o.scrollbarYRail,"marginBottom")),dom.css(o.scrollbarYRail,"display",""),o.railYHeight=null,o.railYRatio=null}function getId(l){return l.getAttribute("data-ps-id")}function setId(l,r){l.setAttribute("data-ps-id",r)}function removeId(l){l.removeAttribute("data-ps-id")}var _=require("../lib/helper"),cls=require("../lib/class"),defaultSettings=require("./default-setting"),dom=require("../lib/dom"),EventManager=require("../lib/event-manager"),guid=require("../lib/guid"),instances={};exports.add=function(l){var r=guid();return setId(l,r),instances[r]=new Instance(l),instances[r]},exports.remove=function(l){delete instances[getId(l)],removeId(l)},exports.get=function(l){return instances[getId(l)]};
},{"../lib/class":114,"../lib/dom":115,"../lib/event-manager":116,"../lib/guid":117,"../lib/helper":118,"./default-setting":120}],131:[function(require,module,exports){
"use strict";function getThumbSize(t,r){return t.settings.minScrollbarLength&&(r=Math.max(r,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(r=Math.min(r,t.settings.maxScrollbarLength)),r}function updateCss(t,r){var l={width:r.railXWidth};r.isRtl?l.left=r.negativeScrollAdjustment+t.scrollLeft+r.containerWidth-r.contentWidth:l.left=t.scrollLeft,r.isScrollbarXUsingBottom?l.bottom=r.scrollbarXBottom-t.scrollTop:l.top=r.scrollbarXTop+t.scrollTop,dom.css(r.scrollbarXRail,l);var i={top:t.scrollTop,height:r.railYHeight};r.isScrollbarYUsingRight?r.isRtl?i.right=r.contentWidth-(r.negativeScrollAdjustment+t.scrollLeft)-r.scrollbarYRight-r.scrollbarYOuterWidth:i.right=r.scrollbarYRight-t.scrollLeft:r.isRtl?i.left=r.negativeScrollAdjustment+t.scrollLeft+2*r.containerWidth-r.contentWidth-r.scrollbarYLeft-r.scrollbarYOuterWidth:i.left=r.scrollbarYLeft+t.scrollLeft,dom.css(r.scrollbarYRail,i),dom.css(r.scrollbarX,{left:r.scrollbarXLeft,width:r.scrollbarXWidth-r.railBorderXWidth}),dom.css(r.scrollbarY,{top:r.scrollbarYTop,height:r.scrollbarYHeight-r.railBorderYWidth})}var _=require("../lib/helper"),cls=require("../lib/class"),dom=require("../lib/dom"),instances=require("./instances"),updateScroll=require("./update-scroll");module.exports=function(t){var r=instances.get(t);r.containerWidth=t.clientWidth,r.containerHeight=t.clientHeight,r.contentWidth=t.scrollWidth,r.contentHeight=t.scrollHeight;var l;t.contains(r.scrollbarXRail)||(l=dom.queryChildren(t,".ps-scrollbar-x-rail"),l.length>0&&l.forEach((function(t){dom.remove(t)})),dom.appendTo(r.scrollbarXRail,t)),t.contains(r.scrollbarYRail)||(l=dom.queryChildren(t,".ps-scrollbar-y-rail"),l.length>0&&l.forEach((function(t){dom.remove(t)})),dom.appendTo(r.scrollbarYRail,t)),!r.settings.suppressScrollX&&r.containerWidth+r.settings.scrollXMarginOffset<r.contentWidth?(r.scrollbarXActive=!0,r.railXWidth=r.containerWidth-r.railXMarginWidth,r.railXRatio=r.containerWidth/r.railXWidth,r.scrollbarXWidth=getThumbSize(r,_.toInt(r.railXWidth*r.containerWidth/r.contentWidth)),r.scrollbarXLeft=_.toInt((r.negativeScrollAdjustment+t.scrollLeft)*(r.railXWidth-r.scrollbarXWidth)/(r.contentWidth-r.containerWidth))):r.scrollbarXActive=!1,!r.settings.suppressScrollY&&r.containerHeight+r.settings.scrollYMarginOffset<r.contentHeight?(r.scrollbarYActive=!0,r.railYHeight=r.containerHeight-r.railYMarginHeight,r.railYRatio=r.containerHeight/r.railYHeight,r.scrollbarYHeight=getThumbSize(r,_.toInt(r.railYHeight*r.containerHeight/r.contentHeight)),r.scrollbarYTop=_.toInt(t.scrollTop*(r.railYHeight-r.scrollbarYHeight)/(r.contentHeight-r.containerHeight))):r.scrollbarYActive=!1,r.scrollbarXLeft>=r.railXWidth-r.scrollbarXWidth&&(r.scrollbarXLeft=r.railXWidth-r.scrollbarXWidth),r.scrollbarYTop>=r.railYHeight-r.scrollbarYHeight&&(r.scrollbarYTop=r.railYHeight-r.scrollbarYHeight),updateCss(t,r),r.scrollbarXActive?cls.add(t,"ps-active-x"):(cls.remove(t,"ps-active-x"),r.scrollbarXWidth=0,r.scrollbarXLeft=0,updateScroll(t,"left",0)),r.scrollbarYActive?cls.add(t,"ps-active-y"):(cls.remove(t,"ps-active-y"),r.scrollbarYHeight=0,r.scrollbarYTop=0,updateScroll(t,"top",0))};
},{"../lib/class":114,"../lib/dom":115,"../lib/helper":118,"./instances":130,"./update-scroll":132}],132:[function(require,module,exports){
"use strict";var instances=require("./instances"),lastTop,lastLeft,createDOMEvent=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e};module.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(createDOMEvent("ps-y-reach-start"))),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(createDOMEvent("ps-x-reach-start")));var o=instances.get(t);"top"===e&&n>=o.contentHeight-o.containerHeight&&(n=o.contentHeight-o.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(createDOMEvent("ps-y-reach-end"))),"left"===e&&n>=o.contentWidth-o.containerWidth&&(n=o.contentWidth-o.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(createDOMEvent("ps-x-reach-end"))),lastTop||(lastTop=t.scrollTop),lastLeft||(lastLeft=t.scrollLeft),"top"===e&&n<lastTop&&t.dispatchEvent(createDOMEvent("ps-scroll-up")),"top"===e&&n>lastTop&&t.dispatchEvent(createDOMEvent("ps-scroll-down")),"left"===e&&n<lastLeft&&t.dispatchEvent(createDOMEvent("ps-scroll-left")),"left"===e&&n>lastLeft&&t.dispatchEvent(createDOMEvent("ps-scroll-right")),"top"===e&&(t.scrollTop=lastTop=n,t.dispatchEvent(createDOMEvent("ps-scroll-y"))),"left"===e&&(t.scrollLeft=lastLeft=n,t.dispatchEvent(createDOMEvent("ps-scroll-x")))};
},{"./instances":130}],133:[function(require,module,exports){
"use strict";var _=require("../lib/helper"),dom=require("../lib/dom"),instances=require("./instances"),updateGeometry=require("./update-geometry"),updateScroll=require("./update-scroll");module.exports=function(l){var r=instances.get(l);r&&(r.negativeScrollAdjustment=r.isNegativeScroll?l.scrollWidth-l.clientWidth:0,dom.css(r.scrollbarXRail,"display","block"),dom.css(r.scrollbarYRail,"display","block"),r.railXMarginWidth=_.toInt(dom.css(r.scrollbarXRail,"marginLeft"))+_.toInt(dom.css(r.scrollbarXRail,"marginRight")),r.railYMarginHeight=_.toInt(dom.css(r.scrollbarYRail,"marginTop"))+_.toInt(dom.css(r.scrollbarYRail,"marginBottom")),dom.css(r.scrollbarXRail,"display","none"),dom.css(r.scrollbarYRail,"display","none"),updateGeometry(l),updateScroll(l,"top",l.scrollTop),updateScroll(l,"left",l.scrollLeft),dom.css(r.scrollbarXRail,"display",""),dom.css(r.scrollbarYRail,"display",""))};
},{"../lib/dom":115,"../lib/helper":118,"./instances":130,"./update-geometry":131,"./update-scroll":132}],134:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!(function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}})();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],135:[function(require,module,exports){
"use strict";var randomString=require("../functions/func-random-string/random-string"),timeout=3e4;module.exports={getUserInfo:function(){return $.ajax({url:"/User/getUserInfo",type:"GET",data:{q:randomString()},dataType:"JSON",timeout:timeout})},getMsgCount:function(){return $.ajax({url:"//message.bilibili.com/api/notify/query.notify.count.do",type:"GET",data:{type:"jsonp",captcha:window.captcha_key,callback:"callback",ts:Date.now()},dataType:"JSONP",jsonp:"callback",timeout:timeout})},enterMyRoom:function(){return $.ajax({url:"/liveact/myroom",type:"POST",dataType:"JSON"})}};
},{"../functions/func-random-string/random-string":156}],136:[function(require,module,exports){
"use strict";function room(){$.ajaxPrefilter((function(i,e,t){var l=i.url;return l.match(/^\/\S.+/)?(i.url="//api.live.bilibili.com"+l,void setCredentials(i)):l.match(/^((http)?:\/\/)[\S]+\.(bilibili|hdslb).[\S]+/)?(i.url=l.replace("http://","//"),void setCredentials(i)):l.indexOf("api.live.bilibili.com")>-1?void setCredentials(i):void 0}))}function setCredentials(i){i.xhrFields?i.xhrFields.withCredentials=!0:i.xhrFields={withCredentials:!0},i.crossDomain=!0}module.exports={room:room};
},{}],137:[function(require,module,exports){
"use strict";var appInfo={name:"Bilibili Live",version:"V3.8.4-Haunra-Ikimasu",codeName:"450",author:["Felix","LancerComet"]},consoleShim={log:function(){},warn:function(){},error:function(){},info:function(){}};module.exports={appInfo:appInfo,appConfig:{xhrTimeout:3e4,longXhrTimeout:6e4,cdnURL:"//static.hdslb.com/live-static/",emojiList:require("../../config/conf.emoji-list"),chatGifts:[1,20,21]},consoleText:{info:appInfo.name+" Info: ",success:appInfo.name+" Success: ",caution:appInfo.name+" Caution: ",error:appInfo.name+" Error: "},eventNames:{harunaChangeModel:"Haruna:ChangeModel",harunaMotion:"Haruna:Motion",harunaSpeaking:"Haruna:Speaking",superGiftHaruna:"SuperGift:Haruna"},avalonConfig:function(){avalon.config({interpolate:["[[","]]"],debug:!1,loader:!1}),avalon.library("live"),require("../global-modules/avalon-directives/ms-cloak")(),require("../global-modules/avalon-directives/ms-model")()},globalConfig:function(e){e.consoleText=e.console||consoleShim,e.alertFunc=e.alert,e.USERBROWSER=require("../functions/func-explorer-detective/explorer-detective")()}};
},{"../../config/conf.emoji-list":174,"../functions/func-explorer-detective/explorer-detective":150,"../global-modules/avalon-directives/ms-cloak":163,"../global-modules/avalon-directives/ms-model":164}],138:[function(require,module,exports){
"use strict";var friendlyFormat=require("../functions/func-friendly-format/friendly-format");module.exports=function(){avalon.filters.tenThousand=function(n,r,t){return friendlyFormat.tenThousand(n)},avalon.filters.hunderdThousand=function(n,r,t){return friendlyFormat.hunderdThousand(n)},avalon.filters.viewerCount=function(n){return friendlyFormat.hunderdThousand(n)+" 人"},avalon.filters.length=function(n){return n.length},avalon.filters.danmuDensity=function(n){return n<=80?n:n<=85?100*(n-80):"弹幕超频"}};
},{"../functions/func-friendly-format/friendly-format":151}],139:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),CanvasHighlight=(function(){function e(t){(0,_classCallCheck3.default)(this,e),this.canvasDom=t.canvasDom,this.maskStyle=t.maskStyle||"rgba(0, 0, 0, 0.4)",this.zIndex=t.zIndex||100,this.isOneScreen=t.isOneScreen||!1,this.start()}return(0,_createClass3.default)(e,[{key:"start",value:function(){this.getCanvas(),this.bindResize(),this.isOneScreen&&this.bindScrollEvt()}},{key:"getCanvas",value:function(){var e=this.canvasDom;e||(e=document.createElement("canvas"),e.setAttribute("id","highlight-canvas"),e.style="position:fixed; z-index:"+this.zIndex+"; top:0; left:0;display:block;",document.body.appendChild(e)),e.style="position:fixed; z-index:"+this.zIndex+"; top:0; left:0;display:block;",this.canvasDom=e}},{key:"change",value:function(e){var t=this;setTimeout((function(){t.currentDrawingData=e,t.setCanvas(),t.drawing(e)}),250)}},{key:"drawing",value:function(e){var t=this,n=e.clipDom,i=e.isFix,o=e.isSetPosition,l=void 0,s=n;this.isArray(n)||(s=[n]),n&&(o?this.setPosition(s[0]):(document.documentElement.scrollTop=0,document.body.scrollTop=0),l=s.map((function(e){return e.getBoundingClientRect()})),l.forEach((function(e){t.clip(e)})),i&&this.fix(l))}},{key:"scrollToTop",value:function(){document.documentElement.scrollTop=0,document.body.scrollTop=0}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"getSize",value:function(){var e=this.isOneScreen?document.documentElement.clientWidth:document.documentElement.scrollWidth,t=this.isOneScreen?document.documentElement.clientHeight:document.documentElement.scrollHeight;return{width:e,height:t}}},{key:"setCanvas",value:function(){var e=this.getSize(),t=e.width,n=e.height,i=this.canvasDom.getContext("2d");this.canvasDom.setAttribute("width",t+"px"),this.canvasDom.setAttribute("height",n+"px"),i.clearRect(0,0,t,n),i.fillStyle=this.maskStyle,i.fillRect(0,0,t,n)}},{key:"clip",value:function(e){var t=this.canvasDom.getContext("2d"),n=e.width,i=e.height,o=e.left,l=e.top;t.clearRect(o,l,n,i)}},{key:"fix",value:function(e){var t={},n=e[0],i=e[1];t={top:n.top+n.height,left:i.left,width:n.width-(i.left-n.left),height:i.height+(i.top-n.height-n.top)},this.clip(t)}},{key:"setPosition",value:function(e){var t=e.getBoundingClientRect(),n=t.top,i=e.clientHeight,o=document.documentElement.scrollTop+document.body.scrollTop+(n-document.documentElement.clientHeight+i+40);document.documentElement.scrollTop=o,document.body.scrollTop=o}},{key:"forbidScroll",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}},{key:"preventDefaultForScrollKeys",value:function(e){var t={37:1,38:1,39:1,40:1};if(t[e.keyCode])return this.forbidScroll(e),!1}},{key:"bindScrollEvt",value:function(){window.addEventListener("DOMMouseScroll",this.forbidScroll,!1),window.addEventListener("mousewheel",this.forbidScroll,!1),document.body.style="overflow:hidden; margin-right:17px"}},{key:"unbindScrollEvt",value:function(){window.removeEventListener("DOMMouseScroll",this.forbidScroll),window.removeEventListener("mousewheel",this.forbidScroll),document.body.style="overflow:scroll; margin-right:0"}},{key:"bindResize",value:function(){var e=this,t=0,n=function(){clearTimeout(t),t=setTimeout((function(){document.body.scrollTop=0,e.change(e.currentDrawingData)}),200)};window.addEventListener("resize",n),this.unbindResize=function(){window.removeEventListener("resize",n)}}},{key:"close",value:function(){this.unbindScrollEvt(),this.unbindResize(),this.canvasDom.remove(),this.canvasDom=null}}]),e})();module.exports=function(e){var t=new CanvasHighlight(e);return t};
},{"babel-runtime/helpers/classCallCheck":15,"babel-runtime/helpers/createClass":16}],140:[function(require,module,exports){
"use strict";function cellphoneProviding(){livePopup({title:"您需要进行手机认证",html:"<div class='live-cellphone-providing'><div class='hint-img' role='img'></div><p class='text-center'>您需要先绑定手机后才可以开启直播喔！"+randomEmoji.happy()+"</p></div>",width:370,button:{confirm:"去绑定！",cancel:"取消"},onConfirm:function(){location.href="https://passport.bilibili.com/member/bindPhone?gourl=http://live.bilibili.com"},onCancel:function(){this.remove()}})}function roomExpired(){livePopup({title:"您需要进行实名认证",html:"<div class='live-room-expired'><div class='hint-img' role='img'></div><p class='text-center'>试用期已过，直播间被冻结，请完成实名认证后再次点击开播。</p><p class='text-center'>当您完成实名认证之后就可以再度开播啦！"+randomEmoji.happy()+"</p></div>",width:370,button:{confirm:"去认证！",cancel:"取消"},onConfirm:function(){location.href="https://account.bilibili.com/site/identification"},onCancel:function(){this.remove()}})}function timingHint(i){livePopup({title:"您的试用到期时间……",html:"<div class='live-room-timing-hint'><div class='hint-img' role='img'></div><p class='text-center'>您的直播间将在 "+i+" 时结束试用直播功能，还请留意 "+randomEmoji.happy()+"</p><p class='text-center'>当您完成实名认证之后就可以无限制直播啦！"+randomEmoji.happy()+"</p></div>",width:500,button:{confirm:"去认证！",cancel:"先用着啦~"},onConfirm:function(){window.open("https://account.bilibili.com/site/identification"),this.remove()},onCancel:function(){this.remove()}})}function trailClosed(){livePopup({title:"您需要进行实名认证",html:"<p>直播试用功能已关闭，完成实名认证后就可以继续开播啦~ "+randomEmoji.happy()+"</p>",width:400,button:{confirm:"去认证！",cancel:"取消 ~"},onConfirm:function(){window.open("https://account.bilibili.com/site/identification"),this.remove()},onCancel:function(){this.remove()}})}var livePopup=require("../live-widget/live-popup/live-popup"),randomEmoji=require("../../functions/func-random-emoji/random-emoji");module.exports={cellphoneProviding:cellphoneProviding,roomExpired:roomExpired,timingHint:timingHint,trailClosed:trailClosed};
},{"../../functions/func-random-emoji/random-emoji":155,"../live-widget/live-popup/live-popup":146}],141:[function(require,module,exports){
"use strict";var liveQuickLogin=require("../../functions/func-live-quick-login/live-quick-login"),liveToast=require("../live-widget/live-toast/live-toast");module.exports=function(){function e(){function e(e){return 0!=e.code?void liveToast(i[0],e.msg):(liveToast(i[0],"感谢您的反馈，我们会努力哒(∩_∩)","success"),void $((function(){$("#city,#operator,#ip,#remark").attr("value",""),$(".feedback").fadeOut()})))}function t(e){liveToast(i[0],"提交没有成功，要不然再重试一下？真的很对不起 > <")}var c={type:$("#type input:radio:checked").val(),num:$("#num input:radio:checked").val(),city:$("#city").val(),operator:$("#operator").val(),ip:$("#ip").val(),remark:$("#remark").val()};""==c.type||""==c.num||""==c.city||""==c.operator?liveToast(i[0],"请完成必填项~~"):$.ajax({url:"/feedback/submit",type:"POST",data:c,success:e,dataType:"JSON",error:t})}var i=$(".feedback-submit-btn");$((function(){$(".feedback-close-btn").on("click",(function(){$(".feedback").fadeOut()})),$("#remark").on("click",(function(){$(this).css("color","#fefefe")})),i.on("click",e)})),window.feedBackShow=function(){liveQuickLogin(),$(".feedback").fadeIn()}};
},{"../../functions/func-live-quick-login/live-quick-login":154,"../live-widget/live-toast/live-toast":147}],142:[function(require,module,exports){
"use strict";function delay(t,i){var u=Array.prototype.slice.call(arguments,2);return setTimeout((function(){return t.apply(null,u)}),i)}var liveQuickLogin=require("../../functions/func-live-quick-login/live-quick-login"),liveToast=require("../live-widget/live-toast/live-toast");module.exports=function(){var t=avalon.define({$id:"signUpPopupCtrl",popupStatus1:!1,popupStatus2:!1,signUpStatus:0,signInData:{}});t.$watch("toggleSignUpPopup",(function(i){liveQuickLogin(),avalon.vmodels.roomSidebarLeftCtrl.roomSidebarLeftStatus?(t.popupStatus1=i,t.popupStatus2=!1):(t.popupStatus1=!1,t.popupStatus2=i)})),t.$watch("updateSignInfo",(function(i){t.signUpStatus=i.status,t.signInData=i,t.signInData.signUpStatus=i.status})),t.$watch("changeSignStatus",(function(){t.signUpStatus=1}))};
},{"../../functions/func-live-quick-login/live-quick-login":154,"../live-widget/live-toast/live-toast":147}],143:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/top-user-panel")(),require("./javascripts/top-navigator")()};
},{"./javascripts/top-navigator":144,"./javascripts/top-user-panel":145}],144:[function(require,module,exports){
"use strict";function seqAnimationEvent(){function e(){a.show(),o.seqIn()}function n(){a.fadeOut(200,(function(){o.reset()}))}var i=[];$(".live-top-nav-panel").find(".nav-item").each((function(){i.push($(this)[0])}));var o=new SeqAnimation(i,"inline-block",40),t=$(".nav-link-item.area-navigator"),a=$(".live-top-nav").find(".live-top-nav-panel");t.mouseenter(e).mouseleave(n)}function searchModule(){function e(e){l.show();var n=e.val().replace(/[^\x00-\xff]/g,"aa").length;n<1?(s="帅的人写了内容，丑的人还在尝试"+randomEmoji.helpless(),o=0):n>50?(s="关键词不能超过25个汉字。",o=-1):(o=1,l.hide())}function n(){var e=$(".download-link",t),n=$(".hover-panel",e),i=$("[data-type='bilibiliAPP']",e),o=$("[data-type='liveHimeIOS']",e),a=0;e.mouseenter((function(){clearTimeout(a),n.show()})).mouseleave((function(){a=setTimeout((function(){n.hide()}),200)})),$(".live-hime-ios,[data-type='liveHimeIOS']").mouseenter((function(){clearTimeout(a),o.show().siblings(".qr-code").hide()})).mouseleave((function(){a=setTimeout((function(){o.hide()}),200)})),$(".bilibili-app,[data-type='bilibiliAPP']").mouseenter((function(){clearTimeout(a),i.show().siblings(".qr-code").hide()})).mouseleave((function(){a=setTimeout((function(){i.hide()}),200)}))}function i(e){liveToast($(".search-bar-ctnr"),s,"info")}var o,t=$(".live-top-nav"),a=$("#top-nav-search"),u=a[0],l=$(".top-nav-search-checklen"),s="";a.on("input",(function(n){e($(this))})),l.on("click",(function(e){i(e.target)})),$(window).on("keydown",(function(e){13===e.keyCode&&e.target===u&&1!==o&&(e.preventDefault(),i(e.target))})),n(),e(a)}var liveToast=require("../../../components/live-widget/live-toast/live-toast"),SeqAnimation=require("../../../functions/seq-animation"),randomEmoji=require("../../../functions/func-random-emoji/random-emoji");module.exports=function(){seqAnimationEvent(),searchModule()};
},{"../../../components/live-widget/live-toast/live-toast":147,"../../../functions/func-random-emoji/random-emoji":155,"../../../functions/seq-animation":161}],145:[function(require,module,exports){
"use strict";var appConfig=require("../../../app-config/app-config"),apis=require("../../../apis"),isLogin=require("../../../functions/is-login"),quickLogin=require("../../../functions/func-live-quick-login/live-quick-login"),livePopup=require("../../live-widget/live-popup/live-popup"),liveCertificationHint=require("../../live-certification-hint/live-certification-hint"),SeqAnimation=require("../../../functions/seq-animation");module.exports=function(){function e(e){o.levelPanel.allowCtrl=!0,o.levelPanel.onhover=!1,o.userPanel.visibility=e}var i={msgCheckInterval:3e5},n={allowCtrl:!0,visibility:!1,mouseLeaveTimeout:null,unreadMsg:!1,unreadMsgCount:0,showProgress:!0,msgClick:function(){$(window).on("focus",(function(){o.$fire("topNavMessageRefresh"),$(window).off("focus")}))},vipIconClick:function(){$(window).on("focus",(function(){o.$fire("topNavUserPanelDataRequest"),$(window).off("focus")}))},mouseEnter:function(){o.userPanel.allowCtrl&&o.$fire("topNavUserPanelDataRequest",{callback:function(){o.$fire("topNavUserPanelIn")}})},mouseLeave:function(){o.$fire("topNavUserPanelOut")}},a=null;!(function(){var e=$("#top-nav-user-panel"),i=[];e.find(".section-block").each((function(){i.push($(this)[0])})),a=new SeqAnimation(i,"block")})();var o=avalon.define({$id:"liveTopNavCtrl",userPanel:n,panelData:{username:"神秘用户 (=・ω・=)",avatar:"",isVip:0,isSVip:0,vipIconLink:"//link.bilibili.com/p/center/index",userLevel:{current:"UL.--",next:"UL.--",progress:"0%",progressData:0},ranking:"--",restExperience:"--",seeds:{gold:"--",silver:"--",achieve:"--"}},clearAvatar:function(){$.removeCookie("user_face",{path:"/",domain:".bilibili.com"})},topNavOpacity:{enable:function(){o.$fire("topNavOpacity",!0)},disable:function(){o.$fire("topNavOpacity",!1)},status:!0},levelPanel:{onhover:!1,allowCtrl:!0,mouseLeaveTimeout:null,restoreTimeout:null,mouseEnter:function(){o.levelPanel.allowCtrl&&(o.levelPanel.allowCtrl=!1,clearTimeout(o.levelPanel.mouseLeaveTimeout),clearTimeout(o.levelPanel.restoreTimeout),o.levelPanel.onhover=!0,o.levelPanel.restoreTimeout=setTimeout((function(){o.levelPanel.allowCtrl=!0}),500))},mouseLeave:function(){o.levelPanel.allowCtrl&&(clearTimeout(o.levelPanel.mouseLeaveTimeout),clearTimeout(o.levelPanel.restoreTimeout),o.levelPanel.mouseLeaveTimeout=setTimeout((function(){o.levelPanel.allowCtrl=!1,o.levelPanel.onhover=!1,o.levelPanel.restoreTimeout=setTimeout((function(){o.levelPanel.allowCtrl=!0}),500)}),300))}},liveLogin:function(){quickLogin()},iframeObj:{$blackLayer:$('<div class="black-layer" style="z-index: 99"></div>'),$newlive:$('<div class="new-live-layer" style="z-index: 100"><iframe name="contentFrame" id="g_iframe" width="100%" height="100%" scrolling="no" frameborder="0" allowtransparency="true" style="background-color:transparent;position: absolute;top:0;border:solid 1px #aaaaaa;border-radius: 10px" src="/room/apply"></iframe></div>'),iframeExist:!1},enterMyRoom:function(){quickLogin(),apis.enterMyRoom().done((function(e){if(e.code==-800)return void liveCertificationHint.cellphoneProviding();if(0!=e.code)livePopup({title:"进入直播间错误",html:"<p>非常抱歉，进入直播间出现错误，还请您稍后再试 > <</p><p>如果您频繁出现此问题，请截图并联系客服进行反馈，在此对您造成的不便我们表示真诚的歉意... (´；ω；`)</p><p></p><p>错误原因："+(e.msg||"未知错误")+"</p>",width:500});else{if(e.data)return void(location.href="/"+e.data);if(!o.iframeObj.iframeExist){var i=$("body");i.append(o.iframeObj.$blackLayer).append(o.iframeObj.$newlive),o.iframeObj.iframeExist=!0}}})).fail((function(e){livePopup({title:"进入直播间失败",html:"<p>非常抱歉，进入直播间出现错误，还请您稍后再试 > <</p><p>出现此问题可能是您的网络情况不稳定，或是<del style='color: #ccc'>土豆</del>服务器暂时宕机，可稍后尝试。如果频繁出现此提示，请等待一段时间或联系客服，在此对您造成的不便我们表示真诚的歉意... (´；ω；`)</p><p></p><p>错误原因："+e.status+" - "+e.statusText+"</p>",width:500})}))},loadFinished:!1,logined:!1}),t=o.panelData;window.offLayer=function(){o.iframeObj.$blackLayer.remove(),o.iframeObj.$newlive.remove(),o.iframeObj.iframeExist=!1},$(document).on("click",".new-live-layer .off-button",window.offLayer),o.$watch("topNavUserPanelIn",(function(){e(!0),o.topNavOpacity.disable(),a.seqIn()})),o.$watch("topNavUserPanelOut",(function(){e(!1),o.topNavOpacity.enable(),a.reset()}));var r=!0;o.$watch("topNavUserPanelDataRequest",(function(e){function i(e){e&&"[object Object]"===Object.prototype.toString.call(e)||consoleText.log(appConfig.consoleText.error+'在调用顶栏的 "dataBinding" 时必须提供有效的数据对象.'),e.user_intimacy?e.user_intimacy=parseInt(e.user_intimacy,10):void 0,e.user_next_intimacy?e.user_next_intimacy=parseInt(e.user_next_intimacy,10):void 0,isNaN(e.user_intimacy)||isNaN(e.user_next_intimacy)?consoleText.log(appConfig.consoleText.error+"顶部面板回传用户经验信息为非数字类型, 需要为数字类型."):(t.restExperience=e.user_next_intimacy-e.user_intimacy,t.userLevel.progressData=e.user_intimacy/e.user_next_intimacy*100,t.userLevel.progress=e.user_intimacy/e.user_next_intimacy*100+"%"),t.username=e.uname,t.avatar="url("+e.face+")",t.seeds.gold=e.gold,t.seeds.silver=e.silver,t.seeds.achieve=e.achieve,t.userLevel.current="UL."+e.user_level,t.userLevel.next="UL."+e.user_next_level,t.ranking=e.user_level_rank,t.isVip=parseInt(e.vip,10),t.isSVip=parseInt(e.svip,10),parseInt(e.vip,10)>0||parseInt(e.svip,10)>0?t.vipIconLink="//link.bilibili.com/p/center/index":t.vipIconLink="//link.bilibili.com/p/center/index#/user-center/my-info/operation?vip=true"}if(e&&"force"===e.mode&&(r=!0),isLogin())return r?void (function(){apis.getUserInfo().done((function(n){return"REPONSE_OK"===n.code?(i(n.data),o.userPanel.showProgress=!1,e.callback&&e.callback(),r=!1,!0):void consoleText.log(appConfig.consoleText.error+"顶栏用户信息面板数据获取失败: "+n.msg)})).fail((function(i){consoleText.log(appConfig.consoleText.error+"顶栏用户信息面板数据获取失败: 无有效通信建立."),o.userPanel.showProgress=!1,e.callback&&e.callback()}))})():void(e&&e.callback&&e.callback())})),(function(){function e(){if(isLogin()){var e=$.cookie("user_face");e?t.avatar="url("+e+")":apis.getUserInfo().done((function(e){"REPONSE_OK"==e.code&&(t.avatar="url("+e.data.face+")")})).fail((function(){}))}}$(e),o.$watch("topNavUserPanelAvatar",(function(i){e()}))})(),(function(){function e(){n.xhr(),n.check()}var n=(appConfig.consoleText.error+"消息信息获取失败，等待 30 秒后重试... (/= _ =)/~┴┴",{checkInterval:null,xhr:function(e){e=e||"normal",isLogin()&&apis.getMsgCount().done((function(e){if(0==e.code){var i=parseInt(e.data.reply_me,10),a=parseInt(e.data.chat_me,10),o=parseInt(e.data.praise_me,10),t=parseInt(e.data.notify_me,10),r=parseInt(e.data.at_me,10);if(i>0||o>0||t>0||r>0||a>0){var l=i+o+t+r+a;n.weHaveUnreadMsg(l)}else n.clearUnread()}})).fail((function(e){}))},check:function(){n.checkInterval=setInterval(n.xhr,i.msgCheckInterval)},weHaveUnreadMsg:function(e){e=parseInt(e,10),e>99?e="99+":void 0,o.userPanel.unreadMsg=!0,o.userPanel.unreadMsgCount=e},clearUnread:function(){o.userPanel.unreadMsg=!1,o.userPanel.unreadMsgCount=0}});$(window).on("load",e),o.$watch("topNavMessageRefresh",(function(e){"dev"===e?n.xhr("dev"):n.xhr()}))})(),o.$watch("topNavOpacity",(function(e){"boolean"!=typeof e&&consoleText.log(appConfig.consoleText.error+'在 $fire 服务 "topNavOpacity" 时必须传入 boolean.'),e?o.topNavOpacity.status=!0:o.topNavOpacity.status=!1})),o.$watch("fillCurrency",(function(e){null!==e.gold&&void 0!==e.gold&&(t.seeds.gold=e.gold),null!==e.silver&&void 0!==e.silver&&(t.seeds.silver=e.silver)})),o.$watch("enterMyRoom",o.enterMyRoom),avalon.ready((function(){o.loadFinished=!0})),setTimeout((function(){var e=isLogin();switch(e){case!0:o.logined=!0;break;case"First Login":o.$fire("topNavUserPanelDataRequest",{mode:"force",callback:function(){e&&(o.logined=!0)}})}}),1)};
},{"../../../apis":135,"../../../app-config/app-config":137,"../../../functions/func-live-quick-login/live-quick-login":154,"../../../functions/is-login":160,"../../../functions/seq-animation":161,"../../live-certification-hint/live-certification-hint":140,"../../live-widget/live-popup/live-popup":146}],146:[function(require,module,exports){
"use strict";function popupHide(e,t){var n=e.popup;$(n).addClass("hide").attr("aria-hidden",!0),setTimeout((function(){$(n).hide(),t&&t()}),380)}var appConfig=require("../../../app-config/app-config"),randomEmoji=require("../../../functions/func-random-emoji/random-emoji"),LivePopup=function e(t){if(!(this instanceof e))return new e(t);var n=this;if(!t)throw new Error(appConfig.consoleText.error+"在使用 Live Popup 时必须指定参数.");var o=document.createDocumentFragment(),i=document.createElement("div");i.className="live-popup-panel popup-module "+(t.className||""),0===$(".body-popup-mask").length&&this.addMask();var p=document.createElement("div");p.className="panel-content ",i.appendChild(p),(function(){t.isNoTitle&&(t.title=!1),t.title=t.title?t.title.toString():"",t.centerTitle=!!t.centerTitle&&t.centerTitle;var e=document.createElement("div");t.centerTitle?e.className="popup-title-container text-center":e.className="popup-title-container",e.innerHTML='<h2 class="popup-title">'+t.title+"</h2>",p.appendChild(e)})(),(function(){var e=document.createElement("div");e.className="popup-content-container",t.html?e.innerHTML=t.html:(t.content=t.content||"某个程序员没有给这个弹窗写内容~ "+randomEmoji.helpless(),e.innerHTML="<p>"+t.content+"</p>"),p.appendChild(e)})(),(function(){if(t.button!==!1){if(t.type=(t.type||"action").toLowerCase(),"alert"!==t.type&&"action"!==t.type&&"info"!==t.type&&"custom"!==t.type)throw new Error(appConfig.consoleText.error+"Live Popup 的类型仅为 Action 与 Alert 与 Info.");var e=document.createElement("div");e.className="popup-button-container",t.button=t.button?t.button:{confirm:"确认",cancel:"取消"};var o=document.createElement("button");if(o.className="popup-button confirm",o.innerHTML=t.button.confirm||"确认",o.setAttribute("aria-label","点击确认"),t.onConfirm&&$.isFunction(t.onConfirm)?n.onConfirm=t.onConfirm:n.onConfirm=n.close,$(o).on("click",(function(){n.confirm()})),e.appendChild(o),n.confirmBtn=o,"action"===t.type){var a=document.createElement("button");a.innerHTML=t.button.cancel||"取消",a.className="popup-button cancel close-btn",a.setAttribute("aria-label","点击取消"),$(a).on("click",(function(){n.close()})),e.appendChild(a),n.cancelBtn=a}if("alert"===t.type&&(i.className="live-popup-panel alert"),"custom"===t.type){var c=document.createElement("button");c.innerHTML=t.button.custom.text||"取消",c.className="popup-button custom "+t.button.custom.className,e.appendChild(c)}p.appendChild(e)}if(t.onCancel&&$.isFunction(t.onCancel)&&(n.onCancel=t.onCancel),t.noCloseButton!==!0){var r=document.createElement("div");r.className="close-btn right-top",r.setAttribute("role","button"),r.setAttribute("aria-label","点击关闭面板."),r.setAttribute("title","关闭面板 "+randomEmoji.helpless()),$(r).on("click",(function(){n.close()})),p.appendChild(r)}})(),t.width&&$(p).css({width:t.width}),o.appendChild(i),document.body.appendChild(o),this.open(),t.silent&&$(i).hide(),this.popup=i,t.initFunc&&$.isFunction(t.initFunc)&&(this.initFunc=t.initFunc.bind(this),setTimeout((function(){n.initFunc()}),1))};LivePopup.prototype.open=function(){var e=this;$(window).on("keyup",(function t(n){e.keyupEvent=t,27===n.keyCode&&e.allowEnterKey&&e.close()})),$(this.popup).show().removeClass("hide").attr("aria-hidden",!1),setTimeout((function(){e.allowEnterKey=!0}),300),this.showMask()},LivePopup.prototype.close=function(e){var t=this;$.isFunction(this.onCancel)&&setTimeout(t.onCancel.bind(this),0),popupHide(t,e),$(window).off("keyup",this.keyupEvent),this.allowEnterKey=!1,$(".body-container").removeClass("blur"),this.removeMask()},LivePopup.prototype.confirm=function(){this.onConfirm&&$.isFunction(this.onConfirm)&&this.onConfirm.call(this)},LivePopup.prototype.remove=function(){var e=this.popup;popupHide(this,(function(){$(e).remove(),e=null})),this.removeMask()},LivePopup.prototype.done=function(){this.close()},LivePopup.prototype.addMask=function(){var e=document.createElement("div");e.className="body-popup-mask",$("body").append(e)},LivePopup.prototype.removeMask=function(){!$(".popup-module:not(.hide)").length&&$(".body-popup-mask").remove()},LivePopup.prototype.showMask=function(){var e=$(".body-popup-mask");e.length>0?e.show():(this.addMask(),$(".body-popup-mask").show())},module.exports=LivePopup;
},{"../../../app-config/app-config":137,"../../../functions/func-random-emoji/random-emoji":155}],147:[function(require,module,exports){
"use strict";var appConfig=require("../../../app-config/app-config"),typeAdjust=require("../../../functions/type-adjust"),randomEmoji=require("../../../functions/func-random-emoji/random-emoji"),LiveToast=function(e,t,o){"boolean"==typeof o&&(o="info");var n=document.createDocumentFragment(),s=document.createElement("div");if(o=o||"info","success"!==o&&"caution"!==o&&"error"!==o&&"info"!==o)throw new Error(appConfig.consoleText.error+"在使用 Live Toast 时必须指定正确的类型: success || caution || error || info");s.innerHTML="<i class='toast-icon "+o+"'></i><span class='toast-text'>"+t+"</span>"||"<i class='toast-icon info'></i><span class='toast-text'>某个程序员没有写入内容~ </span>"+randomEmoji(),s.className="live-toast "+o;var i=null;switch(typeAdjust(e)){case"HTML Element":i=e;break;case"jQuery Object":i=e[0];break;default:throw new Error(appConfig.consoleText.error+"在使用 Live Toast 时请传入正确的原生 Dom 对象或节点的 jQuery 对象.")}var c=i.getBoundingClientRect(),r=c.left,a=c.top,u=c.width,l=c.height,d=document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft;s.style.left=r+u+d+"px";var m=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop;s.style.top=a+l+m+"px",setTimeout((function(){s.className+=" out",setTimeout((function(){s.parentNode.removeChild(s)}),380)}),2e3),n.appendChild(s),document.body.appendChild(n);var p=document.body.offsetWidth,f=s.getBoundingClientRect().left,v=s.offsetWidth;p-v-f<0&&(s.style.left=p-v-10+d+"px")};module.exports=LiveToast;
},{"../../../app-config/app-config":137,"../../../functions/func-random-emoji/random-emoji":155,"../../../functions/type-adjust":162}],148:[function(require,module,exports){
"use strict";var events=[],requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,startTime=Date.now();module.exports=function(e,n,t){events.push((function(){null===e&&null===vmode?avalon.scan():avalon.scan(e,n),t&&t()}))},(function e(){Date.now()-startTime>6e4&&events.length<1||(events.length&&events.shift()(),requestAnimationFrame?requestAnimationFrame(e):setTimeout(e,60))})();
},{}],149:[function(require,module,exports){
"use strict";var appConfig=require("../../app-config/app-config"),typeAdjust=require("../type-adjust"),CountDown=function e(t){if(!(this instanceof e))return new e(t);var n=new Date,o=t.endTime;if(!o||!(o instanceof Date)||o.getTime()<=n.getTime())return void consoleText.log(appConfig.consoleText.error+"倒计时时间设置错误.");var r=setInterval((function(){var e=o.getTime()-n.getTime(),a=Math.floor(e/60/1e3),i=e-60*a*1e3,c=Math.floor(i/1e3);a=a<10?"0"+a:a,c=c<10?"0"+c:c;var l=a+":"+c;return"jQuery Object"===typeAdjust(t.element)?t.element.html(l):t.element.innerHTML=l,"00"==a&&"00"==c?(clearInterval(r),void(t.callback&&t.callback())):void o.setSeconds(o.getSeconds()-1)}),1e3);this.countDown=r};CountDown.prototype.clearCountdown=function(){clearInterval(this.countDown)},module.exports=CountDown;
},{"../../app-config/app-config":137,"../type-adjust":162}],150:[function(require,module,exports){
"use strict";function explorerDetective(){var e=window.navigator.userAgent,r={myBrowser:"unknown",database:[{type:"IE Legacy",regExp:"MSIE [1-6].*"},{type:"IE 7",regExp:"MSIE [7].*"},{type:"IE 8",regExp:"MSIE [8].*"},{type:"IE 9",regExp:"MSIE [9].*"},{type:"IE 10",regExp:"MSIE [10].*"},{type:"IE 11",regExp:"Trident/[7].*.rv:11"},{type:"Firefox",regExp:"Firefox/[0-9].*"},{type:"Safari",regExp:"AppleWebKit/[0-9].*.Safari/[0-9]"},{type:"Chrome",regExp:"AppleWebKit/[0-9].*.Chrome/[0-9].*.Safari/[0-9]"},{type:"Opera Presto",regExp:"Opera.[0-9].*.Presto/[0-9]"},{type:"Opera Modern",regExp:"OPR/[0-9][0-9]"},{type:"Edge",regExp:"Edge/[0-9].*"},{type:"Maxthon 4",regExp:"Maxthon/[4]"}]};return (function(){for(var p=0,t=r.database.length;p<t;p++){var a=new RegExp(r.database[p].regExp);e.match(a)&&(r.myBrowser=r.database[p].type)}})(),r.myBrowser}module.exports=explorerDetective;
},{}],151:[function(require,module,exports){
"use strict";function tenThousandFriendlyFormat(n){return parseInt(n,10)<1e4?n:friendlyFormat(n)}function oneHundredThousandFormat(n){return parseInt(n,10)<1e5?n:friendlyFormat(n)}function friendlyFormat(n){if(!n)return n;if(isNaN(parseInt(n,10)))return n;if(n=n.toString(),n.indexOf("万")>-1){var r=parseFloat(n.substr(0,n.indexOf("万")));if(r<10)return n;var e=r.toFixed(1);return e+"万"}return 0<=n.indexOf("万")||0<=n.indexOf(",")?void 0:((n=parseInt(n))?1e4<=n&&(n=(n/1e4).toFixed(1)+"万"):n="--",n)}module.exports={tenThousand:tenThousandFriendlyFormat,hunderdThousand:oneHundredThousandFormat};
},{}],152:[function(require,module,exports){
"use strict";function getLeft(t){var e=t.offsetLeft;return null!==t.offsetParent?e+=getLeft(t.offsetParent):void 0,e}function getTop(t){var e=t.offsetTop;return null!==t.offsetParent?e+=getTop(t.offsetParent):void 0,e}var typeAdjust=require("../type-adjust");module.exports=function(t){return t="jQuery Object"===typeAdjust(t)?t[0]:t,{left:getLeft(t),top:getTop(t)}};
},{"../type-adjust":162}],153:[function(require,module,exports){
"use strict";function hashWatcher(h,a){hashRegisted[h]?void 0:hashRegisted[h]=a}function hashCheck(){var h=location.hash.substr(1,location.hash.length);try{hashRegisted[h]&&hashRegisted[h]()}catch(h){throw new Error("[Error] Hash Watcher: "+h)}}var hashRegisted={};window.addEventListener("hashchange",hashCheck),module.exports={hashWatcher:hashWatcher,init:hashCheck};
},{}],154:[function(require,module,exports){
"use strict";function login(){throw window.biliQuickLogin?(window.biliQuickLogin((function(){window.location.reload()})),"Bilibili Live: 您没登陆，想干撒子？~~ -_-"):"Bilibili Live: 快速登录脚本未正确载入."}var isLogin=require("../is-login");module.exports=function(){var i=isLogin();if(i===!1||"First Login"===i)try{window.biliQuickLogin?login():$.getScript("https://static-s.bilibili.com/account/bili_quick_login.js",(function(i,o){"success"===o&&login()}))}catch(i){throw new Error(i)}};
},{"../is-login":160}],155:[function(require,module,exports){
"use strict";var emojiPool={happy:["(｀･ω･´)","=‿=✧","●ω●","(/ ▽ \\)","(=・ω・=)","(●'◡'●)ﾉ♥","<(▰˘◡˘▰)>","(⁄ ⁄•⁄ω⁄•⁄ ⁄)","(ง,,• ᴗ •,,)ง ✧"],shock:[",,Ծ‸Ծ,,","(｀･д･´)","Σ( ° △ °|||)︴","┌( ಠ_ಠ)┘","(ﾟДﾟ≡ﾟдﾟ)!?"],sad:["∑(っ °Д °;)っ","＞︿＜","＞△＜","●︿●","(´；ω；`)"],helpless:["◐▽◑","ʅ（´◔౪◔）ʃ","_(:3 」∠)_","_(┐「ε:)_","(/・ω・＼)","(°▽°)ﾉ"]};module.exports={happy:function(){return emojiPool.happy[Math.floor(Math.random()*emojiPool.happy.length)]},sad:function(){return emojiPool.sad[Math.floor(Math.random()*emojiPool.sad.length)]},shock:function(){return emojiPool.shock[Math.floor(Math.random()*emojiPool.shock.length)]},helpless:function(){return emojiPool.helpless[Math.floor(Math.random()*emojiPool.helpless.length)]}};
},{}],156:[function(require,module,exports){
"use strict";module.exports=function(){return(Date.now()*Math.ceil(1e5*Math.random())).toString(16)};
},{}],157:[function(require,module,exports){
"use strict";function avalonSetNum(newNumber,oldNumber,avalonProp){function _clearNumTimer(){clearInterval(numTimer),numTimer=null}var numTimer=null;if("[object String]"!==Object.prototype.toString.call(newNumber)&&"[object Number]"!==Object.prototype.toString.call(newNumber))throw new Error('Function "avalonSetNum" Error: 在使用 avalonSetNum() 时请使用数字作为参数.');var currentNum=parseInt(oldNumber,10),newNum=parseInt(newNumber,10);if(!isNaN(currentNum)&&!isNaN(newNum)&&isFinite(currentNum)&&isFinite(newNum)){var deltaNum=newNum-currentNum;if(Math.abs(deltaNum)<=10)return void eval("avalon.vmodels."+avalonProp+" = "+newNumber);var execTime=Math.abs(Math.floor(deltaNum/1e4));execTime>100&&(execTime=100);var deltaPerTime=deltaNum/execTime,addCount=0;numTimer=setInterval((function(){return addCount++>=execTime?(numTimer&&_clearNumTimer(),void eval("avalon.vmodels."+avalonProp+" = "+newNum)):void eval("avalon.vmodels."+avalonProp+" = "+parseInt(currentNum+deltaPerTime*addCount,10))}),10)}}module.exports=avalonSetNum;
},{}],158:[function(require,module,exports){
"use strict";function setNum(t,r){function e(t,r){if(Object.prototype.toString.call(t).indexOf("Element")>-1)t.innerHTML=r;else{if("[object Object]"!==Object.prototype.toString.call(t))throw new Error('Function "_setHTML" in "setNum" Error: 请指定一个正确的节点.');window.navigator.userAgent.indexOf("MSIE 8.0")>-1&&window.navigator.userAgent.indexOf("Trident/4.0")>-1?t.innerHTML=r:t.html(r)}}function n(t){if(Object.prototype.toString.call(t).indexOf("Element")>-1)return t.innerHTML;if("[object Object]"===Object.prototype.toString.call(t))return window.navigator.userAgent.indexOf("MSIE 8.0")>-1&&window.navigator.userAgent.indexOf("Trident/4.0")>-1?t.innerHTML:t.html();throw new Error('Function "_getHTML" in "setNum" Error: 请指定一个正确的节点.')}function i(){clearInterval(r.numTimer),r.numTimer=null}if("[object String]"!==Object.prototype.toString.call(t)&&"[object Number]"!==Object.prototype.toString.call(t))throw new Error('Function "setNum" Error: 在使用 setNum() 时请使用数字作为参数.');var o=parseInt(n(r),10),u=parseInt(t,10);if(isNaN(o)||isNaN(u))return void (function(){var t='Function "setNum" Error: 当前节点中的内容或传入数字无法格式化为有效数字, 方法退出.';console.error,void 0,t=null})();if(!isFinite(o)||!isFinite(u))return void (function(){var t='Function "setNum" Error: 当前节点中的内容或传入数字过于庞大, 方法退出.';console.error,void 0,t=null})();!(function(){if(Object.prototype.toString.call(r).indexOf("Element")>-1)r.setAttribute("data-real-number",u);else{if("[object Object]"!==Object.prototype.toString.call(r))throw new Error('Function "setRealNumber" in "setNum" Error: 请指定一个正确的节点.');window.navigator.userAgent.indexOf("MSIE 8.0")>-1&&window.navigator.userAgent.indexOf("Trident/4.0")>-1?r.setAttribute("data-real-number",u):r.attr("data-real-number",u)}})();var a=u-o;if(Math.abs(a)<=10)return void e(r,u);var c=Math.abs(Math.floor(a/5));c>100&&(c=100);var l=a/c,s=0;r.numTimer&&i(),r.numTimer=setInterval((function(){return s++>=c?(e(r,u),r.numTimer?i():void 0,u):void e(r,parseInt(o+l*s,10))}),10)}module.exports=setNum;
},{}],159:[function(require,module,exports){
"use strict";function timestampShorter(t){return parseInt(t.toString().slice(0,-3),10)}module.exports=timestampShorter;
},{}],160:[function(require,module,exports){
"use strict";var DedeUserID="DedeUserID",LIVE_LOGIN_DATA="LIVE_LOGIN_DATA";module.exports=function(){return $.cookie(DedeUserID)&&!$.cookie(LIVE_LOGIN_DATA)?"First Login":!(!$.cookie(DedeUserID)||!$.cookie(LIVE_LOGIN_DATA))};
},{}],161:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function SeqAnimation(e,i,t){this.elements=e,this.seqTiming=0,this.seqInTimeouts=[],this.displayMode=i,this.deltaTiming=t||80}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);require("es6-promise").polyfill(),SeqAnimation.prototype={seqIn:function(){var e=this,i=this;return new _promise2.default(function(t){e.reset(),e.seqInTimeouts.forEach((function(e){return clearTimeout(e)})),e.elements.forEach((function(e,t){i.seqInTimeouts[t]=setTimeout((function(){e.style.display=i.displayMode}),i.seqTiming),i.seqTiming+=i.deltaTiming})),setTimeout(t,e.deltaTiming*e.elements.length)})},reset:function(){this.elements.forEach((function(e){e.style.display="none"})),this.seqTiming=0}},module.exports=SeqAnimation;
},{"babel-runtime/core-js/promise":12,"es6-promise":108}],162:[function(require,module,exports){
"use strict";module.exports=function(t){var e=/HTML.*.Element/,c=Object.prototype.toString.call(t);return"[object Object]"===c&&t.jquery?"jQuery Object":c.match(e)?"HTML Element":"[object HTMLCollection]"===c?"HTML Elements Collection":(c=c.match(/\w+]/)[0],c.substring(0,c.length-1))};
},{}],163:[function(require,module,exports){
"use strict";module.exports=function(){avalon.directive("cloak",{priority:1})};
},{}],164:[function(require,module,exports){
"use strict";module.exports=function(){function textInput(binding){var thisElement=binding.element,directiveValue=binding.expr,imeIgnored=!1;setTimeout((function(){thisElement.value=void 0!==binding.oldValue?binding.oldValue:""}),1);var inputEvent=function inputEvent(event){imeIgnored||eval("binding.vmodels[0]."+directiveValue+" = thisElement.value;")};return function(){avalon.bind(thisElement,"compositionstart",(function(){imeIgnored=!0})),avalon.bind(thisElement,"compositionend",(function(){imeIgnored=!1,inputEvent()})),avalon.bind(thisElement,"input",inputEvent,!1),window.ScriptEngine&&window.ScriptEngine()&&(navigator.appVersion.indexOf("MSIE 9.0")>-1&&avalon.bind(thisElement,"cut",(function(){setTimeout(inputEvent,1)})),avalon.bind(thisElement,"keyup",(function(n){n=n||window.event,17===n.keyCode||18===n.keyCode||n.ctrlKey||n.shiftKey||n.altKey||inputEvent()})))}}avalon.directive("model",{init:function(n){var e=n.element;switch(e.type){case"check":break;case"radio":break;default:textInput(n)()}},update:function(n,e){this.element.value=n}})};
},{}],165:[function(require,module,exports){
"use strict";module.exports=function(){Number.prototype.toFixed1=function(){return parseFloat(this.toString().replace(/(\.\d{1})\d+$/,"$1"))}};
},{}],166:[function(require,module,exports){
"use strict";var appConfig=require("../app-config/app-config");module.exports=function(){window.console&&(consoleText.log(appConfig.appInfo.name+" "+appConfig.appInfo.version+" Lovingly By © "+(new Date).getFullYear()+" - "+((new Date).getFullYear()+1)+" Bilibili Live Department  ...(●'◡'●)ﾉ♥   # Renascence #\n"),consoleText.log("Version: "+appConfig.appInfo.version+", CodeName: "+appConfig.appInfo.codeName+".\n\n\n"))};
},{"../app-config/app-config":137}],167:[function(require,module,exports){
"use strict";module.exports=function(e){require("es6-promise").polyfill(),require("./es5-shim/shim-number-tofixed1")(),require("./jquery-plugin/jquery-cookie")(e),require("./jquery-plugin/jquery-selector-cache")(e.jQuery),require("./jquery-plugin/jquery-load-css")(e.jQuery),require("./func-greeting")(),e._loadDebugger=function(){return require("browserify-require-async/loader")(require,{urlRoot:"//static.hdslb.com/live-static/live-room/chunks/",rethrowError:!1})([{name:"./func-live-track-events",hash:"db0fd190f4",url:"fa768cfdd1.js",__requireAsync:!0}]),!0}};
},{"./es5-shim/shim-number-tofixed1":165,"./func-greeting":166,"./jquery-plugin/jquery-cookie":168,"./jquery-plugin/jquery-load-css":169,"./jquery-plugin/jquery-selector-cache":170,"browserify-require-async/loader":19,"es6-promise":108}],168:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getCookie(e){function r(e){return c.raw?e:encodeURIComponent(e)}function i(e){return c.raw?e:decodeURIComponent(e)}function o(e){return r(c.json?(0,_stringify2.default)(e):String(e))}function n(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(u," ")),c.json?JSON.parse(e):e}catch(e){}}function t(r,i){var o=c.raw?r:n(r);return e.jQuery.isFunction(i)?i(o):o}if(!e.jQuery.cookie||!e.jQuery.removeCookie){var u=/\+/g,c=e.jQuery.cookie=function(n,u,s){if(void 0!==u&&!e.jQuery.isFunction(u)){if(s=e.jQuery.extend({},c.defaults,s),"number"==typeof s.expires){var a=s.expires,f=s.expires=new Date;f.setTime(+f+864e5*a)}return document.cookie=[r(n),"=",o(u),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var d=n?"":{},p=document.cookie?document.cookie.split("; "):[],y=0,j=p.length;y<j;y++){var l=p[y].split("="),m=i(l.shift()),g=l.join("=");if(n&&n===m){d=t(g,u);break}n||void 0===(g=t(g))||(d[m]=g)}return d};c.defaults={},e.jQuery.removeCookie=function(r,i){return void 0!==e.jQuery.cookie(r)&&(e.jQuery.cookie(r,"",e.jQuery.extend({},i,{expires:-1})),!e.jQuery.cookie(r))}}}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify);module.exports=getCookie;
},{"babel-runtime/core-js/json/stringify":8}],169:[function(require,module,exports){
"use strict";module.exports=function(e){function t(e){n("head").append('<link rel="stylesheet" href="'+e+'">')}var n=e;n.extend({loadCSS:t})};
},{}],170:[function(require,module,exports){
"use strict";module.exports=function(e,t){function n(e,t){return t===!0?(c[e]=r(e),c[e]):c[e]?c[e]:(c[e]=r(e),c[e])}var r=e;r.extend({$cache:n});var c={}};
},{}],171:[function(require,module,exports){
"use strict";function liveService(){var e=avalon.define({$id:"liveService"});require("./live-service-update-currency")(e),require("./live-service-get-bp")(e)}module.exports=liveService;
},{"./live-service-get-bp":172,"./live-service-update-currency":173}],172:[function(require,module,exports){
"use strict";module.exports=function(t,e){};
},{}],173:[function(require,module,exports){
"use strict";var appConfig=require("../app-config/app-config"),randomEmoji=require("../functions/func-random-emoji/random-emoji");module.exports=function(r,e){r.$watch("updateCurrency",(function(a){if(a){if(null===a.gold||a.gold===e||isNaN(a.gold)||(a.gold=parseInt(a.gold,10)),null===a.silver||a.silver===e||isNaN(a.silver)||(a.silver=parseInt(a.silver,10)),null!==a.gold&&a.gold!==e&&isNaN(a.gold)||null!==a.silver&&a.silver!==e&&isNaN(a.silver))throw new Error(appConfig.consoleText.error+"updateCurrency 的值必须为有效数字.");return void r.$fire("all!fillCurrency",a)}$.ajax({url:"/user/getuserinfo",type:"GET",data:{ts:Date.now()},dataType:"JSON",success:function(e){"REPONSE_OK"==e.code&&(e.data.silver=parseInt(e.data.silver,10),e.data.gold=parseInt(e.data.gold,10),isNaN(e.data.silver)||isNaN(e.data.gold)||r.$fire("all!fillCurrency",{silver:e.data.silver,gold:e.data.gold,biliCoin:e.data.billCoin,isNeverRecharge:0===e.data.user_charged}))},error:function(r){throw new Error(appConfig.consoleText.error+"瓜子信息更新失败: 请求发送失败.")}})}))};
},{"../app-config/app-config":137,"../functions/func-random-emoji/random-emoji":155}],174:[function(require,module,exports){
"use strict";module.exports=["(⌒▽⌒)","（￣▽￣）","(=・ω・=)","(｀・ω・´)","(〜￣△￣)〜","(･∀･)","(°∀°)ﾉ","(￣3￣)","╮(￣▽￣)╭","_(:3」∠)_","( ´_ゝ｀)","←_←","→_→","(&lt;_&lt;)","(&gt;_&gt;)","(;¬_¬)",'("▔□▔)/',"(ﾟДﾟ≡ﾟдﾟ)!?","Σ(ﾟдﾟ;)","Σ( ￣□￣||)","(´；ω；`)","（/TДT)/","(^・ω・^ )","(｡･ω･｡)","(●￣(ｴ)￣●)","ε=ε=(ノ≧∇≦)ノ","(´･_･`)","(-_-#)","（￣へ￣）","(￣ε(#￣) Σ","ヽ(`Д´)ﾉ","（#-_-)┯━┯","(╯°口°)╯(┴—┴","←◡←","( ♥д♥)","Σ>―(〃°ω°〃)♡→","⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄","(╬ﾟдﾟ)▄︻┻┳═一","･*･:≡(　ε:)","(汗)","(苦笑)"];
},{}],175:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _create=require("babel-runtime/core-js/object/create"),_create2=_interopRequireDefault(_create),_keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),typeDetective=require("../../utils/util.type-detective"),DataItem=require("./utils/class.data-item.js"),defineAccessor=require("./utils/util.define-accessor.js"),ITEMSTORE={},COLLECTIONSTEORE={};module.exports={createItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(void 0!==ITEMSTORE[e])return!1;var r=new DataItem(e);"Object"===typeDetective(t)?(0,_keys2.default)(t).forEach((function(e){r=defineAccessor(r,e,t[e])})):r=defineAccessor(r,e,t);var i=(0,_create2.default)(r);return ITEMSTORE[e]=i,i},getItem:function(e){return ITEMSTORE[e]},collection:{get:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:""},define:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}}};
},{"../../utils/util.type-detective":292,"./utils/class.data-item.js":176,"./utils/util.define-accessor.js":177,"babel-runtime/core-js/object/create":9,"babel-runtime/core-js/object/keys":11}],176:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),typeDetective=require("../../../utils/util.type-detective.js"),DataItem=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,_classCallCheck3.default)(this,e),this.$id=t,this.$subscribers={}}return(0,_createClass3.default)(e,[{key:"update",value:function(e,t){return this[e]=t,this}},{key:"subscribe",value:function(e,t){if("Function"!==typeDetective(t))throw new Error("[FlowData] Subscriber must be function.");return this.$subscribers[e]||(this.$subscribers[e]=[]),this.$subscribers[e].push(t),this}}]),e})();module.exports=DataItem;
},{"../../../utils/util.type-detective.js":292,"babel-runtime/helpers/classCallCheck":15,"babel-runtime/helpers/createClass":16}],177:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),_defineProperty=require("babel-runtime/core-js/object/define-property"),_defineProperty2=_interopRequireDefault(_defineProperty);module.exports=function(e,r,t){var u=t;return(0,_defineProperty2.default)(e,r,{get:function(){return u},set:function(e){var t=this;u=e,(0,_keys2.default)(this.$subscribers).forEach((function(e){e===r&&t.$subscribers[e].forEach((function(e){return e(u)}))}))}}),e};
},{"babel-runtime/core-js/object/define-property":10,"babel-runtime/core-js/object/keys":11}],178:[function(require,module,exports){
"use strict";var FlowData=require("./flow.data"),store=require("./store");module.exports={FlowData:FlowData,store:store};
},{"./flow.data":175,"./store":179}],179:[function(require,module,exports){
"use strict";module.exports={chatAreaUserEvent:require("./store.chat-area-user-event")};
},{"./store.chat-area-user-event":180}],180:[function(require,module,exports){
"use strict";var FlowData=require("../flow.data");module.exports=FlowData.createItem("chatArea:userEvent",{locked:!1,mouseover:!1});
},{"../flow.data":175}],181:[function(require,module,exports){
"use strict";function Painted(){this.init()}Painted.prototype={urls:{title:"/duanwu/titleHover"},titlesClass:".salty-sweet, .salty-man, .salty-king, .sweet-fighter, .sweet-princess",titlesText:{"salty-sweet":"甜咸无双","salty-man":"咸蛋超人","salty-king":"咸鱼皇","sweet-fighter":"砂糖战士","sweet-princess":"甘すぎる"},isOpen:{"salty-sweet":!0,"salty-man":!0,"salty-king":!0,"sweet-fighter":!0,"sweet-princess":!0},notOpenTips:{"salty-sweet":"","salty-man":"","salty-king":"","sweet-fighter":"","sweet-princess":""},activityName:"2016 端午节",$painted:[],init:function(){this.bindEvts()},showTitlePainted:function(t,e,s,i){var n=this.titlesText[s],a='<div class="title-painted '+s+"-painted "+(e?" open":" unopend")+' ">'+(e?'<div class="info"><p class="title">'+n+'</p><p class="s">2016端午节</p></div></div>':'<div class="unopend-tip"><p>'+i+"</p></div>");this.$painted.length?this.$painted.html(a):this.$painted=$("<div class='title-painted-panel'></div>").appendTo("body").html(a),this.$painted.css({left:t.offset().left-t.width()/2,top:t.offset().top+25}).addClass("show")},ajaxTitle:function(t,e){var s=this,i=this.urls.title,e=e||function(){},n={title:t};$.ajax({type:"get",url:i,data:n,dataType:"json",success:function(i){0!==i.code&&i.code!==-403||(s.isOpen[t]=i.data.status,s.notOpenTips[t]=i.msg,e(i.data.status,i.msg))}})},bindEvts:function(){var t=this,e=0;$("body").on("mouseenter",this.titlesClass,(function(s){var i,n=$(this),a=$.trim(n[0].className.match(/salty-sweet|salty-man|salty-king|sweet-fighter|sweet-princess/g)[0]);return clearTimeout(e),""===t.isOpen[a]?e=setTimeout((function(){t.ajaxTitle(a,(function(e,s){t.showTitlePainted(n,e,a,s)}))}),200):(i=t.isOpen[a],t.showTitlePainted(n,i,a,t.notOpenTips[a])),!1})),$("body").on("mouseleave",this.titlesClass,(function(s){$(this);return clearTimeout(e),t.$painted.length&&t.$painted.html("").removeClass("show"),!1}))}};var painted=new Painted;module.exports=function(){return painted};
},{}],182:[function(require,module,exports){
"use strict";require("./javascripts/main.js");
},{"./javascripts/main.js":184}],183:[function(require,module,exports){
"use strict";var sendBeat=require("./send-beat.js"),liveToast=require("./../../../../common/components/live-widget/live-toast/live-toast.js"),liveQuickLogin=require("./../../../../common/functions/func-live-quick-login/live-quick-login"),timestampShorter=require("./../../../../common/functions/func-timestamp-shorter/timestamp-shorter"),RoomEvent=require("../../../room-event"),view=avalon.define({$id:"beatStormPanel",$el:"#beat-storm-panel",data:{beatList:[],num:1,buyBeat:"",beatCustomList:[],config:{title:"",action:"",count:""}},open:!1,curTabIndex:0,isCustomChecked:!1,doms:{},csses:{btnBuy:".buy",num:".buy-num"},urls:{beatList:"/api/ajaxGetAllBeats"},ajaxFunc:{ajaxBeatList:function(){var t=this.urls.beatList;return $.ajax({url:t,dataType:"json"})},ajaxBuy:function(t){var i="/gift/send",n={giftId:39,roomid:ROOMID,ruid:MASTERID,num:1,coinType:"gold",Bag_id:0,timestamp:timestampShorter(Date.now()),rnd:DANMU_RND,token:$.cookie("LIVE_LOGIN_DATA")||""};return $.extend(n,t),$.ajax({type:"post",url:i,data:n,dataType:"json"})}},events:{clickClose:function(){this.close()},clickCustomTab:function(t,i){this.changeCustomTab(i)},clickBuy:function(){liveQuickLogin(),this.buy()},numKeyDown:function(t){if(this.data.num>100)return this.data.num=100,!1}},init:function(){this.$el=$(this.$el),this.bindContextInit(),this.setDoms(),this.setWatch(),this.bindEvt()},setWatch:function(){var t=this;this.$watch("ShowBeatStormPanel",(function(){t.show()})),this.$watch("SYS_GIF",(function(t){39===t.giftId&&(t.msgClass="beat-storm-sys",t.msg=t.tips,view.$fire("all!addSysMsg",t))}))},setDoms:function(){var t=this.$el,i=this.csses;this.doms={$btnBuy:$(i.btnBuy,t),$txtNum:$(i.num,t)}},bindContext:function(t,i){return function(){return i.apply(t,arguments)}},bindContextInit:function(){for(var t in this.ajaxFunc)this.ajaxFunc[t]=this.bindContext(this,this.ajaxFunc[t]);for(var i in this.events)this.events[i]=this.bindContext(this,this.events[i])},getBeatList:function(){var t,i=this;this.getBeatList.ing||(this.getBeatList.ing=!0,t=this.ajaxFunc.ajaxBeatList().done((function(t){if(!$.isEmptyObject(t.data)){var n=t.data;i.data.beatList=n.public,i.data.beatCustomList=n.private,i.data.config.title=n.config.title,i.data.config.action=n.config.action,i.data.config.count=n.config.count,sendBeat.updateConfig(n.config)}i.getBeatList.ing=!1})).fail((function(){i.getBeatList.ing=!1})))},buy:function(){var t,i=this,n=this.getCurrentData(),e=this.checkData(n);return e?void this.showTip(e):(t=this.ajaxFunc.ajaxBuy(n),void t.done((function(t){var n=t.code,e="info",s=t.msg;0===n?(i.showTip("操作成功，"+i.data.config.title+"生成","success"),i.close(),i.reset(),RoomEvent.Activity.$emit("ACTIVITY_GIFT_SEND_CALLBACK",t.data),RoomEvent.Gift.$emit("GIFT_OTHER_SEND_CALLBACK",t.data)):n==-400&&"余额不足"==s?(i.close(),view.$fire("all!noSeed")):(n===-500&&(e="error"),i.showTip(s,e))})).fail((function(){})))},getCurrentData:function(){var t=this,i=this.$el,n=$(":radio:checked",i),e=n.attr("beat-id");return this.data.buyBeat=n.parent().text(),{beatId:e||"",num:t.data.num||""}},changeCustomTab:function(t){this.isCustomChecked=!0,this.curTabIndex=t},bindEvt:function(){var t=this;$("div.gift-39",$(".gifts-ctnr")).click((function(){t.getBeatList()}))},checkData:(function(){var t={type:{isNon:{check:function(t){return""===t||void 0===t?(this.msg="请选择你要带的节奏",!0):(this.msg="",!1)},msg:""},isNum:{check:function(t){return!t||/\D/.test(t)?(this.msg="请输入正确的倍数",!1):(this.msg="",!0)},msg:""}},config:{id:"isNon",num:"isNum"}};return function(i){var n="";return t.type.isNon.check(i.beatId)?n=t.type.isNon.msg:t.type.isNum.check(i.num)||(n=t.type.isNum.msg),n}})(),showTip:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";liveToast(this.doms.$btnBuy[0],t,i,!0)},close:function(){this.reset(),this.open=!1},show:function(){this.open=!0},reset:function(){this.isCustomChecked=!1,this.curTabIndex=0,this.data.num=1,$(":radio:checked",this.$el).prop("checked",!1)}});module.exports=function(){view.init()};
},{"../../../room-event":238,"./../../../../common/components/live-widget/live-toast/live-toast.js":147,"./../../../../common/functions/func-live-quick-login/live-quick-login":154,"./../../../../common/functions/func-timestamp-shorter/timestamp-shorter":159,"./send-beat.js":185}],184:[function(require,module,exports){
"use strict";require("./buy-beat.js")();
},{"./buy-beat.js":183}],185:[function(require,module,exports){
"use strict";var EventBus=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBus,view=avalon.define({$id:"beatStormSend",open:!1,time:90,beat:"",num:"100",urls:{check:"/SpecialGift/room/"+ROOMID},config:{msgEnd:"",className:"normal"},init:function(){this.setWatch(),this.checkBeat()},setWatch:function(){var t=this;this.$watch("showBeatSend",(function(n){t.beat=n.beat,t.show(),t.setCountDown()})),this.$watch("danmuResultOk",(function(n){39===n.gift_id&&t.close()})),EventBus.$on("GiftEvent:BeatStorm",(function(n){"start"===n.action?(t.beat=n.content,t.num=n.num,t.time=n.time,t.show(),t.setCountDown()):t.end()}))},checkBeat:function(){var t=this,n=this.ajaxCheck();n.done((function(n){var i=n.data.gift39;$.isEmptyObject(i)||0!==i.hadJoin||(t.beat=i.content,t.num=i.num,t.time=i.time,t.show(),t.setCountDown())}))},ajaxCheck:function(){var t=this.urls.check;return $.ajax({url:t,dataType:"json"})},clickCopy:function(){view.$fire("all!fillDanmu",view.beat)},setCountDown:function(){var t=this,n=this,i=0;this.setCountDown.tid=i=setInterval((function(){0===n.time?t.end():n.time--}),1e3)},showNotice:function(){var t=$("#chat-msg-list"),n='\n              <div><div class="system-msg"  style="color: #ff8f34">'+this.config.msgEnd+"</div></div>\n            ";t.append(n)[0].scrollTop=t[0].scrollHeight},end:function(){clearInterval(this.setCountDown.tid),this.close(),this.showNotice()},close:function(){this.open=!1},show:function(){this.open=!0},updateConfig:function(t){this.config.msgEnd=t.msgEnd},updateClassName:function(t){this.config.className=t||"normal"}});view.init(),module.exports=view;
},{"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],186:[function(require,module,exports){
"use strict";var CanvasHightlight=require("./../../../common/components/canvas-highlight/canvas-highlight"),GuideStep=[{id:"danmaku",showDom:"#chat-ctrl-panel",isSetPosition:!0},{id:"gift",showDom:[".gifts-ctnr.text-right",".ctrl-item.items-package"],isFix:!0,action:"showDefGift",closeAction:"hideGift",isSetPosition:!0},{id:"money",showDom:".seeds-buy-cntr",isSetPosition:!0},{id:"medal",showDom:"#rank-list-ctnr",action:"showMeal"},{id:"end",isEnd:!0,showDom:""}],url="/user/beginnerGuide?type=room",vm=avalon.define({$id:"roomBeginnerGuide",data:{guideStep:GuideStep,currentStepType:"danmaku",currentStepIndex:0,isEnd:!1,isClear:!1},show:!0,init:function(){var t=this;this.$el=$("#beginner-guide"),this.$mask=$("#beginner-guide-mask"),this.$mask.show(),this.bindContextInit(),this.checkSider(),this.initHighlight(),this.scrollToTop(),setTimeout((function(){t.start()}),800)},start:function(){this.data.currentStepData=this.data.guideStep[0],this.showStep()},events:{clickNext:function(){this.next()},clickClose:function(){this.setCookie(3),this.close()},clickHome:function(){this.close()},clickSendDanmaku:function(){this.actions.sendDanmaku()}},actions:{sendDanmaku:function(){var t="bilibili-( ゜- ゜)つロ乾杯~>";vm.$fire("all!fillDanmu",t),vm.$fire("all!sendDanmu")},showMeal:function(){vm.$fire("all!changeRoomRankTab","fans-rank")},showDefGift:function(){$("#gift-panel").find(".gifts-ctnr").find(".gift-item.gift-1").trigger("mouseenter"),$(".gift-info-panel").addClass("beginner-guide-show-dom")},hideGift:function(){$("#gift-panel").find(".gifts-ctnr").find(".gift-item.gift-1").trigger("mouseleave"),$(".gift-info-panel").removeClass("beginner-guide-show-dom")}},bindContext:function(t,i){return function(){return i.apply(t,arguments)}},bindContextInit:function(){for(var t in this.events)this.events[t]=this.bindContext(this,this.events[t])},scrollToTop:function(){document.documentElement.scrollTop=0,document.body.scrollTop=0},initHighlight:function(){var t=this.$mask[0];this.highlight=new CanvasHightlight({canvasDom:t,isOneScreen:!0})},checkSider:function(){var t=$(".body-container");this.isSiderOpen=t.hasClass("sidebar-left-open"),t.removeClass("sidebar-left-open")},resetSider:function(){var t=$(".body-container");this.isSiderOpen=t.hasClass("sidebar-left-open"),this.isSiderOpen&&t.addClass("sidebar-left-open")},showStep:function(){var t,i=(this.$mask[0],this.data.currentStepData),e=i.showDom;"[object Array]"===Object.prototype.toString.call(e)?t=e.map((function(t){return $(t)[0]})):e&&(t=$(e)[0]),this.highlight.change({clipDom:t,isFix:i.isFix,isSetPosition:i.isSetPosition}),i.action&&this.actions[i.action]()},next:function(){var t=this.data.currentStepIndex,i={};this.data.currentStepIndex>0&&this.beforeNext(),t++,i=this.data.guideStep[t],this.data.currentStepType=i.id,this.data.currentStepIndex=t,this.data.currentStepData=i,this.showStep(),i.isEnd&&(this.data.isEnd=!0,this.showEnd())},beforeNext:function(){var t=this.data.currentStepData.closeAction;t&&this.actions[t]()},showEnd:function(){this.getPrize(),this.setCookie(3)},getPrize:function(){var t=this;$.ajax({type:"get",url:url,dataType:"json"}).done((function(i){1===i.data.complete&&(t.data.isClear=!0)})).fail((function(){}))},check:function(){var t=USER_LEVEL.level;if(0===t&&$.cookie("BeginnerGuide"))return!0},setCookie:function(t){var i=new Date,e=i.getFullYear()+"/"+(i.getMonth()+2)+"/"+i.getDate()+"  23:59:59",n=new Date(new Date(e).getTime());$.cookie("BeginnerGuide",t,{expires:n})},close:function(){this.$el.remove(),this.highlight.close(),this.resetSider(),this.data.currentStepIndex>0&&this.beforeNext()}});module.exports=function(){vm.init()};
},{"./../../../common/components/canvas-highlight/canvas-highlight":139}],187:[function(require,module,exports){
"use strict";module.exports=function(){$.cookie("DedeUserID")&&0===USER_LEVEL.level&&"3"!==$.cookie("BeginnerGuide")&&"1"!==$.cookie("BeginnerGuide")&&require("./guide")()};
},{"./guide":186}],188:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/capsule-toy.js")()};
},{"./javascripts/capsule-toy.js":189}],189:[function(require,module,exports){
"use strict";var liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login"),isLogin=require("../../../../common/functions/is-login");module.exports=function(){var a=avalon.define({$id:"capsuleToyCtrl",data:{sidebar:{normal:{coin:"--",status:!0,progress:{now:0,max:5e3}},colorful:{coin:"--",status:!0,progress:{now:0,max:5e3}}}},events:{getCapsule:function(){$.ajax({url:"/api/ajaxCapsule",type:"GET",dataType:"JSON",success:function(e){0==e.code&&(a.data.sidebar=e.data)}})},loginTest:function(a){isLogin()||(a.preventDefault(),liveQuickLogin())}}});a.$watch("initCapsuleToyData",(function(){a.events.getCapsule()})),a.$watch("updateCapsuleData",(function(e){var s=e.normal.change,n=e.colorful.change,i=$(".room-left-sidebar .small-btn.capsule"),l=null;s&&(l=$('<span class="small-sidebar-capsule-increase">+'+s+"</span>"),$(".body-container").hasClass("sidebar-left-open")&&(i=$(".room-left-sidebar .capsule-toy .normal"),l=$('<span class="sidebar-capsule-increase">+'+s+"</span>"))),n&&(l=$('<span class="small-sidebar-capsule-increase">+'+n+"</span>"),$(".body-container").hasClass("sidebar-left-open")&&(i=$(".room-left-sidebar .capsule-toy .colorful"),l=$('<span class="sidebar-capsule-increase">+'+n+"</span>"))),i.find(".sidebar-capsule-increase").remove(),i.find(".small-sidebar-capsule-increase").remove(),i.append(l),a.data.sidebar=e}))};
},{"../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../common/functions/is-login":160}],190:[function(require,module,exports){
"use strict";var liveToast=require("../../../../../common/components/live-widget/live-toast/live-toast"),randomEmoji=require("../../../../../common/functions/func-random-emoji/random-emoji");module.exports=function(o){return o.ISANCHOR?void $((function(){$("#bk-changers").show().on("click",".changer",(function(a){var i=$(this),e=i.attr("data-bk-id");$.ajax({url:"/liveact/change_bg",type:"POST",data:{roomid:o.ROOMID,bg_id:e},dataType:"JSON",success:function(o){return 0!=o.code?void liveToast(i,o.msg+randomEmoji.sad(),"caution"):(liveToast(i,"背景更换成功！"+randomEmoji.happy(),"success"),i.addClass("active").siblings(".changer").removeClass("active"),void(i=e=null))},error:function(o){liveToast(i,"背景更换失败, 稍后再试试吧 "+randomEmoji.sad(),"caution")}})}))})):void $("#bk-changers").remove()};
},{"../../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../../common/functions/func-random-emoji/random-emoji":155}],191:[function(require,module,exports){
"use strict";module.exports=function(){var e=$(".hider-btn-slider"),n=$(".chat-ctnr-hider-ctnr"),s=n.find(".btn-body"),o=$("body");n.on("mouseenter",(function(){e.show()})).on("mouseleave",(function(){e.hide()}));var a="hide-chat-area";s.on("mouseenter",(function(){e.show().addClass("active")})).on("mouseleave",(function(){e.removeClass("active")})).on("click",(function(){o.hasClass("player-full-win")&&!o.hasClass(a)?o.addClass(a):o.removeClass(a)})),("IE 9"===window.USERBROWSER||"IE 10"===window.USERBROWSER)&&n.addClass("ie-9-10")};
},{}],192:[function(require,module,exports){
"use strict";var liveToast=require("../../../../../common/components/live-widget/live-toast/live-toast"),randomEmoji=require("../../../../../common/functions/func-random-emoji/random-emoji");module.exports=function(e){function a(e){window.clearInterval(l),e&&(d=parseInt(e/60,10),t=parseInt(e%60,10),n.danmuConfig.data.gbShieldTimeState=1,l=window.setInterval((function(){return 0===t&&0===d?void i():(0===t&&d>0?(t=59,d-=1):t>0&&(t-=1),t<10?$(".live_gbs_sec").text("0"+t):$(".live_gbs_sec").text(t),void $(".live_gbs_min").text(d))}),1e3))}function i(){$(".live_gbs_sec").text("00"),$(".live_gbs_min").text(0),n.danmuConfig.data.gbShieldTimeState=0,window.clearInterval(l)}var n=e||null,d=0,t=0,l=null;return{init:function(e){n.doms.sReady=e.ready,n.danmuConfig.data.shieldLevel=e.isAnchor?1:e.level;for(var d=[],t=[],l=0;l<e.shield_list.length;l++)t.push(0),d.push({sid:l,str:e.shield_list[l]});n.danmuConfig.data.shieldItem=d,n.danmuConfig.data.shieldIdList=t,n.danmuConfig.data.shieldId=e.shield_list.length<1?0:e.shield_list.length,n.danmuConfig.data.shieldToRoom=e.room_shield,n.danmuConfig.data.shieldTypeVerify=e.user_silent_verify,n.danmuConfig.data.shieldTypeRank=e.user_silent_rank,n.danmuConfig.data.shieldUserLevel=e.user_silent_level,e.user_silent_level>0&&(n.danmuConfig.data.shieldUserStatus=1),n.danmuConfig.data.gbShieldTypeLevel=e.room_silent_level,e.room_silent_level||(n.danmuConfig.data.gbShieldTypeLevel=1),n.danmuConfig.data.gbShieldType=e.room_silent_type,e.room_silent_type||(n.danmuConfig.data.gbShieldType="level"),"member"==e.room_silent_type&&(n.danmuConfig.data.gbInputReadonly=!0),n.danmuConfig.data.gbShieldTime=3,e.room_silent_second==-1&&(n.danmuConfig.data.gbShieldTime=0,n.danmuConfig.data.gbShieldTimeState=1,n.danmuConfig.data.gbShieldTheLive=!0),n.danmuColor.selectColor=e.danmu_color||n.danmuColor.selectColor,n.danmuColor.selectMode=e.danmu_mode||n.danmuColor.selectMode,n.danmuSend.maxLength=e.danmu_length,e.room_silent_second?a(e.room_silent_second):i(),n.$watch("masterShieldChoice",(function(e){var d=n.danmuConfig.data.gbShieldTime;return n.danmuConfig.data.gbShieldTheLive=!1,0==d&&(n.danmuConfig.data.gbShieldTimeState=1,n.danmuConfig.data.gbShieldTheLive=!0),n.danmuConfig.data.gbShieldTimeDelete?void i():void a(60*d)})),n.$watch("userShieldChoice",(function(e){return 0!==e.code?void(n.danmuConfig.data.shieldUserStatus=0):0==n.danmuConfig.data.shieldUserLevel?void(n.danmuConfig.data.shieldUserStatus=0):void(n.danmuConfig.data.shieldUserStatus=1)})),n.$watch("updateCountdownStatus",(function(e){i()}))},setDanmuDensity:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.danmuDensity=i,localStorage.setItem("danmuDensity",i),"flash"!==a&&LivePlayer.flash_setDanmuDensity(i)},setAutoDensity:function(e,a){n.danmuConfig.data.autoDensity=e,localStorage.setItem("autoDensity",e),"flash"!==a&&LivePlayer.flash_autoDensity(e)},f_noticeAutoDensity:function(e){var a=$(".treasure");liveToast(a,"弹幕太多，电脑撑不住啦弹幕密度被降低至"+e+"，您可以在弹幕设置里重新修改，如果不需要自动调节密度，可以禁用该功能。"+randomEmoji.helpless())},setDanmuSize:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.danmuSize=i,localStorage.setItem("danmuSize",i),"flash"!==a&&LivePlayer.flash_setDanmuSize(i)},setDanmuAlpha:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.danmuAlpha=i,localStorage.setItem("danmuAlpha",i),"flash"!==a&&LivePlayer.flash_setDanmuAlpha(i)},setUserDanmuShield:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.shieldLevel=i,"flash"!==a&&LivePlayer.flash_setLevelShield(i)},setUserShieldLevel:function(e,a){"flash"!==a&&LivePlayer.setUserShield({type:"level",level:e})},setUserShieldRank:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.shieldTypeRank=i,"flash"!==a&&LivePlayer.setUserShield({type:"rank",level:i})},setUserShieldVerify:function(e,a){var i=parseInt(e,10);n.danmuConfig.data.shieldTypeVerify=i,"flash"!==a&&LivePlayer.setUserShield({type:"verify",level:i})},setMasterShieldType:function(e,a){if(!window.UID)return void liveToast($(".live-config-confirm")[0],"你还没有登陆哟~","error");var i=parseInt(e.level,10);n.danmuConfig.data.gbShieldTypeLevel=i,n.danmuConfig.data.gbShieldTimeDelete=!1,"flash"!==a&&LivePlayer.setGlobalShield(e.type,i,e.time)},f_setLevelShield:function(e){n.danmuConfig.data.shieldLevel=parseInt(e,10)},setAnchorShieldLevel:function(e){n.danmuConfig.data.shieldLevel=parseInt(e,10)},setAnchorShieldType:function(e){n.danmuConfig.data.gbShieldType=e},setAnchorShieldTime:function(e){n.danmuConfig.data.gbShieldTime=parseInt(e,10)},f_setAnchorShieldOn:function(e,d){e?(n.danmuConfig.data.gbShieldTime=e/60,n.danmuConfig.data.shieldLevel=d,a(e)):i()},setAnchorShieldOff:function(e,a){n.danmuConfig.data.gbShieldTimeDelete=!0,"flash"!==a&&LivePlayer.setGlobalShield("off",0,0)},addShieldWord:function(){LivePlayer.addShieldWord(n.danmuConfig.data.shieldInput),n.danmuConfig.data.shieldInput="",i()},f_addShieldWord:function(e){var a=$(".js-add-shieldword");if(0!==e.code)liveToast(a,e.msg,"error");else{n.danmuConfig.data.shieldItem.ensure({sid:n.danmuConfig.data.shieldId,str:e.msg}),n.danmuConfig.data.shieldIdList.push(0),n.danmuConfig.data.shieldId++;var a=$(".shieldlist-area");setTimeout((function(){a.scrollTop(a[0].scrollHeight+23)}),200)}},removeShieldWord:function(){for(var e=n.danmuConfig.data.shieldIdList,a=n.danmuConfig.data.shieldItem,i=e.length,d=[],t=[],l=[],o=0;o<i;o++)e[o]?t.push(a[o].sid):(d.push(a[o]),l.push(0));n.danmuConfig.data.shieldItem=d,n.danmuConfig.data.shieldIdList=l,setTimeout((function(){$(".shieldlist-area").scrollTop(0)}),200),LivePlayer.deleteShieldId(t)},f_removeShieldWord:function(e){for(var a=n.danmuConfig.data.shieldItem,i=a.length,d=[],t=[],l=0,o=0;o<i;o++){l=0;for(var s=0;s<e.length;s++)if(e[s]===a[o].sid){l=1,e.splice(s,1);break}l||(d.push(a[o]),t.push(0))}n.danmuConfig.data.shieldItem=d,n.danmuConfig.data.shieldIdList=t,setTimeout((function(){$(".shieldlist-area").scrollTop(0)}),200)},setShieldToRoom:function(){n.danmuConfig.data.shieldToRoom=!n.danmuConfig.data.shieldToRoom;try{LivePlayer.flash_setRoomListShield(n.danmuConfig.data.shieldToRoom)}catch(e){}},f_setShieldToRoom:function(e){n.danmuConfig.data.shieldToRoom=e}}};
},{"../../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../../common/functions/func-random-emoji/random-emoji":155}],193:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _defineProperty2=require("babel-runtime/helpers/defineProperty"),_defineProperty3=_interopRequireDefault(_defineProperty2),appConfig=require("../../../../../common/app-config/app-config"),lazyInit=require("../../../../../common/functions/func-avalon-lazy-init/lazy-init"),liveQuickLogin=require("../../../../../common/functions/func-live-quick-login/live-quick-login"),liveToast=require("../../../../../common/components/live-widget/live-toast/live-toast"),chatCtrlPanelService=require("./chat-ctrl-panel-service"),randomEmoji=require("../../../../../common/functions/func-random-emoji/random-emoji"),checkLogin=require("../../../../../common/functions/is-login");module.exports=function(){var e=!1,n=!1;avalon.ready((function(){function t(e){var n=e&&(e.target||e.srcElement);n&&n.className.indexOf("emoji-panel")>-1||$(".emoji-panel").fadeOut(200,(function(){f.doms.emojiPanel=!1,$(window).off("click",t)}))}function a(e){var n=e&&(e.target||e.srcElement);n&&n.className.indexOf("hot-words-panel")>-1||$(".hot-words-panel").fadeOut(200,(function(){f.doms.hotWords=!1,$(window).off("click",a)}))}function i(e){var n=e&&(e.target||e.srcElement),t=n&&n.className;t.indexOf("danmu-color-panel")>-1||t.indexOf("danmu-color-block")>-1||t.indexOf("danmu-mode-block")>-1||$(".danmu-color-panel").fadeOut(200,(function(){f.doms.danmuColor=!1,$(window).off("click",i)}))}function o(e){var n=$(".danmu-config-panel"),t=$(".danmu-config-panel .close-btn");(!n.is(e.target)&&0===n.has(e.target).length||t.is(e.target))&&$(".danmu-config-panel").fadeOut(200,(function(){f.doms.danmuConfig=!1,$(window).off("click",o)}))}function d(e){var n=$(".live-dropdown-area, .live-slevel-select");n.is(e.target)||0!==n.has(e.target).length||(f.doms.sLevel=!1,$(window).off("click",d))}function l(e){var n=$(".live-dropdown-area, .live-slevel-select"+e.data);n.is(e.target)||0!==n.has(e.target).length||(f.doms["gbsLevel_"+e.data]=!1,$(window).off("click",l))}function s(e){f.danmuSend.data=e,$("#danmu-textbox").val(e)}function u(e){return e.replace(/\r\n/g,"")}var r=null,c={danmuColor:{select:"0xffffff"},shieldPanel:{danmuAlpha:100,danmuSize:100,danmuDensity:30,autoDensity:1,gbShieldTimeList:[3,10,30,0],gbShieldTime:3,gbShieldTimeState:0,shieldLevel:0,shieldTypeRank:0,shieldTypeVerify:0,shieldUserLevel:0,shieldUserStatus:0,gbShieldType:"level",gbShieldTypeLevel:1,gbShieldTypeTime:0,gbShieldTimeDelete:!1,gbShieldTypeList:["level","medal","member"],shieldTypeTimeText:{0:"本场直播",3:"3分钟",10:"10分钟",30:"30分钟"},gbShieldTypeText:{member:"全员",level:"用户等级UL.",medal:"粉丝勋章"},gbInputReadonly:!1,gbShieldTheLive:!1,shieldInput:"",shieldId:0,shieldIdList:[],shieldItem:[],shieldToRoom:!1}},m={emojiPanel:!1,hotWords:!1,danmuColor:!1,danmuConfig:!1,sReady:0,sLevel:!1,sListAll:0,gbsLevel_1:!1,gbsLevel_2:!1},f=avalon.define({$id:"chatCtrlPanelCtrl",chatScrollLocked:!1,doms:m,danmuCtrl:{emoji:function(e){f.doms.emojiPanel=!0,setTimeout((function(){$(window).on("click",t)}),1)},hotWords:function(n){f.doms.hotWords=!0,setTimeout((function(){$(window).on("click",a),!e&&(function(){$(".hot-words-ctnr").scrollTop(1),e=!0})()}),1)},color:function(e){f.doms.danmuColor=!0,setTimeout((function(){$(window).on("click",i)}),1)},empty:function(e){liveToast(e.target||e.srcElement,"清屏成功 "+randomEmoji.helpless(),"success"),f.$fire("all!chatListEmpty",e)},lock:function(){f.chatScrollLocked=!f.chatScrollLocked,f.$fire("all!lockChatList",f.chatScrollLocked)},config:function(){f.doms.danmuConfig=!0,setTimeout((function(){$(window).on("click",o),!n&&(function(){$(".shieldlist-area").scrollTop(1),n=!0})()}))},sLevel:function(){f.doms.sLevel=!f.doms.sLevel,setTimeout((function(){$(window).on("click",d)}))},gbsLevel_1:function(){f.doms.gbsLevel_1=!f.doms.gbsLevel_1,setTimeout((function(){$(window).on("click",1,l)}))},gbsLevel_2:function(){f.doms.gbsLevel_2=!f.doms.gbsLevel_2,setTimeout((function(){$(window).on("click",2,l)}))}},emoji:{data:appConfig.appConfig.emojiList},hotWords:{data:[]},danmuSend:{isLogin:checkLogin()&&"First Login"!==checkLogin(),data:"",maxLength:20,inputEvent:function(e){e.preventDefault();var n=e.target||e.srcElement;f.danmuSend.data=$(n).val(),13===e.keyCode&&f.danmuSend.send(e)},preventEnter:function(e){if(13===e.keyCode)return e.preventDefault(),!1},send:function(e){f.$fire("sendDanmu",e.target||e.srcElement)},clickLogin:function(){liveQuickLogin()}},danmuConfig:{data:c.shieldPanel,events:{danmuInit:function(){try{LivePlayer.danMuInit()}catch(e){}},changeDanmuDensity:function(){r.setDanmuDensity(f.danmuConfig.data.danmuDensity)},autoChangeDensity:function(){var e=1===f.danmuConfig.data.autoDensity?0:1;r.setAutoDensity(e)},changeDanmuSize:function(){r.setDanmuSize(f.danmuConfig.data.danmuSize)},changeDanmuAlpha:function(){r.setDanmuAlpha(f.danmuConfig.data.danmuAlpha)},changeDanmuSLevel:function(e){f.doms.sLevel=!1,r.setUserDanmuShield(e)},changeShieldLevel:function(e){r.setAnchorShieldLevel(e)},changeShieldUserLevel:function(){var e=f.danmuConfig.data.shieldUserLevel;f.danmuConfig.data.shieldUserLevel=e;var n=f.danmuConfig.data.shieldUserStatus?0:1;return f.danmuConfig.data.shieldUserStatus=n,0==n?(f.danmuConfig.data.shieldUserStatus=1,void(f.danmuConfig.data.shieldUserLevel=0)):void r.setUserShieldLevel(e)},changeShieldRank:function(){var e=f.danmuConfig.data.shieldTypeRank?0:1;f.danmuConfig.data.shieldTypeRank=e,r.setUserShieldRank(e)},changeShieldVerify:function(){var e=f.danmuConfig.data.shieldTypeVerify?0:1;f.danmuConfig.data.shieldTypeVerify=e,r.setUserShieldVerify(e)},changeShieldType:function(e){f.danmuConfig.data.gbInputReadonly=!1,"member"==e&&(f.danmuConfig.data.gbInputReadonly=!0),r.setAnchorShieldType(e)},setGbShieldUser:function(){"member"==f.danmuConfig.data.gbShieldType&&(f.danmuConfig.data.gbShieldTypeLevel=1),r.setMasterShieldType({type:f.danmuConfig.data.gbShieldType,time:f.danmuConfig.data.gbShieldTime,level:f.danmuConfig.data.gbShieldTypeLevel})},gbShieldTenThree:function(e){13===e.keyCode&&f.danmuConfig.events.setGbShieldUser()},changeGbsTime:function(e){r.setAnchorShieldTime(e)},cancelGbShield:function(){r.setAnchorShieldOff()},addShieldWord:function(){""!==f.danmuConfig.data.shieldInput&&r.addShieldWord()},deleteShieldWord:function(){f.doms.sListAll=0,r.removeShieldWord()},shieldListSelect:function(e){var n=parseInt(e,10),t=1===f.danmuConfig.data.shieldIdList[n]?0:1;f.danmuConfig.data.shieldIdList.set(n,t);for(var a=1,i=f.danmuConfig.data.shieldIdList.length,n=0;n<i;n++)if(!f.danmuConfig.data.shieldIdList[n]){a=0;break}f.doms.sListAll=a?1:0},shieldListSelectAll:function(){var e=f.danmuConfig.data.shieldIdList.length,n=f.doms.sListAll?0:1;f.doms.sListAll=n;for(var t=0;t<e;t++)f.danmuConfig.data.shieldIdList.set(t,n)},changeShieldToRoom:function(){r.setShieldToRoom()}}},danmuColor:{selectColor:"",selectMode:1,colors:[],modes:[],urls:{color:"/api/ajaxGetConfig",setConfig:"/api/ajaxSetConfig"},events:{clickSetConfig:function(e,n,t){f.danmuColor.setConfig(e,n,t)}},getColor:function(){var e=this,n=this.ajaxColor();n.done((function(n){var t=n.data,a=t.color,i=t.mode;e.colors=a,e.modes=i})).fail((function(){}))},ajaxColor:function(){var e=this.urls.color;return $.ajax({type:"get",url:e,dataType:"json"})},setConfig:function(e,n,t){var a,o=this;liveQuickLogin();var d=(a={},(0,_defineProperty3.default)(a,n,t),(0,_defineProperty3.default)(a,"room_id",ROOMID),a),l=this.ajaxSetConfig(d);l.done((function(a){0===a.code?("color"===n?o.selectColor=t:o.selectMode=t,i(e)):liveToast($(e.target),a.msg+randomEmoji.helpless())})).fail((function(){}))},ajaxSetConfig:function(e){var n=this.urls.setConfig;return $.ajax({url:n,type:"post",data:e,dataType:"json"})}}});r=chatCtrlPanelService(f),f.$fire("all!chatCtrlPanelService",r),c=m=null,f.$watch("danmuConfig.data.shieldUserLevel",(function(e,n){e!=n&&0!=$.trim(e).length&&(f.danmuConfig.data.shieldUserLevel=e,r.setUserShieldLevel(e))}));var h=0,g=window.setInterval((function(){h++,(h>10||f.doms.sReady)&&window.clearInterval(g),f.danmuConfig.events.danmuInit()}),1500);f.$watch("sendDanmu",(function(e){liveQuickLogin();var n=f.danmuSend.data.trim(),t=f.danmuColor;return n=n.substr(0,f.danmuSend.maxLength),void(n=u(n)),n?(LivePlayer.sendMsg(n,t.selectColor,t.selectMode),f.danmuSend.data="",void $("#danmu-textbox").val("")):(liveToast(e,"请输入弹幕后再发送~ "+randomEmoji.helpless()),void s(""))})),f.$watch("fillDanmu",(function(e){s(e)})),lazyInit(document.getElementById("chat-ctrl-panel"),f,(function(){!(function(){$(".emoji-panel").on("click","a",(function(){var e=f.danmuSend.data+$(this).text();e=e.substr(0,f.danmuSend.maxLength),s(e),t(),$("#danmu-textbox").focus()}))})(),(function(){$(".hot-words-panel").on("click","a",(function(){var e=f.danmuSend.data+$(this).text();e=e.substr(0,f.danmuSend.maxLength),s(e),a(),$("#danmu-textbox").focus()})),setTimeout((function(){$(".hot-words-ctnr").perfectScrollbar()}),1)})(),(function(){window.USERBROWSER.indexOf("IE")>-1&&($("#danmu-density-ctrl").on("change",(function(){var e=$(this).val();f.danmuConfig.data.danmuDensity=parseInt(e,10),r.setDanmuDensity(e)})),$("#danmu-size-ctrl").on("change",(function(){var e=$(this).val();f.danmuConfig.data.danmuSize=parseInt(e,10),r.setDanmuSize(e)})),$("#danmu-alpha-ctrl").on("change",(function(){var e=$(this).val();f.danmuConfig.data.danmuAlpha=parseInt(e,10),r.setDanmuAlpha(e)}))),setTimeout((function(){$(".shieldlist-area").perfectScrollbar();var e=localStorage.getItem("danmuDensity")||f.danmuConfig.data.danmuDensity,n=5086==window.ROOMID||20006==window.ROOMID||397953==window.ROOMID||1009==window.ROOMID;n&&e>30&&(e=30),r.setDanmuDensity(e);var t=localStorage.getItem("autoDensity")||f.danmuConfig.data.autoDensity;r.setAutoDensity(parseInt(t,10));var a=localStorage.getItem("danmuSize")||f.danmuConfig.data.danmuSize;r.setDanmuSize(a);var i=localStorage.getItem("danmuAlpha")||f.danmuConfig.data.danmuAlpha;r.setDanmuAlpha(i)}),500)})(),(function(){f.danmuColor.getColor()})()})),window.getDanmuColor=function(){return f.danmuColor.selectColor},window.getDanmuMode=function(){return f.danmuColor.selectMode}}))};
},{"../../../../../common/app-config/app-config":137,"../../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../../common/functions/func-random-emoji/random-emoji":155,"../../../../../common/functions/is-login":160,"./chat-ctrl-panel-service":192,"babel-runtime/helpers/defineProperty":17}],194:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/profile-ctrl.js")()};
},{"./javascripts/profile-ctrl.js":196}],195:[function(require,module,exports){
"use strict";var liveQuickLogin=require("../../../../../../../common/functions/func-live-quick-login/live-quick-login"),GUARD_CONFIG=require("../../../../../guard/guardConfig");module.exports=function(a){function e(){$(".fans-medal-tips-box").fadeOut(200,(function(){a.fansMedal.visible=!1,a.fansMedal.choosePanelVisible=!1,$(document).off("click",e)}))}var n={locked:!1,ajaxGetMyWearMedal:function(){$.ajax({url:"/i/ajaxGetMyWearMedal",type:"get",dataType:"json",cache:!1,success:function(e){if(0==e.code){a.fansMedal.isWear=e.data.isWear,a.fansMedal.myWearMedal=e.data,a.fansMedal.guardLevel=e.data.guard_level,a.fansMedal.buff=n.getGuardBuff(e.data.guard_level);var l=e.data.intimacy/e.data.next_intimacy*100+"%";$(".medal-intimacy-progress .medal-progerss-bar").width(l),a.fansMedal.dataReady=!0}}})},ajaxGetMyMedalList:function(e){$.ajax({url:"/i/ajaxGetMyMedalList",type:"get",dataType:"json",cache:!1,success:function(n){0==n.code&&(a.fansMedal.myMedalList=n.data),e&&e()}})},wearFansMedal:function(e,l){n.locked||(n.locked=!0,$.ajax({url:"/i/ajaxWearFansMedal",type:"post",data:{medal_id:e},dataType:"json",success:function(e){n.locked=!1,0==e.code&&(a.fansMedal.isWear=1,MEDAL.level=e.data.level,MEDAL.medal_name=e.data.medal_name,MEDAL.anchorName=e.data.anchorName,MEDAL.roomid=e.data.roomid),l&&l()}}))},cancelFansMedal:function(){$.ajax({url:"/i/ajaxCancelWear",type:"get",dataType:"json",success:function(e){0==e.code&&(a.fansMedal.isWear=0)}})},getGuardBuff:(function(){var a=GUARD_CONFIG.level,e={1:"300%",2:"200%",3:"150%"};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l="",n=n.toString();return l=n>0?a[n]+"buff：上限提升至"+e[n]:"未开启加成"}})()};a.fansMedal.wearFansMedal=function(a){n.wearFansMedal(a,(function(){n.ajaxGetMyWearMedal()}))},a.fansMedal.cancelFansMedal=function(){n.cancelFansMedal(),a.fansMedal.myWearMedal.medal_id=-1},a.fansMedal.toggleTipbox=function(){liveQuickLogin(),a.fansMedal.visible=!a.fansMedal.visible,a.fansMedal.visible&&(n.ajaxGetMyWearMedal(),setTimeout((function(){$(document).on("click",e)}),1))},a.fansMedal.choosePanelToggle=function(){a.fansMedal.choosePanelVisible?a.fansMedal.choosePanelVisible=!1:n.ajaxGetMyMedalList((function(){a.fansMedal.choosePanelVisible=!0}))},a.$watch("newFansMedalNotice",(function(e){a.fansMedal.newFansMedal.medalId=e.medalId,a.fansMedal.newFansMedal.medalName=e.medalName,a.fansMedal.newFansMedal.medalLevel=e.medalLevel,a.fansMedal.newFansMedal.show=!0})),a.fansMedal.closeNewFansMedalNotice=function(){a.fansMedal.newFansMedal.show=!1},a.fansMedal.newFansMedalWearNow=function(e){n.wearFansMedal(e,(function(){a.fansMedal.newFansMedal.show=!1}))}};
},{"../../../../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../../guard/guardConfig":207}],196:[function(require,module,exports){
"use strict";var _noVue=require("@bilibili-live/component.title/no-vue.js"),lazyInit=require("../../../../../../../common/functions/func-avalon-lazy-init/lazy-init"),liveQuickLogin=require("../../../../../../../common/functions/func-live-quick-login/live-quick-login"),GUARD_CONFIG=require("../../../../../guard/guardConfig");module.exports=function(){avalon.ready((function(){function e(e){if(!e)return"";var i=(0,_noVue.titleParser)(e);return(0,_noVue.titleIconHtml)(i.id,i.level)}var i=avalon.define({$id:"profileCtrl",fansMedal:{visible:!1,choosePanelVisible:!1,dataReady:!1,isWear:0,guardLevel:"",buff:"",myWearMedal:{progressWidth:"0%"},newFansMedal:{show:!1,medalId:0,medalName:"",medalLevel:""},myMedalList:[]},title:{visible:!1,choosePanelVisible:!1,dataReady:!1,isWear:0,myWearTitle:{title:""},myWearTitleDom:"",newTitle:{show:!1,titleId:-1,tipsType:"new",titleName:""},newTitleDom:"",myTitleList:[]},vip:{toVip:function(){liveQuickLogin(),window.open("//link.bilibili.com/p/center/index#/user-center/my-info/operation?vip=true","_blank")}},guard:{toBuyGuard:function(){liveQuickLogin(),window.open(GUARD_CONFIG.buyUrl+"&guard_level=1","_blank")}},hideTitlePanel:function(){i.title.toggleTipbox(1)},stopPropagation:function(e){e.stopPropagation()}});i.$watch("title.myWearTitle.title",(function(t){i.title.myWearTitleDom=e(t)})),i.$watch("title.newTitle.titleName",(function(t){i.title.newTitleDom=e(t)})),lazyInit(document.getElementById("profile-ctrl"),i,(function(){require("./fans-medal")(i),require("./title")(i)}))}))};
},{"../../../../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../../guard/guardConfig":207,"./fans-medal":195,"./title":197,"@bilibili-live/component.title/no-vue.js":2}],197:[function(require,module,exports){
"use strict";var _noVue=require("@bilibili-live/component.title/no-vue.js"),liveQuickLogin=require("../../../../../../../common/functions/func-live-quick-login/live-quick-login");module.exports=function(e){function t(){$(".title-tips-box").fadeOut(200,(function(){e.title.visible=!1,e.title.choosePanelVisible=!1,$(document).off("click",t)}))}var i={locked:!1,ajaxGetMyWearTitle:function(){$.ajax({url:"/i/ajaxGetMyWearTitle",type:"get",dataType:"json",success:function(t){0==t.code&&(t.data.title?e.title.isWear=1:e.title.isWear=0,e.title.myWearTitle=t.data,e.title.dataReady=!0)}})},ajaxGetMyTitleList:function(t){$.ajax({url:"/i/ajaxGetMyTitleList",type:"get",dataType:"json",success:function(i){0==i.code&&(e.title.myTitleList=i.data),t&&t()}})},ajaxWearTitle:function(t,l){i.locked||(i.locked=!0,$.ajax({url:"/i/ajaxWearTitle",type:"post",data:{id:t},dataType:"json",success:function(t){i.locked=!1,0==t.code&&(e.title.isWear=1,TITLE.title=e.title.newTitle.titleName,localStorage.removeItem("newTitleId")),l&&l()}}))},ajaxCancelWearTitle:function(t){$.ajax({url:"/i/ajaxCancelWearTitle",type:"post",dataType:"json",success:function(i){0==i.code&&(e.title.isWear=0),t&&t(i)}})}};window.onfocus=function(){var t=localStorage.getItem("newTitleId");t&&(e.title.myWearTitle.title=t,TITLE.title=t,localStorage.removeItem("newTitleId"))},e.title.wearTitle=function(e){i.ajaxWearTitle(e,(function(){i.ajaxGetMyWearTitle()}))},e.title.cancelTitle=function(){i.ajaxCancelWearTitle()},e.title.toggleTipbox=function(l){liveQuickLogin(),e.title.visible=!e.title.visible,l&&$(document).off("click",t),e.title.visible&&(i.ajaxGetMyWearTitle(),setTimeout((function(){$(document).on("click",t)}),1))},e.title.choosePanelToggle=function(){e.title.choosePanelVisible?e.title.choosePanelVisible=!1:i.ajaxGetMyTitleList((function(){e.title.choosePanelVisible=!0}))},e.$watch("newTitleNotice",(function(t){var i=(0,_noVue.titleParser)(t);i.level>1?e.title.newTitle.tipsType="upgrade":e.title.newTitle.tipsType="new",e.title.newTitle.titleId=i.id,e.title.newTitle.titleName=t,e.title.newTitle.show=!0})),e.title.closeNewTitleNotice=function(){e.title.newTitle.show=!1},e.title.newTitleWearNow=function(t){i.ajaxWearTitle(t,(function(){e.title.newTitle.show=!1}))}};
},{"../../../../../../../common/functions/func-live-quick-login/live-quick-login":154,"@bilibili-live/component.title/no-vue.js":2}],198:[function(require,module,exports){
"use strict";var appConfig=require("../../../../../common/app-config/app-config"),GUARD_CONFIG=require("../../../guard/guardConfig"),EventBus=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBus,getAbsPosition=require("../../../../../common/functions/func-get-abs-position/get-abs-position"),liveQuickLogin=require("../../../../../common/functions/func-live-quick-login/live-quick-login"),liveToast=require("../../../../../common/components/live-widget/live-toast/live-toast"),lazyInit=require("../../../../../common/functions/func-avalon-lazy-init/lazy-init"),store=require("/Users/Felix/Bilibili/Repo/live-static/src/flow").store,randomEmoji=require("../../../../../common/functions/func-random-emoji/random-emoji");module.exports=function(){avalon.ready((function(){function a(a){var e=a.target||a.srcElement;if(!$(e).hasClass("msg-content")&&!$(e).hasClass("user-name")||$(e).parent().hasClass("gift-msg"))return void(i.doms.danmuPopup.show=!1);var n=$(e).parent();i.doms.danmuPopup.show=!0;var t=getAbsPosition(n[0]);i.doms.danmuPopup.left=t.left+150,i.doms.danmuPopup.top=$(n[0]).position().top+170,i.doms.danmuPopup.targetUID=i.data.clickedDanmu.uid=n.attr("data-uid"),i.doms.danmuPopup.uname=n.attr("data-uname"),i.data.clickedDanmu.msg=n.find(".msg-content").text(),n=null}function e(){$(".chat-msg-ctrl-panel").fadeOut(200,(function(){i.doms.danmuPopup.show=!1}))}function n(a){liveQuickLogin();var e=a.target||a.srcElement;$.ajax({url:"/liveact/shield_user",type:"POST",data:{roomid:ROOMID,uid:i.data.clickedDanmu.uid,type:1},dataType:"json",success:function(a){return 0!=a.code?void liveToast(e,a.msg,"caution"):(liveToast(e,"屏蔽成功，再也见不到 TA 了~ "+randomEmoji.helpless(),"success"),void LivePlayer.addShieldUser(a.data.uid,a.data.uname))},error:function(){liveToast(e,"网络不好，请稍后再试~ "+randomEmoji.sad(),"error")}})}function t(){liveQuickLogin(),i.doms.danmuReportPanel.show=!0}function o(a){var e=a.target||a.srcElement;return $("#input-report-danmu").val()?void $.ajax({url:"/liveact/dmreport",type:"POST",data:{roomid:window.ROOMID,uid:i.data.clickedDanmu.uid,msg:i.data.clickedDanmu.msg,reason:$("#input-report-danmu").val()},dataType:"JSON",success:function(a){return 0!=a.code?void liveToast(e,a.msg,"caution"):(liveToast(e,"已成功举报，请安心等待处理！"+randomEmoji.happy(),"success"),void s())},error:function(a){liveToast(e,"举报失败，网络可能不稳定，请稍后再试，非常对不起 "+randomEmoji.sad(),"error")}}):(liveToast(e,"请输入正确的举报原因~",!0),void(e=null))}function s(){i.doms.danmuReportPanel.out=!0,setTimeout((function(){i.doms.danmuReportPanel.show=!1,i.doms.danmuReportPanel.out=!1,i.doms.danmuReportPanel.focus=!1,i.data.clickedDanmu.reason="",$("#input-report-danmu").val("")}),380)}var i=avalon.define({$id:"chatListCtrl",data:{clickedDanmu:{uid:null,msg:null,reason:null}},events:{chatList:{lockToggle:function(a){i.doms.chatArea.locked=a,i.doms.chatArea.noAppending=i.doms.chatArea.locked},mouseover:function(){i.doms.mouseover=!0},mouseleave:function(){i.doms.mouseover=!1}},showDanmuPopup:a,hideDanmuPopup:e,forbidDanmu:n,reportDanmu:{setup:t,confirm:o,cancel:s},blockUser:function(){1==ISADMIN&&(1==ISANCHOR?i.$fire("all!showLiveManageDialog",{curTarget:"blackManage",blackName:i.doms.danmuPopup.uname}):i.$fire("all!showBlackDialog",{blackName:i.doms.danmuPopup.uname}),i.events.hideDanmuPopup())}},doms:{mouseover:!1,chatArea:{locked:!1,noAppending:!1},danmuPopup:{show:!1,left:0,top:0,targetUID:null,uname:""},danmuReportPanel:{show:!1,out:!1,focus:!1}}});!(function(){store.chatAreaUserEvent.locked=i.doms.chatArea.locked,store.chatAreaUserEvent.mouseover=i.doms.mouseover,i.$watch("doms.chatArea.locked",(function(a){store.chatAreaUserEvent.locked=a})),i.$watch("doms.mouseover",(function(a){store.chatAreaUserEvent.mouseover=a}))})(),(function(){var a=$("#chat-msg-list"),e=a[0],n=e.children||e.childNodes,t=window.UID,o=(window.ISADMIN,window.MASTERID,window.TITLE,window.GUARD);!(function(){function o(a){return i.doms.chatArea.locked&&a.data.uid!=t?void(a.data.super>0&&(EventBus.$emit(appConfig.eventNames.superGiftHaruna,a.data),EventBus.$emit(appConfig.eventNames.harunaMotion,"thanking"))):(window.liveRoomFuncs.giftReceived(a.data.rcost),window.liveRoomFuncs.updateGiftTop(a.data.top_list),a.data.super>0&&(EventBus.$emit(appConfig.eventNames.superGiftHaruna,a.data),EventBus.$emit(appConfig.eventNames.harunaMotion,"thanking")),void s(a))}function s(t){return t.data.num=parseInt(t.data.num,10),t.data.giftId=parseInt(t.data.giftId,10),c(t)?void(t.data.num<10&&d(t.data.giftId)?l(t):(p='<div class="gift-msg" role="listitem"><span class="user-name">'+t.data.uname+'</span><span class="action">'+t.data.action+t.data.giftName+'</span><div class="gift-img gift-grey-'+t.data.giftId+'" role="img"></div><span class="gift-count">X '+t.data.num+"</span></div>",n.length>100?(u=n[0],e.removeChild(u),u.innerHTML=p,e.appendChild(u)):(m=document.createElement("div"),m.className="msg-item-ctnr",m.innerHTML=p,e.appendChild(m)),i.doms.mouseover||(e.scrollTop=e.scrollHeight))):void(!i.doms.mouseover&&a.scrollTop(e.scrollHeight))}function d(a){return appConfig.appConfig.chatGifts.indexOf(a)>-1}function l(a){r.innerHTML='<div class="gift-msg-item"><span class="user-name-low">'+a.data.uname+'</span> <span class="action">赠送'+a.data.giftName+'</span><div class="gift-img gift-grey-'+a.data.giftId+'" role="img"></div> X <span class="gift-count">'+a.data.num+"</span></div>"}function c(a){if(28===a.data.giftId||29===a.data.giftId){var e=$(".row-title-may");e.text(a.data.mayScore),e.attr("class","row-title-may "+a.data.mayStatus)}return!0}window.liveRoomFuncs.addGift=o,i.$watch("addGift",o);var r=document.getElementById("gift-msg-1000"),u={},m={},p="";window.liveRoomFuncs.addGiftHistory=s,i.$watch("addGiftHistory",s)})(),i.$watch("lockChatList",(function(a){i.events.chatList.lockToggle(a)})),i.$watch("chatListEmpty",(function(){a.empty()})),i.$watch("addWelcomeMsg",(function(n){if(n.data.uid!=t){var o='<div><div class="system-msg">',s=n.data.vip,d=n.data.svip;o+='<a target="_blank" href="//link.bilibili.com/p/center/index#/user-center/my-info/operation?vip=true"><i class="live-icon vip-color v-middle '+(d?" year":s?" month":"")+'"></i></a>',1==n.data.isadmin&&(o+=n.data.uid==window.MASTERID?'<span class="square-icon master">播主</span>':'<span class="square-icon admin">房管</span>'),o+='<span class="welcome v-middle" style="color:  '+(d?"#ffb100":s?"#f25d8e":"")+'">'+n.data.uname+(d?" 年费":" ")+'老爷</span><span class="v-middle">进入直播间</span></div></div>',a.append(o),!i.doms.mouseover&&a.scrollTop(e.scrollHeight)}})),i.$watch("addSelfWelcomeMsg",(function(){var e='<div><div class="system-msg"><i class="live-icon vip-color v-middle '+(SVIP?" year":VIP?" month":"")+'"></i><span class="welcome v-middle" style="color: '+(SVIP?"#ffb100":VIP?"#f25d8e":"")+'">'+UNAME+(SVIP?" 年费":" ")+'老爷</span><span class="v-middle">进入直播间</span><span id="close-vip-tip-link" class="bili-link v-middle" style="color: #4fc1e9; cursor: pointer;">关闭提示</span></div></div>';a.append(e),$("#close-vip-tip-link").on("click",(function(){var a=livePopup({title:"关闭老爷提示",content:"点击确认，可以关闭自己进入直播间的提示，关闭后可在直播个人中心重新开启提示功能哦 (●′ω`●)~",width:300,onConfirm:function(){$.ajax({url:"/i/ajaxSetVipViewStatus",type:"POST",data:{status:0},timeout:5e3,dataType:"JSON",success:function(e){liveToast(a.confirmBtn,"已开启潜行模式 "+randomEmoji.happy(),"success",!0),a.remove(),a=null},error:function(e){liveToast(a.confirmBtn,"隐身失败，等会再试试呗？ "+randomEmoji.sad(),"error",!0),consoleText.log(appConfig.consoleText.error+"关闭老爷提示错误："+e.statusText)}})},onCancel:function(){a.remove(),a=null}})}))})),(function(){function n(n){var t=n.guard_level,o=n.username,s=(n.uid,"");s='\n                        <div><div class="system-msg guard-sys guard-lv'+t+'"><span class="v-middle">欢迎</span><a href="'+(GUARD_CONFIG.buyUrl+"&guard_level="+t)+'" target="_blank"><span class="guard-icon-small lv'+t+'" title="'+GUARD_CONFIG.level[t.toString()]+'"></span></a><span class="color">'+o+'</span><span class="v-middle">进入直播间</span> </div></div>\n                    ',a.append(s),!i.doms.mouseover&&a.scrollTop(e.scrollHeight)}i.$watch("addWelcomeGuardMsg",(function(a){a.uid!=t&&n(a)})),i.$watch("addSelfWelcomeGuardMsg",(function(){var a={guard_level:o,username:UNAME};n(a)}))})(),EventBus.$on("BuyEvent:BuyGuard",(function(e){var n=e.username,t=e.guard_level,o=e.num,s='<div><div class="guard-buy-sys"><span class="uname">'+n+"</span> 购买"+GUARD_CONFIG.level[t.toString()]+'<span class="guard-icon-gift lv'+t+'"></span><span class="num">X'+o+"</span></div></div>";a.append(s)})),i.$watch("addSysMsg",(function(n){var t=null,o=n.msg.substr(0,n.msg.indexOf("：")+1),s=n.msg.substr(n.msg.indexOf("：")+1,n.msg.length);t=n.url.length<1?s:'<a href="'+n.url+'" target="_blank">'+s+"</a>";var d=n.msgClass||"sys-msg";2==n.styleType&&(d="small-tv-msg");var l='<div><div class="announcement-container '+d+'"><i class="live-icon announcement"></i><div class="announcement-content"><p><span>'+o+"</span>"+t+"</p></div></div></div>";a.append(l),!i.doms.mouseover&&a.scrollTop(e.scrollHeight)})),i.$watch("addKickoutMsg",(function(e){a.append('<div><div class="system-msg">用户 <span style="color: #aaa">'+e.uname+"</span> 已被管理员踢出房间</div></div>")}))})(),lazyInit(document.getElementById("chat-list-ctnr"),i,(function(){lazyInit($("#chat-panels")[0],i)}))}))};
},{"../../../../../common/app-config/app-config":137,"../../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../../common/functions/func-get-abs-position/get-abs-position":152,"../../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../../common/functions/func-random-emoji/random-emoji":155,"../../../guard/guardConfig":207,"/Users/Felix/Bilibili/Repo/live-static/src/flow":178,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],199:[function(require,module,exports){
"use strict";function showDanmuResult(e){var n=e.title,t=e.content;popup=new LivePopup({title:n,html:t,width:288,type:"info",button:{confirm:"我知道了"},onCancel:function(){this.remove(),view.$fire("all!danmuResultOk",e)},initFunc:function(){$(this.popup).addClass("danmu-result-panel")}})}var LivePopup=require("./../../../../../common/components/live-widget/live-popup/live-popup"),view=avalon.define({$id:"danmuResult"});window.getDanmakuResult=function(e){showDanmuResult(e.tips)};
},{"./../../../../../common/components/live-widget/live-popup/live-popup":146}],200:[function(require,module,exports){
"use strict";module.exports=function(e){require("./components/chat-msg-list/chat-list-ctnr")(),require("./components/chat-ctrl-panel/chat-ctrl-panel")(),require("./components/chat-ctrl-panel/profile-ctrl/intro-javascripts")(),require("./components/bk-changer/bk-changer")(window),require("./components/chat-ctnr-hider/chat-ctnr-hider")(),require("./components/danmu-result/danmu-result")};
},{"./components/bk-changer/bk-changer":190,"./components/chat-ctnr-hider/chat-ctnr-hider":191,"./components/chat-ctrl-panel/chat-ctrl-panel":193,"./components/chat-ctrl-panel/profile-ctrl/intro-javascripts":194,"./components/chat-msg-list/chat-list-ctnr":198,"./components/danmu-result/danmu-result":199}],201:[function(require,module,exports){
"use strict";module.exports=function(t){var s={tpl:"//static.hdslb.com/live-static/live-room/tpls/tpl-draw.js",js:"//static.hdslb.com/live-static/js/live.draw.min.js",css:"//static.hdslb.com/live-static/css/live-draw.css"};t.ACTIVITY_ID>0&&($("#player-container .treasure").replaceWith('<div class="draw-treasure"></div>'),$.getScript(s.tpl,(function(){var t=$(window.liveTpls["room-template/draw.html"]);$((function(){$("body").append(t),$("head").append('<link rel="stylesheet" href="'+s.css+'">'),$.getScript(s.js)}))})))};
},{}],202:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/gift-section-ctrl")(window),require("./javascripts/gift-package-ctrl")()};
},{"./javascripts/gift-package-ctrl":203,"./javascripts/gift-section-ctrl":204}],203:[function(require,module,exports){
"use strict";var lazyInit=require("../../../../common/functions/func-avalon-lazy-init/lazy-init"),liveToast=require("../../../../common/components/live-widget/live-toast/live-toast"),randomEmoji=require("../../../../common/functions/func-random-emoji/random-emoji"),liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login");module.exports=function(){function t(t){$.ajax({url:"/giftBag/sendDaily",type:"GET",dataType:"json",cache:!1,success:function(a){t&&t(a)}})}function a(t){$.ajax({url:"/giftBag/getSendGift",type:"GET",dataType:"json",success:function(a){t&&t(a)}})}function n(t){$.ajax({url:"/gift/playerBag",type:"GET",dataType:"json",cache:!1,success:function(a){t&&t(a)}})}avalon.ready((function(){function e(){$(".gifts-package-panel").fadeOut(200,(function(){l.panelStatus=!1,$(document).off("click",e)}))}function i(t){n((function(a){l.giftPackageData=a.data,l.panelStatus=!0,setTimeout((function(){t&&t()}),50)})),setTimeout((function(){$(document).on("click",e)}),1)}function o(t,a,n,e){var i=l.giftSendPanel;i.giftData.giftId=t,i.giftData.giftName=a,i.giftData.giftNum=n,i.giftData.count=1,i.giftData.bagId=e,l.panelStatus=!1,i.show=!0}function u(){var t=l.giftSendPanel;t.out=!0,t.outTimeout=setTimeout((function(){t.out=!1,t.show=!1,t=null}),380)}function c(){var t=l.giftPackageNewPanel;a((function(a){0==a.code&&(t.data=a.data,t.show=!0)}))}function f(){var t=l.giftPackageNewPanel;t.out=!0,t.outTimeout=setTimeout((function(){t.out=!1,t.show=!1,t=null,l.giftPackageStatus=2,i()}),380)}function g(a){if("keyup"!==a.type||13===a.keyCode){var n=a.target||a.srcElement,e=l.giftSendPanel.giftData,i=parseInt($("#gift-package-send-panel input").val(),10),o=parseInt(e.count,10);return o=o===i?o:i,isNaN(o)?(e.count="",void liveToast(n,"请填写正确的送礼数量 "+randomEmoji.helpless(),!0)):void l.$fire("all!sendGift",{element:n,type:"package",data:{giftId:e.giftId,num:o,coinType:e.type,bagId:e.bagId},callback:function(a){0==a.code&&(e.giftNum=a.data.remain,0==a.data.remain&&t((function(t){l.giftPackageStatus=t.data.result})))}})}}var l=avalon.define({$id:"giftPackageCtrl",giftPackageStatus:0,panelStatus:!1,giftPackageData:[],toggleGiftPackage:function(t){t.stopPropagation(),liveQuickLogin(),l.panelStatus?e():1==l.giftPackageStatus?c():i()},giftSendPanel:{giftData:{giftId:"",giftName:"",giftNum:0,type:"silver",count:1,bagId:0},show:!1,out:!1,outTimeout:null,open:o,close:u,sendGift:g},giftPackageNewPanel:{data:[],show:!1,out:!1,outTimeout:null,open:c,close:f},stopPropagation:function(t){t.stopPropagation()}});l.$watch("giftPackageToggle",(function(t){var a=t.open||t,n=t.cb||function(){};"open"===a&&i(n),"close"===a&&e()})),lazyInit($("#gift-package-send-panel")[0],l,(function(){t((function(t){l.giftPackageStatus=t.data.result}))})),lazyInit($("#gift-package-new-panel")[0],l)}))};
},{"../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../common/functions/func-random-emoji/random-emoji":155}],204:[function(require,module,exports){
"use strict";var appConfig=require("../../../../common/app-config/app-config"),lazyInit=require("../../../../common/functions/func-avalon-lazy-init/lazy-init"),avalonSetNum=require("../../../../common/functions/func-setnum-avalon/avalon-set-num"),timestampShorter=require("../../../../common/functions/func-timestamp-shorter/timestamp-shorter"),randomEmoji=require("../../../../common/functions/func-random-emoji/random-emoji"),liveToast=require("../../../../common/components/live-widget/live-toast/live-toast"),liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login"),RoomEvent=require("../../../room-event"),EventBus=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBus;module.exports=function(t){avalon.ready((function(){function e(e){m.$fire("all!updateCapsuleData",e.data.capsule),EventBus.$emit(appConfig.eventNames.superGiftHaruna,e.data),m.$fire("all!updateGiftTop",e.data.top_list),m.$fire("all!giftReceived",e.data.rcost),m.$fire("all!updateCurrency",{gold:e.gold,silver:e.silver}),1==e.data.giftType&&LivePlayer.sendGift(e.data.giftId,e.data.num),1==e.data.newMedal&&m.$fire("all!newFansMedalNotice",{medalId:e.data.medal.medalId,medalName:e.data.medal.medalName,medalLevel:e.data.medal.level}),1==e.data.newTitle&&m.$fire("all!newTitleNotice",e.data.title),parseInt(e.data.num,10)<10&&s(e.data.giftId)?r(e):t.liveRoomFuncs.addGiftHistory(e),e.data.notice_msg&&LivePlayer.noticeGift(e.data.notice_msg)}function a(t){t.stopPropagation();var e=m.giftInfoPanel;e.mouseTimeout=setTimeout((function(){e.out=!0,e.outTimeout=setTimeout((function(){e.out=!1,e.show=!1,e=null}),380)}),1)}function i(t){d(t)}function n(t){d(t)}function o(t){d(t)}function l(t){RoomEvent.Activity.$emit("ACTIVITY_FREEGIFT_CHOOSE",t)}function s(t){return appConfig.appConfig.chatGifts.indexOf(parseInt(t,10))>-1}function r(t){var e={uname:t.data.uname,num:t.data.num,giftName:t.data.giftName,giftId:t.data.giftId};g.innerHTML='<div class="gift-msg-item"><span class="user-name-low">'+e.uname+'</span> <span class="action">赠送'+e.giftName+'</span><div class="gift-img gift-grey-'+e.giftId+'" role="img"></div>X <span class="gift-count">'+e.num+"</span></div>"}function d(t){var e=t.target||t.srcElement;if(!$(e).hasClass("gift-item"))return void(e=null);if(39===$(e).data("giftId"))return void m.$fire("all!ShowBeatStormPanel");var a=m.sendGift.data;a.count=1,a.type="silver",m.giftSendPanel.allowGold=!1,m.giftSendPanel.allowSilver=!1,m.giftSendPanel.disableInput=!1,m.giftSendPanel.show=!0,a.giftId=$(e).attr("data-gift-id"),a.giftName=$(e).attr("data-title"),"0"==$(e).attr("data-custom_input")&&(m.giftSendPanel.disableInput=!0);var i={gold:parseInt($(e).attr("data-gold"),10),silver:parseInt($(e).attr("data-silver"),10)},n="";i.gold>0&&(m.giftSendPanel.allowGold=!0,n+='<span class="cost-hint"><i class="live-icon gold-seed vertical-top"></i><span class="vertical-top">'+i.gold+"</span></span>"),i.silver>0&&(m.giftSendPanel.allowSilver=!0,n+='<span class="cost-hint"><i class="live-icon silver-seed vertical-top"></i><span class="vertical-top">'+i.silver+"</span></span>"),a.type=m.giftSendPanel.allowGold&&!m.giftSendPanel.allowSilver?"gold":"silver",m.giftSendPanel.cost=n,m.sendGift.countSet=$(e).attr("data-count_set").split(",")}function c(t){var e=t.target||t.srcElement;m.sendGift.data.count=$(e).attr("data-count")}function u(){var t=m.giftSendPanel;t.out=!0,t.outTimeout=setTimeout((function(){t.out=!1,t.show=!1,t=null}),380)}function f(t){if("keyup"!==t.type||13===t.keyCode){liveQuickLogin();var e=t.target||t.srcElement,a=m.sendGift.data,i=parseInt(a.count,10);return isNaN(i)?(a.count="",void liveToast(e,"请填写正确的送礼数量 "+randomEmoji.helpless(),!0)):void m.$fire("sendGift",{element:e,type:"normal",data:{giftId:a.giftId,num:i,coinType:a.type}})}}var m=avalon.define({$id:"giftCtrl",currency:{silver:0,gold:0},giftInfoPanel:{show:!1,out:!1,outTimeout:null,mouseTimeout:null,left:0,top:0,type:"",info:{giftId:"",title:"",content:"",effects:"",cost:""},events:{in:function(){clearTimeout(m.giftInfoPanel.outTimeout),clearTimeout(m.giftInfoPanel.mouseTimeout)},out:a}},giftSendPanel:{show:!1,out:!1,outTimeout:null,cost:"",allowGold:!1,allowSilver:!1,disableInput:!1,close:u},chooseGift:{normal:i,flash:n,activity:o,limited:l},sendGift:{countSet:[10,99,188,450,520,1314],data:{giftId:"",giftName:"",type:"silver",count:1},events:{setCount:c,send:f}},exchange:function(t){liveQuickLogin(),m.$fire("all!showExchange",t)}});m.$watch("fillCurrency",(function(t){null!==t.gold&&void 0!==t.gold&&avalonSetNum(t.gold,m.currency.gold,"giftCtrl.currency.gold"),null!==t.silver&&void 0!==t.silver&&avalonSetNum(t.silver,m.currency.silver,"giftCtrl.currency.silver")})),RoomEvent.Gift.$on("GIFT_OTHER_SEND_CALLBACK",e),m.$watch("sendGift",(function(t){var a=timestampShorter(Date.now()),i="";"normal"==t.type?i="/gift/send":"package"==t.type&&(i="/giftBag/send"),$.ajax({url:i,type:"POST",data:{giftId:t.data.giftId,roomid:ROOMID,ruid:MASTERID,num:t.data.num,coinType:t.data.coinType,Bag_id:t.data.bagId||0,timestamp:a,rnd:DANMU_RND,token:$.cookie("LIVE_LOGIN_DATA")||""},dataType:"JSON",success:function(a){0==a.code?(25==a.data.data.giftId&&!(function(){for(var t={},e=0;e<a.data.data.smalltv_msg.length;e++)t=a.data.data.smalltv_msg[e],t.msg=t.msg.replace(/\:\?/g," "),m.$fire("all!addSysMsg",t)})(),e(a.data),RoomEvent.Activity.$emit("ACTIVITY_GIFT_SEND_CALLBACK",a.data)):1==a.code||(a.code==-400&&"余额不足"==a.msg?(m.$fire("all!noSeed"),u()):t.element&&liveToast(t.element,a.msg+" "+randomEmoji.sad(),"caution",!0)),t.callback&&t.callback(a)},error:function(e){t.element&&liveToast(t.element,randomEmoji.sad()+" 送礼失败："+e.statusText+" "+randomEmoji.sad(),"error"),t.errorCallback&&t.errorCallback()}})})),m.$watch("closeGiftSendPanel",u),lazyInit($("#gift-panel")[0],m,(function(){var t=m.giftInfoPanel;$("#gift-panel").find(".gifts-ctnr").on("mouseenter",".gift-item",(function(e){e.stopPropagation(),clearTimeout(t.outTimeout),clearTimeout(t.mouseTimeout);var i=e.target||e.srcElement;if(!$(i).hasClass("gift-item")||$(i).hasClass("do-not-hover"))return void a(e);var n=$(i).attr("data-gift-id"),o=$(i).attr("data-title"),l=$(i).attr("data-desc"),s=$(i).attr("data-effect"),r=$(i).parent().attr("data-type"),d=$(i).position();t.show=!0,t.left=d.left,t.top=d.top,t.type=r,t.info.giftId=n,t.info.title=o,t.info.content=l,t.info.effects=s;var c={gold:parseInt($(i).attr("data-gold"),10),silver:parseInt($(i).attr("data-silver"),10)},u="";c.gold>0&&(u+='<span class="cost-hint"><i class="live-icon gold-seed vertical-top"></i><span class="vertical-top">'+c.gold+"</span></span>"),c.silver>0&&(u+='<span class="cost-hint"><i class="live-icon silver-seed vertical-top"></i><span class="vertical-top">'+c.silver+"</span></span>"),t.info.cost=u})).on("mouseleave",".gift-item",a),lazyInit($("#gift-send-panel")[0],m)}));var g=document.getElementById("gift-msg-1000")}))};
},{"../../../../common/app-config/app-config":137,"../../../../common/components/live-widget/live-toast/live-toast":147,"../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../common/functions/func-random-emoji/random-emoji":155,"../../../../common/functions/func-setnum-avalon/avalon-set-num":157,"../../../../common/functions/func-timestamp-shorter/timestamp-shorter":159,"../../../room-event":238,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],205:[function(require,module,exports){
"use strict";function winGameTexts(e,n,a){return'<p>本次抽奖您获得：</p><p class="t-center"><span class="small-tv-gift '+n+'"></span><span>'+e+'</span><span style="font-size: 16px; color: #ff8e29;"> x'+a+"</p>"}var livePopup=require("../../../../common/components/live-widget/live-popup/live-popup"),liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login");module.exports=function(e){function n(){i.drawPanels.length&&(i.curPanelId=i.drawPanels[0].id,i.curPanelTime=i.drawPanels[0].dtime),i.waitingPanels.length&&!i.drawPanels.length&&(i.curPanelId=i.waitingPanels[0].id,i.curPanelTime=i.waitingPanels[0].dtime),i.waitingPanels.length||i.drawPanels.length||(i.isShowPanel=!1,clearInterval(l.vars.panelsArrTimer))}function a(e,n,a){var t={lotteryType:"smallTV",countTime:0,isLottery:!1,isOther:!0,isEnd:a||!1};n.length&&(t.countTime=n[0].dtime),e.length&&(t.countTime=e[0].dtime,t.isLottery=!0),(n.length||e.length||a)&&i.$fire("all!addOtherLottery",t)}var t=($("#chat-list-ctnr"),$("#chat-ctrl-panel")),i=avalon.define({$id:"smallTvCtrl",curPanelId:0,curPanelTime:0,isShowPanel:!1,drawPanels:[],waitingPanels:[],closePanel:function(){i.isShowPanel=!1,a([],[],!0)},draw:function(e){l.events.draw(e)}}),l={vars:{smallTvTipsTimer:null,panelsArrTimer:null},init:function(){var e=this;e.apis.getSmallTV(0,(function(e){clearTimeout(l.vars.smallTvTipsTimer),t.find(".small-tv-tips").remove(),0==e.code&&((e.data.unjoin.length||e.data.join.length)&&(i.isShowPanel=!0),i.drawPanels=e.data.unjoin,i.waitingPanels=e.data.join,n(),l.events.updatePanelsArr(),a(e.data.unjoin,e.data.join)),0==e.code&&e.data.lastid&&l.events.showSmallTvTips(e.data.lastid)}))},events:{draw:function(e){l.apis.joinSmallTV(e,(function(e){0==e.code&&1==e.data.status?(l.panels.leftTimePanel.open(e.data.dtime),i.drawPanels.splice(0,1),i.waitingPanels.push({id:e.data.id,dtime:e.data.dtime}),0==i.drawPanels.length?a([],[{dtime:i.waitingPanels[0].dtime}]):a([{dtime:i.drawPanels[0].dtime}],[])):0==e.code&&2==e.data.status?l.panels.drawingPanel.open():l.panels.commonPanel("提示",e.msg)}))},updatePanelsArr:function(){clearInterval(l.vars.panelsArrTimer),l.vars.panelsArrTimer=setInterval((function(){if(i.drawPanels.length){for(var e=0;e<i.drawPanels.length;e++)i.drawPanels[e].dtime?i.drawPanels[e].dtime--:(i.drawPanels.splice(e,1),i.drawPanels.length&&a([{dtime:i.drawPanels[0].dtime}],[]));i.drawPanels.length&&(i.curPanelId=i.drawPanels[0].id,i.curPanelTime=i.drawPanels[0].dtime)}if(i.waitingPanels.length){for(var n=0;n<i.waitingPanels.length;n++)i.waitingPanels[n].dtime?i.waitingPanels[n].dtime--:(i.waitingPanels.splice(n,1),i.waitingPanels.length&&!i.drawPanels.length&&a([],[{dtime:i.waitingPanels[0].dtime}]));i.waitingPanels.length&&!i.drawPanels.length&&(i.curPanelId=i.waitingPanels[0].id,i.curPanelTime=i.waitingPanels[0].dtime)}i.waitingPanels.length||i.drawPanels.length||(i.isShowPanel=!1,clearInterval(l.vars.panelsArrTimer),a([],[],!0))}),1e3)},showSmallTvTips:function(e){clearTimeout(l.vars.smallTvTipsTimer),t.find(".small-tv-tips").remove();var n=$('<span class="small-tv-tips dp-none"></span>');t.append(n),n.fadeIn(200),n.on("click",(function(n){l.events.showRewardPanel(e)})),l.vars.smallTvTipsTimer=setTimeout((function(){n.remove(),clearTimeout(l.vars.smallTvTipsTimer)}),36e5)},showRewardPanel:function(e){l.apis.getReward(e,(function(e){liveQuickLogin(),0==e.code&&0==e.data.status?l.panels.winResultPanel.open(e.data.reward,e.data.win):0==e.code&&1==e.data.status?l.panels.commonPanel("抽奖过期","非常抱歉，您错过了此次抽奖，下次记得早点来哦 (▔□▔)/"):0==e.code&&2==e.data.status?l.panels.drawingPanel.open():l.panels.commonPanel("提示",e.msg)})),l.init()}},panels:{leftTimePanel:{timer:null,obj:null,open:function(e){var n=this;clearInterval(n.timer),n.obj&&n.obj.remove(),n.obj=new livePopup({title:"开奖剩余时间",html:'<p class="text-center" style="color: #ff8e29; font-size: 24px"><span class="tv-left-time">'+e+'</span>秒</p><p class="text-center">您已进入抽奖，请等待开奖结果。</p>',type:"info",width:300,initFunc:function(){var a=e;n.timer=setInterval((function(){a--,0==a&&(clearInterval(n.timer),n.obj.remove(),l.panels.drawingPanel.open()),$(".tv-left-time").text(a)}),1e3)},onConfirm:function(){clearInterval(n.timer),n.obj.remove()},onCancel:function(){clearInterval(n.timer),n.obj.remove()}})}},winResultPanel:{obj:null,open:function(n,a){n=n||null,l.panels.drawingPanel.obj&&l.panels.drawingPanel.obj.remove();var t=this,i="确认",s=(function(e){var n="<p>很遗憾，此次您没有中奖。</p>";return e?1==e.id?winGameTexts("小电视","small-tv-gift-1",e.num):2==e.id?winGameTexts("蓝白胖次道具","small-tv-gift-2 gift-img gift-10",e.num):3==e.id?winGameTexts("B坷垃","small-tv-gift-3 gift-img gift-3",e.num):4==e.id?winGameTexts("喵娘","small-tv-gift-4 gift-img gift-4",e.num):5==e.id?winGameTexts("便当","small-tv-gift-5 gift-img gift-9",e.num):6==e.id?winGameTexts("银瓜子","small-tv-gift-6",e.num):7==e.id?winGameTexts("辣条","small-tv-gift-7 gift-img gift-1",e.num):n:n})(n);a>0&&(s+='<p class="text-center" style="color: red">不填写地址视作放弃领奖</p>',i="填写收奖信息"),t.obj&&t.obj.remove(),t.obj=new livePopup({title:"获奖结果",html:s,type:"info",width:300,button:{confirm:i},onConfirm:function(){a>0&&e.open("//link.bilibili.com/p/center/index#/user-center/my-info/award","_blank"),t.obj.remove()},onCancel:function(){t.obj.remove()}})}},commonWinResultPanel:{obj:null,open:function(e,n,a,t){var i=new livePopup({title:"恭喜获奖",html:'<div class="common-win-result-panel"><p>感谢<span style="color: #ff8e29">'+n+"</span>提供本次奖品</p><p>"+a+'<span style="color: #646c7a">获得了'+t+"</span></p></div>",type:"info",width:300,button:{confirm:"查看我的奖品"},onConfirm:function(){l.events.showRewardPanel(e),i.remove()},onCancel:function(){i.remove()}})}},drawingPanel:{obj:null,open:function(){var e=this;e.obj&&e.obj.remove(),e.obj=new livePopup({title:"正在抽奖",html:'<div class="drawing-pic"></div><p class="text-center">系统正在抽奖...</p>',type:"info",width:300,onConfirm:function(){e.obj.remove()},onCancel:function(){e.obj.remove()}})}},commonPanel:function(e,n){var a=new livePopup({title:e,content:n,type:"info",width:300,onCancel:function(){a.remove()}})}},apis:{getSmallTV:function(n,a){var t=(function(){var a={};return n?a.id=n:0,a.roomid=e.ROOMID,a})();$.ajax({url:"/SmallTV/index",type:"GET",data:t,cache:!1,dataType:"JSON",success:function(e){a&&a(e)}})},joinSmallTV:function(n,a){$.ajax({url:"/SmallTV/join",type:"GET",data:{roomid:e.ROOMID,id:n},cache:!1,dataType:"JSON",success:function(e){a&&a(e)}})},getReward:function(e,n){$.ajax({url:"/SmallTV/getReward",type:"GET",data:{id:e},cache:!1,dataType:"JSON",success:function(e){n&&n(e)}})}}};l.init();var s=setInterval((function(){e.protocol&&(e.protocol.TV_START=function(n){n.data.msg.rnd!=e.DANMU_RND&&(n.data.msg.msg=n.data.msg.msg.replace(/\:\?/g," "),i.$fire("all!addSysMsg",n.data.msg)),n.data.id>0&&(t.find(".small-tv-tips").remove(),i.curPanelId=n.data.id,i.curPanelTime=n.data.dtime,i.drawPanels.push({id:n.data.id,dtime:n.data.dtime}),a([n.data],[]),i.isShowPanel=!0,l.events.updatePanelsArr())},e.protocol.TV_END=function(e){e.data.id>0&&l.panels.commonWinResultPanel.open(e.data.id,e.data.sname,e.data.uname,e.data.giftName)},clearInterval(s))}),1e3)};
},{"../../../../common/components/live-widget/live-popup/live-popup":146,"../../../../common/functions/func-live-quick-login/live-quick-login":154}],206:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),guardCtr=avalon.define({$id:"guardCtrl"}),Guard=(function(){function e(){(0,_classCallCheck3.default)(this,e),this.urls={heart:"/guard/heart"},this.guardLevel=GUARD,this.isNotice=1===GUARD_INFO.notice_status,this.isSendHeart=GUARD_INFO.heart_status,this.heartTime=GUARD_INFO.heart_time,this.init()}return(0,_createClass3.default)(e,[{key:"init",value:function(){this.isSendHeart&&(this.heart(),this.setHeart()),1===this.guardLevel&&this.isNotice&&this.guardSys()}},{key:"setHeart",value:function(){var e=this;setTimeout((function(){e.heart()}),1e3*this.heartTime)}},{key:"heart",value:function(){var e=this,t=this.ajaxHeart();t.done((function(t){t.data.guard_stop||e.setHeart()})).fail((function(){e.setHeart()}))}},{key:"ajaxHeart",value:function(){var e=this.urls.heart,t={ruid:MASTERID};return $.ajax({type:"get",url:e,data:t,dataType:"json"})}},{key:"guardSys",value:function(){var e={cmd:"GUARD_MSG",msg:"欢迎 :?总督 "+UNAME+":? 登船"};setTimeout((function(){LivePlayer.noticeGuard(e)}),2e3)}}]),e})();module.exports=function(){return new Guard};
},{"babel-runtime/helpers/classCallCheck":15,"babel-runtime/helpers/createClass":16}],207:[function(require,module,exports){
"use strict";var GUARD_CONFIG={level:{1:"总督",2:"提督",3:"舰长"},topicsUrl:"/hd/guard",buyUrl:"//link.bilibili.com/p/center/index#/voyager?ruid="+MASTERID};module.exports=GUARD_CONFIG;
},{}],208:[function(require,module,exports){
"use strict";var appConfig=require("../../../common/app-config/app-config"),lazyInit=require("../../../common/functions/func-avalon-lazy-init/lazy-init"),livePopup=require("../../../common/components/live-widget/live-popup/live-popup"),liveToast=require("../../../common/components/live-widget/live-toast/live-toast"),liveQuickLogin=require("../../../common/functions/func-live-quick-login/live-quick-login"),avalonSetNum=require("../../../common/functions/func-setnum-avalon/avalon-set-num"),randomEmoji=require("../../../common/functions/func-random-emoji/random-emoji"),liveCertificationHint=require("../../../common/components/live-certification-hint/live-certification-hint"),attentionLimitPopup=require("../../room-javascripts/room.funcs/func.attention-limit-popup.js");module.exports=function(t,e){function o(e,o){function i(){$.ajax({url:"/liveact/live_status_mng",type:"POST",data:{status:e,roomid:ROOMID},dataType:"JSON",timeout:appConfig.appConfig.xhrTimeout,success:function(i){return i.code==-801?void liveCertificationHint.roomExpired():i.code==-80?void liveCertificationHint.trailClosed():t.AREAID===-1?(liveToast($(".live-status-switcher .live-switcher"),"先选择分区才能直播哦~","caution"),void setTimeout((function(){a.$fire("all!showRoomEditDialog")}),1e3)):0==i.code||i.code==-803?(i.code==-803&&liveCertificationHint.timingHint(i.data.try_time),t._status=1===e?"on":"off",0===e?t.AREAID=-1:0,a.roomInfo.roundStatus=i.data.status,void(o&&o())):void n(i.msg)},error:function(t){n(t.statusText)}})}function n(t){livePopup({title:"直播开启失败",html:"<p>直播开启失败，请稍后再试，如还有问题，请联系客服，真的很抱歉 > <</p><p>错误详情: "+t+"</p>",type:"info"})}1!==t.ISANCHOR?o&&o():(0===e&&(a.liveOffPanel.text="女儿祈祷中……"),i())}function i(){function e(){if(r)r.open();else{var e="https://live.bilibili.com/"+t.ROOMURL,o="https://static.hdslb.com/live-static/swf/LivePlayerEx_1.swf?room_id="+t.ROOMID+"&cid="+t.ROOMID+"&state=LIVE",i='<div class="share-panel clear-float" style="padding-top: 10px; height: 80px"><div class="left-part float-left"><div class="room-link"><span class="dp-inline-block" style="width: 75px">直播间地址：</span><input type="text" id="share-room-link" class="live-input" readonly aria-readonly="true" value="'+e+'"><button id="share-room-copy" class="live-btn default" data-clipboard-text="'+e+'">复制</button></div><div class="flash-link" style="margin-top: 16px"><span class="dp-inline-block" style="width: 75px">Flash 地址：</span><input type="text" id="share-flash-link" class="live-input" readonly aria-readonly="true" value="'+o+'"><button id="share-flash-copy" class="live-btn default" data-clipboard-text="'+o+'">复制</button></div></div><div class="right-part p-relative float-right" style="top: -25px;"><p class="text-center" style="margin: 5px">扫码分享</p><div id="share-qr-code" style="width: 70px; height: 70px; padding: 3px; border: 1px solid #4fc1e9; border-radius: 5px"></div></div><div class="external-link"><div id="share-qzone" class="link share-btn qzone"></div><div id="share-weibo" class="link share-btn weibo"></div></div></div>';r=livePopup({title:"喊小伙伴一起来看",html:i,type:"info",button:!1,width:450,initFunc:function(){l?void 0:l=new QRCode($("#share-qr-code")[0],{text:e,width:70,height:70}),[$("#share-room-copy")[0],$("#share-flash-copy")[0]].forEach((function(t){new ZeroClipboard(t).on("aftercopy",(function(e){liveToast(t,"复制成功，快去分享吧！"+randomEmoji.happy(),"success",!0)}))}))}});var a={url:t.location.href,title:ROOMTITLE+"的直播间",pic:"",nickname:ANCHOR_NICK_NAME,desc:ROOMTITLE+"的直播间",summary:" ",shortTitle:document.title,searchPic:!1};$("#share-qzone").off("click").on("click",(function(){n("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?",{url:a.url||"",showcount:1,desc:a.desc||"",summary:a.summary||"",title:"#哔哩哔哩生放送#　"+(a.weiboTag||"")+(a.title||"")+"　播主："+(a.nickname||"")+"，正在哔哩哔哩进行直播，还不快来一起嗨！！",site:"哔哩哔哩",pics:a.pic||"",style:"203",width:98,height:22})})),$("#share-weibo").off("click").on("click",(function(){n("http://service.weibo.com/share/share.php?",{url:a.url,type:"3",count:"1",appkey:a.appkey&&a.appkey.weibo?a.appkey.weibo:"2841902482",title:"#哔哩哔哩生放送#　"+(a.weiboTag||"")+(a.title||"")+"　播主："+(a.nickname||"")+"，正在哔哩哔哩进行直播，还不快来一起嗨！！",pic:a.pic||"",searchPic:a.searchPic!==!1,ralateUid:"",language:"zh_cn",rnd:(new Date).valueOf()})}))}}var o="//static.hdslb.com/live-static/libs/";t.QRCode&&t.ZeroClipboard?e():$.when(!t.QRCode&&$.getScript(o+"qr-code/qrcode.min.js"),!t.ZeroClipboard&&$.getScript(o+"zero-clipboard/ZeroClipboard.min.js")).done(e)}function n(e,o){var i=[];for(var n in o)i.push(n+"="+encodeURIComponent(o[n]||""));var a=e+i.join("&");return t.open(a,"","width=700, height=680, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no"),!1}var a=null;avalon.ready((function(){function n(t){return isNaN(parseInt(t,10))?consoleText.warn("[Warn] 房间送礼数值无法转换为数字类型: giftReceivedExec, "+t):void(l?a.roomInfo.giftReceived=t:(avalonSetNum(t,a.roomInfo.giftReceived,"headInfoCtrl.roomInfo.giftReceived"),l=!0))}t.ISATTENTION=parseInt(t.ISATTENTION,10);var r=$("#report-upload-image-btn")[0];a=avalon.define({$id:"headInfoCtrl",anchorInfo:{UID:e.data.MASTERID,nickname:e.data.ANCHOR_NICK_NAME,level:e.data.USER_LEVEL.level,rank:e.data.USER_LEVEL.rank,nextScore:0,levelProgress:"0%"},roomInfo:{title:e.data.ROOMTITLE,area:e.data.AREAID,liveStatus:"on",roundStatus:"PREPARING",viewerCount:0,favourite:0,giftReceived:0},linkQrCode:{show:!1,out:!1,showFunc:function(t){t.stopPropagation();var e=a.linkQrCode;t.target||t.srcElement;clearTimeout(e.outTimeout),clearTimeout(e.outTimeout2),e.out=!1,e.show=!0},hideFunc:function(){var t=a.linkQrCode;t.outTimeout=setTimeout((function(){t.out=!0,t.outTimeout2=setTimeout((function(){t.show=!1,t.out=!1,t=null}),250)}),300)}},anchorInfoPanel:{allowRequest:!0,show:!1,out:!1,outTimeout:null,outTimeout2:null,loaded:!1,showFunc:function(e){e.stopPropagation();var o=a.anchorInfoPanel,i=e.target||e.srcElement;clearTimeout(o.outTimeout),clearTimeout(o.outTimeout2),o.out=!1,o.show=!0,o.allowRequest?$.post("/user/getMasterInfo",{uid:t.MASTERID},null,"JSON").done((function(t){if(o.loaded=!0,"REPONSE_OK"!==t.code)return void liveToast(i,"播主信息获取失败："+t.msg,"caution");a.anchorInfo.level=t.data.master_level,a.anchorInfo.rank=t.data.sort,a.anchorInfo.nextScore=parseInt(t.data.upgrade_score,10);var e=parseInt(t.data.next_score,10);o.allowRequest=!1,setTimeout((function(){a.anchorInfo.levelProgress=Math.floor((e-a.anchorInfo.nextScore)/e*100)+"%",e=null}),350)})).fail((function(t){liveToast(i,"播主信息获取失败："+t.statusText,"error"),o.loaded=!0})):o.loaded=!0},hideFunc:function(){var t=a.anchorInfoPanel;t.outTimeout=setTimeout((function(){t.out=!0,t.outTimeout2=setTimeout((function(){t.show=!1,t.out=!1,t.loaded=!1,t=null}),250)}),300)}},report:{show:!1,out:!1,outTimeout:null,reason:null,imageLink:null,permission:!0,statusText:"您还没有选择图片.",openPanel:function(){liveQuickLogin(),a.report.permission&&(a.report.show=!0,a.report.permission=!1)},confirm:function(e){function o(t){liveToast(r,"举报信息提交失败："+t+"，请您稍后再试或联系客服，实在抱歉 > <","caution")}if("keyup"!==e.type||13===e.keyCode)return a.report.imageLink&&a.report.reason?void $.post("/liveact/report_room",{room_id:t.ROOMID,picUrl:a.report.imageLink,reason:a.report.reason},null,"JSON").done((function(t){return 0!=t.code?o(t.msg):(liveToast(r,"您已成功举报, 感谢您的支持！"+randomEmoji.happy(),"success"),void a.report.cancel())})).fail((function(t){o(t.statusText)})):void liveToast(r,"请提供举报理由与举报截图后再上传哦! "+randomEmoji.happy())},cancel:function(){a.report.out=!0,setTimeout((function(){a.report.reason=null,a.report.imageLink=null,a.report.statusText="您还没有选择图片.",a.report.permission=!0,a.report.out=!1,a.report.show=!1}),380)},selectImage:function(){$("#report-image").click()},uploadImage:function(){var e=$("#report-image")[0].files[0];if(e){if("image/jpeg"!==e.type&&"image/jpg"!==e.type&&"image/png"!==e.type)return void liveToast(r,"请上传 PNG 或 JPG 的图片~ "+randomEmoji.helpless());if(e&&e.size>1048576)return void liveToast(r,"图片请不要超过 1MB 哦! "+randomEmoji.sad());a.report.statusText="图片上传中, 请稍后...";var o=new FormData;o.append("fileUp",e),consoleText.log(e),consoleText.log(o),$.ajax({xhr:function e(){var e=new t.XMLHttpRequest;return e.upload.addEventListener("progress",(function(t){a.report.statusText=t.lengthComputable&&"上传中："+t.loaded/t.total*100+"%",a.report.statusText=t.lengthComputable&&t.loaded/t.total===1&&"举报图片上传完毕, 您可以提交了! "+randomEmoji.happy()}),!1),e},url:"//live.bilibili.com/pic/upload",type:"POST",data:o,processData:!1,contentType:!1,success:function(t){var e=t.toString().match(/http:\/\/.*\|/);if(consoleText.log(e),e)a.report.imageLink=e[0].slice(0,e[0].length-1);else{var o="请确保网络通畅与图片类型为 PNG 或 JPG后重试.";liveToast($("#report-upload-image-btn"),o,"caution"),a.report.statusText=o,a.report.imageLink=null}},error:function(t){consoleText.log(appConfig.consoleText.error+"举报图片上传失败:"),consoleText.log(t.statusText),liveToast(r,"图片上传失败, 请稍后重试: "+t.statusText,"caution"),a.report.imageLink=null}})}}},share:i,liveStatusSwitch:function(){1===parseInt(ISANCHOR,10)&&("on"===t._status?(a.liveOffPanel.text="您确定关闭直播？",a.liveOffPanel.show=!0):a.$fire("liveStatus","on"))},liveOffPanel:{show:!1,out:!1,outTimeout:null,text:"您确定关闭直播？",hide:function(){a.liveOffPanel.out=!0,clearTimeout(a.liveOffPanel.outTimeout),a.liveOffPanel.outTimeout=setTimeout((function(){a.liveOffPanel.out=!1,a.liveOffPanel.show=!1}),380)}},offLive:function(){if(t.quizSystem&&t.quizSystem.betStatus)var e=livePopup({title:"当前竞猜尚未结束",html:'<div class="popup-content-container" style="margin: 30px; padding: 15px; border-radius: 10px; border: 1px dashed #F54178; color: #F54178; text-align: center; background-color: #FFE2E2;"><h3 style="margin-bottom: 10px; font-weight: 400;">当前竞猜尚未结束，您确定要关闭直播么？</h3><p>当您关闭直播后，请尽快在直播间或个人中心结算未结束的竞猜。若您在 5 分钟之内未进行结算，系统将强制流局并扣除您的信用值。</p></div>',button:{confirm:"确认关闭",cancel:"取消"},onConfirm:function(){a.$fire("liveStatus","off"),e.remove(),e=null}});else a.$fire("liveStatus","off")},attention:{isAttend:t.ISATTENTION,statusText:1===t.ISATTENTION?"已关注":"关注",fansCount:e.data.FANS_COUNT||0,attend:function(o){function i(){1===parseInt(t.ISATTENTION,10)?(a.attention.fansCount+=1,a.attention.statusText="已关注"):(a.attention.fansCount>0&&a.attention.fansCount--,a.attention.statusText="关注")}function n(){1===parseInt(t.ISATTENTION,10)?liveToast(r,"感谢关注！ "+randomEmoji.happy(),"success"):liveToast(r,"已悄悄地取消~ "+randomEmoji.helpless(),"info")}o.stopPropagation(),liveQuickLogin();var r=o.target||o.srcElement,l=1===t.ISATTENTION?0:1;$.ajax({url:"/liveact/attention",type:"POST",data:{token:$.cookie("LIVE_LOGIN_DATA")||"",uid:e.data.MASTERID,type:l},dataType:"JSON",success:function(e){if(attentionLimitPopup(e.code),0!=e.code)return void liveToast(r,e.msg+" "+randomEmoji.helpless());t.ISATTENTION=l,a.attention.isAttend=l;try{LivePlayer.attendStatus(l)}catch(t){}i(),n()},error:function(t){liveToast(r,"关注失败, 请稍后再试 "+randomEmoji.sad(),"caution")},timeout:appConfig.appConfig.xhrTimeout})},mouseover:!1,mouseenter:function(){a.attention.mouseover=!0},mouseleave:function(){a.attention.mouseover=!1}},roomEdit:function(){a.$fire("all!showRoomEditDialog")},liveManage:function(){a.$fire("all!showLiveManageDialog",{curTarget:"liveManage"})},blackManage:function(){a.$fire("all!showBlackDialog")}}),setTimeout((function(){a.roomInfo.liveStatus=e.data._status,a.roomInfo.roundStatus=e.data.LIVE_STATUS}),600),a.$watch("liveStatus",(function(t){var e=0,i="off";"on"!==t&&t!==!0||(e=1,i="on"),o(e,(function(){a.roomInfo.liveStatus=i,e?a.$fire("all!showStreamCode"):a.liveOffPanel.hide()}))})),a.$watch("liveStatusButton",(function(e){var o="off",i="off",n="PREPARING",r="ROUND";"on"===e||e===!0?(o="on",i="on",n="LIVE",r=!1):"round"===e?n="ROUND":r="PREPARING",a.roomInfo.liveStatus=o,t._status=i,a.$fire("all!updateLiveStatus",n),r&&(a.roomInfo.roundStatus=r)})),a.$watch("liveCutOff",(function(){UID==MASTERID&&o(0)})),a.$watch("setViewerCount",(function(t){return isNaN(parseInt(t,10))?consoleText.warn("[Warn] 房间人数变量无法转换为数字类型: setViewerCount, "+t):void avalonSetNum(t,a.roomInfo.viewerCount,"headInfoCtrl.roomInfo.viewerCount")})),t.liveRoomFuncs.giftReceived=n,a.$watch("giftReceived",n);var l=!1;lazyInit(document.getElementById("head-info-panel"),a,(function(){lazyInit(document.getElementById("report-panel"),a),a.$fire("giftReceived",e.data.RCOST),"#upload-cover"==t.location.hash&&a.$fire("all!showLiveManageDialog",{curTarget:"coverManage"})}))}));var r=null,l=null};
},{"../../../common/app-config/app-config":137,"../../../common/components/live-certification-hint/live-certification-hint":140,"../../../common/components/live-widget/live-popup/live-popup":146,"../../../common/components/live-widget/live-toast/live-toast":147,"../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../common/functions/func-random-emoji/random-emoji":155,"../../../common/functions/func-setnum-avalon/avalon-set-num":157,"../../room-javascripts/room.funcs/func.attention-limit-popup.js":247}],209:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/sidebar-ctrl")()};
},{"./javascripts/sidebar-ctrl":210}],210:[function(require,module,exports){
"use strict";function leftSidebarStatus(){if(localStorage){var e=Date.now(),o=localStorage.getItem("lastVisitTime");if(!o||e-o>=864e5)return setVisitTime(e),void sideBarOpen();var t=localStorage.getItem("sidebarStatus");"open"===t?sideBarOpen():sideBarClose(),e=null,t=null}}function setVisitTime(e){localStorage.setItem("lastVisitTime",e)}function sideBarOpen(){var e="Firefox"===window.USERBROWSER?"sidebar-left-open do-not-move":"sidebar-left-open";$(".body-container").addClass(e),localStorage.setItem("sidebarStatus","open"),roomSidebarLeftVM.roomSidebarLeftStatus=!0,roomSidebarLeftVM.$fire("all!initFollowingList"),roomSidebarLeftVM.$fire("all!initCapsuleToyData")}function sideBarClose(){var e="Firefox"===window.USERBROWSER?"sidebar-left-open do-not-move":"sidebar-left-open";$(".body-container").removeClass(e),localStorage.setItem("sidebarStatus","closed"),roomSidebarLeftVM.roomSidebarLeftStatus=!1}var wish=require("../../wish/intro.js")(),roomSidebarLeftVM=null;module.exports=function(){return roomSidebarLeftVM=avalon.define({$id:"roomSidebarLeftCtrl",newTask:!1,roomSidebarLeftStatus:!0,toggleSidebarLeft:function(e){e.target!=$(".small-btn.mission")[0]&&e.target!=$(".small-btn.sign")[0]&&e.target!=$(".small-btn.capsule")[0]&&e.target!=$(".small-btn.bilibili-link")[0]&&(roomSidebarLeftVM.roomSidebarLeftStatus=!roomSidebarLeftVM.roomSidebarLeftStatus)},clickWish:function(){wish.show()},openTask:function(){avalon.vmodels.signUpCtrl.myTask()},openSign:function(){avalon.vmodels.signUpCtrl.openSignUpPopup()},openCapsule:function(){avalon.vmodels.capsuleToyCtrl.panel.open("tab-content-a")},hoverLinkQrCode:function(e,o){var t=$("#sidebar-link-qr-code-panel");o?t.show().css("top",e.clientY+$(document).scrollTop()-80):t.hide()}}),roomSidebarLeftVM.$watch("roomSidebarLeftStatus",(function(e){e?sideBarOpen():sideBarClose()})),roomSidebarLeftVM.$watch("toggleRoomSidebarLeft",(function(e){roomSidebarLeftVM.roomSidebarLeftStatus="boolean"==typeof e?e:!roomSidebarLeftVM.roomSidebarLeftStatus})),roomSidebarLeftVM},$((function(){$(".room-left-sidebar").find(".main-ctnr").perfectScrollbar(),setTimeout(leftSidebarStatus,500),$(".sidebar-section").on("click",".arrows",(function(){var e=$(this).parent().parent(".sidebar-section");e.hasClass("off")?e.removeClass("off"):e.addClass("off")}))}));
},{"../../wish/intro.js":232}],211:[function(require,module,exports){
"use strict";module.exports=function(){var i=$('<div class="body-popup-mask"><div class="mobile-popup"><div class="m-title">手机绑定提示</div><div class="m-close" id="m-close">X</div><div class="m-content"><div class="m-c-img m-auto"></div><div class="m-c-tips">需要绑定手机才可以进行下一步操作哦~</div></div><div class="m-btn-list m-auto clear-float"><a href="https://passport.bilibili.com/site/site.html" class="m-btn f-left m-confirm" id="m-confirm">确认</a><div class="m-btn f-left m-cancel" id="m-cancel">取消</div></div></div></div>'),s=$("body");s.append(i),s.on("click","#m-confirm, #m-cancel, #m-close",(function(){i.remove()}))};
},{}],212:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/my-attention.js")()};
},{"./javascripts/my-attention.js":213}],213:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify);require("perfect-scrollbar/jquery")($);var liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login"),isLogin=require("../../../../common/functions/is-login");module.exports=function(){function e(e){var t=new Date,i=new Date(t.getTime()+6e4),n=(0,_stringify2.default)(e);$.cookie("attentionData",n,{expires:i})}function t(e){0==e.code?(r.feedMode=e.data.open,r.count=e.data.count,e.data.open&&e.data.has_new&&(r.count=0,a=1,r.open=!0,r.$fire("all!toggleRoomSidebarLeft",!0),n())):clearInterval(o)}function i(){$.ajax({url:"//api.live.bilibili.com/feed/v1/feed/heartBeat",type:"GET",dataType:"JSONP",jsonp:"_cb",cache:!1,success:function(i){t(i),e(i)}})}function n(){$.ajax({url:r.userMode?"//api.live.bilibili.com/feed/v1/feed/getList?page="+a:"/feed/getRecommendList",type:"GET",dataType:r.userMode?"JSONP":"JSON",jsonp:"_cb",success:function(e){var t=$("#room-my-attention").find(".my-attention-body");1==a?(t.scrollTop(0),r.list=e.data.list):r.list=r.list.concat(e.data.list),r.hasMore=!!(e.data.list.length>9&&r.userMode)}})}var o=null,a=1,r=avalon.define({$id:"myAttentionCtrl",open:!1,list:[],hasMore:!1,feedMode:1,count:0,userMode:isLogin(),setFeedMode:function(){r.feedMode=1==r.feedMode?0:1,$.ajax({url:"//api.live.bilibili.com/feed/v1/feed/on",data:{open:r.feedMode},type:"POST",dataType:"JSON",success:function(e){r.feedMode=e.data.open}})},listItemsReady:function(){var e=$(this).parent(".my-attention-body");e.perfectScrollbar("update")},readMore:function(){liveQuickLogin(),window.open("//link.bilibili.com/p/center/index#/user-center/follow/1","_blank")}});r.$watch("initFollowingList",(function(){r.count=0,n()})),i();o=setInterval((function(){var e,n=$.cookie("attentionData");n?(e=$.parseJSON(n),t(e)):i()}),3e5),$((function(){var e=$("#room-my-attention").find(".my-attention-body");e.perfectScrollbar(),e.on("ps-y-reach-end",(function(){r.hasMore&&(r.hasMore=!1,a++,n())}))}))};
},{"../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../../common/functions/is-login":160,"babel-runtime/core-js/json/stringify":8,"perfect-scrollbar/jquery":112}],214:[function(require,module,exports){
"use strict";function xhrError(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}var permissionChcek=require("./services/srv.permission-check");module.exports=function(){permissionChcek().done((function(r){return 0!=r.code?xhrError(r.code,r.msg):void(r.data.isBet&&require("browserify-require-async/loader")(require,{urlRoot:"//static.hdslb.com/live-static/live-room/chunks/",rethrowError:!1})([{name:"./intro.async.js",hash:"0fee20373b",url:"6a04e32a44.js",__requireAsync:!0}],(function(e){e(r)})))})).fail((function(r){xhrError(r.status,r.statusText)}))};
},{"./services/srv.permission-check":215,"browserify-require-async/loader":19}],215:[function(require,module,exports){
"use strict";module.exports=function(){return $.ajax({url:"/bet/getRoomBet",type:"POST",data:{roomid:window.ROOMID},dataType:"JSON"})};
},{}],216:[function(require,module,exports){
"use strict";var GUARD_CONFIG=require("./../../guard/guardConfig"),liveQuickLogin=require("./../../../../common/functions/func-live-quick-login/live-quick-login"),view=avalon.define({$id:"guardRankCtr",url:"/guard/topList",list:[],top3:[],pageInfo:{page:1},isEmpty:!0,page:0,listHeight:122,listDefHeight:122,openBuy:!0,buyUrl:GUARD_CONFIG.buyUrl,guardConfig:GUARD_CONFIG,events:{mouseEnter:function(){this.mouseEvent("enter")},mouseLeave:function(){this.mouseEvent("leave")},mouseEnterGoBtn:function(t){this.mouseEvent("stop")},clickPre:function(){this.changePage("pre")},clickNext:function(){this.changePage("next")},clickBuy:function(){liveQuickLogin(),window.open(this.buyUrl+"&guard_level=1","_blank")}},init:function(){var t=this;this.bindContextInit(),this.$watch("refresh",(function(){t.page=1,t.getData(1,(function(){t.mouseEvent("leave")}))}))},bindContext:function(t,e){return function(){return e.apply(t,arguments)}},bindContextInit:function(){for(var t in this.ajaxFunc)this.ajaxFunc[t]=this.bindContext(this,this.ajaxFunc[t]);for(var e in this.events)this.events[e]=this.bindContext(this,this.events[e])},render:function(){},getDefHeight:function(){return this.isEmpty?100:this.listDefHeight},mouseEvent:function(t){var e=this;return"stop"===t?(clearTimeout(this.mouseEvent.tid),!1):(this.mouseEvent.tid&&clearTimeout(this.mouseEvent.tid),void(this.mouseEvent.tid=setTimeout((function(){var i=e.listDefHeight,n=0,a=e.isEmpty?0:89;e.isEmpty||("enter"===t?(i=i+20+48*Math.ceil(e.list.length/2),n=i+a):"leave"===t&&(n=i),e.listHeight=i,e.$fire("all!rommRankChangeHeight",n))}),200)))},changePage:function(t){var e=this,i=this.page,n=this.pageInfo.page;i="pre"===t?1===i?1:i-1:i===n?i:i+1,this.getData(i,(function(){e.mouseEvent("enter")}))},getData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this.ajaxData(t);n.done((function(n){e.list=n.data.list,e.top3=n.data.top3,e.pageInfo=n.data.info,e.page=t,e.isEmpty=0===e.top3.length,i()})).fail((function(){}))},ajaxData:function(t){var e=(this.pageInfo.page,this.url),i={roomid:ROOMID,page:t};return $.ajax({type:"get",data:i,dataType:"json",url:e})}});module.exports=function(){return view.init(),view};
},{"./../../../../common/functions/func-live-quick-login/live-quick-login":154,"./../../guard/guardConfig":207}],217:[function(require,module,exports){
"use strict";var quickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login"),lazyInit=require("../../../../common/functions/func-avalon-lazy-init/lazy-init"),guard=require("./guard")(),GUARD_CONFIG=require("../../guard/guardConfig"),view=avalon.define({$id:"roomRanks",data:{tabs:[]},listHeight:0,urls:{tabs:"/live/rankTab","seven-rank":"/gift/getTop","fans-rank":"/liveact/ajaxGetMedalRankList","room-admin":"/liveact/ajaxGetAdminList","round-list":"/live/getRoundList",events:"/eventRoom/roomRank"},curTab:"",typeKeys:{"seven-rank":"sevenRank","fans-rank":"fansRank","room-admin":"roomAdmin","round-list":"roundList"},guardConfig:GUARD_CONFIG,clickTab:function(t){var a=$(t.currentTarget),e=a.data("type"),n=a.data("listType");view.changeTab(e,n)},mouseLeave:function(t){var a=$(t.currentTarget),e=a.data("type"),n=a.data("noHover");view.changeHeight(e,"close",n)},mouseEnter:function(t){var a=$(t.currentTarget),e=a.data("type"),n=a.data("noHover"),i="round-list"==e?28:32;view.changeHeight(e,"open",n,i)},init:function(){var t=this;this.getTabs(),window.liveRoomFuncs.updateGiftTop=this.updateGiftTopExec,this.$watch("updateGiftTop",this.updateGiftTopExec),this.$watch("rommRankChangeHeight",(function(a){t.listHeight=a})),this.$watch("changeRoomRankTab",(function(a){t.changeTab(a)}))},sevenRank:{dataList:[],dataOwn:[],alllow:!0},fansRank:{dataList:[],dataOwn:[],alllow:!1,hinter:'播主还没有粉丝勋章，继续投喂"喂" TA 加油！(ง,,• ᴗ •,,)ง ✧'},roomAdmin:{dataList:[],dataOwn:[],alllow:!1},roundList:{dataList:[],dataOwn:[],alllow:!1},eventsList:[],eventsTypes:{},getTabs:function(){var t=this,a=this.ajaxGetTabsList();a.done((function(a){0===a.code&&(t.data.tabs=a.data,t.initEventData(),t.setDefTab())})).fail((function(){}))},setDefTab:function(){var t,a,e=this.data.tabs,n=null;$.each(e,(function(t,a){if(a.isFirst)return n=a,!1})),n=n||e[0],t=n.type,a=n.listType,this.changeTab(t,a)},getListHeight:function(t,a){var e=0;return e="guard"===t?guard.getDefHeight():"team"===a?120:100},initEventData:function(){var t=this;this.data.tabs.map((function(a){if(1===a.isEvent){var e=0;e=t.eventsList.push([])-1,t.eventsTypes[a.type]={i:e,eventType:a.eventType||"",len:0,apiPrefix:a.apiPrefix}}}))},isEvent:function(t){return void 0!==this.eventsTypes[t]},getRankData:function(){var t,a=this,e=this.curTab;return"guard"===e?void guard.$fire("refresh"):(t=this.ajaxGetRankData(),void t.done((function(t){var n=[],i=a.typeKeys[e];0===t.code&&(n="room-admin"===e?t.data:t.data.list||[],"room-admin"!==e&&"round-list"!==e&&(t.data.own.rank>10||t.data.own.rank==-1)?a[i].len=n.length+1:a[i].len=n.length,"round-list"===e&&(n=t.data.play_list,a[i].len=n.length),a[i].dataList=n,a[i].dataOwn=t.data.own||{},"fans-rank"===e&&0!=t.msg&&""!==t.msg&&(a[i].hinter="投喂一个 B 坷垃，勋章就能戴回家！ ε=ε=ε=ε=(ノ≧∇≦)ノ"))})).fail((function(t){})))},getEventRoomRank:function(t){var a=this,e=this.curTab,n=this.ajaxEventRoomRank(e,t);n.done((function(t){if(0===t.code){var n=a.eventsTypes[e].i,i=t.data.type,s="team"===i?t.data.list:t.data;s.type=e,s.listType=i,s.eventType=a.eventsTypes[e].eventType,a.eventsTypes[e].len=s.length,a.eventsList.set(n,s)}})).fail()},changeHeight:function(t,a,e,n){var i=0,s=!1,n=n||32;e||("open"===a?(s=this.isEvent(t),i=s?this.eventsTypes[t].len:view[this.typeKeys[this.curTab]].len,this.listHeight=i*n,!s&&view[this.typeKeys[this.curTab]].allow&&(this.getRankData(),view[this.typeKeys[this.curTab]].allow=!1)):this.listHeight=100)},ajaxGetTabsList:function(){var t=this.urls.tabs;return $.ajax({type:"get",url:t,data:{roomid:ROOMID},dataType:"json"})},ajaxGetRankData:function(){var t=this.urls[this.curTab],a={roomid:window.ROOMID};return $.ajax({type:"get",url:t,dataType:"json",data:a,cache:!1})},ajaxEventRoomRank:function(t,a){var e="/"+a+"/roomRank",n={roomid:ROOMID};return $.ajax({type:"get",url:e,data:n,dataType:"json"})},changeTab:function(t,a){var e=void 0!==this.eventsTypes[t];this.curTab!==t&&(this.curTab=t,e?this.getEventRoomRank(this.eventsTypes[t].apiPrefix):this.getRankData(),this.listHeight=this.getListHeight(t,a))},updateGiftTopExec:function(t){var a;if("[object Array]"!==Object.prototype.toString.call(t))return void consoleText.log(appConfig.consoleText.error+"排行榜数据不合法.");if(a=t.length,!(a<1)){a<=3&&(view.sevenRank.allow=!0),view.sevenRank.dataList=t;for(var e in t){var n=t[e];if(n.uid===window.UID){view.sevenRank.dataOwn.rank=e;break}}}},loginTest:function(){quickLogin()}});lazyInit(document.getElementById("rank-list-ctnr"),view),module.exports=function(){view.init()};
},{"../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../../../../common/functions/func-live-quick-login/live-quick-login":154,"../../guard/guardConfig":207,"./guard":216}],218:[function(require,module,exports){
"use strict";require("./javascripts/main")();
},{"./javascripts/main":217}],219:[function(require,module,exports){
"use strict";function requestData(){var e=window.ROOMID||0;return $.getJSON("/live/getHotPicList/"+e)}function initDrawComponent(e){avalon.component("live:drawingrecommend",{$replace:!0,show:!1,roomID:window.ROOMID||0,username:window.ANCHOR_NICK_NAME||"--",externalLink:"//h.bilibili.com/member?mod=space&uid="+window.MASTERID+"&act=p_index",dataList:[],requestURL:"/live/getHotPicList",mouseEnter:function(){var e=$(this).find(".pic-large-ctnr");e.length||$(this).append(largePics($(this).attr("data-img"),$(this).attr("data-title"),$(this).attr("data-desc"),$(this).attr("data-rank"))),e.show()},mouseLeave:function(){$(this).find(".pic-large-ctnr").fadeOut(200)},$ready:function(t,i){t.dataList=e.data,t.show=!0,require("../recommend-section").showRecommendSection()},$template:'<div class="recommend-drawing-pics move-in-left" ms-visible="show"><div class="section-header clear-float"><h2 class="section-title" ms-text="username + \'的绘画作品\'"></h2><a ms-attr-href="externalLink" target="_blank" class="more-link">查看更多</a></div><div class="content-container clear-float"><a class="pic-item bg-cover bg-center dp-inline-block p-relative border-box" ms-mouseenter="mouseEnter" ms-mouseleave="mouseLeave" ms-repeat-item="dataList" ms-attr-href="item.url" target="_blank" ms-css-background-image="\'url(\' + item.thumbnail + \')\'" ms-attr-data-img="item.m_pic" ms-attr-data-title="item.title" ms-attr-data-desc="item.description" ms-attr-data-rank="item.total_rate"></a></div></div>'})}function largePics(e,t,i,a){var n=utils.createElement("div");n.className="pic-large-ctnr p-absolute";var r=utils.createElement("img");r.src=e,r.title=t;var s=_createElement("div","merge w-100 p-absolute"),o=_createElement("h4","pic-title",t),c=_createElement("span","support-text",i),l=_createElement("div","pic-rank",'<i class="live-icon favourite v-middle"></i><span class="v-middle">'+a+"</span>"),m=_createElement("div","loading-progress","<div class='tv-image'></div>");return r.onload=function(){$(r).show(),$(m).fadeOut(300,(function(){$(this).remove()}))},[r,s,o,c,l,m].forEach((function(e){n.appendChild(e)})),n}function _createElement(e,t,i){var a=utils.createElement(e);return t&&(a.className=t),i&&(a.innerHTML=i),a}var utils=require("/Users/Felix/Bilibili/Repo/live-static/src/utils");module.exports=function(){requestData().done((function(e){return 0!=e.code?utils.console.warn("用户绘画作品数据获取失败","code: "+e.code):void(e.data.length&&initDrawComponent(e))})).fail((function(e){utils.console.error("用户绘画作品数据获取失败",e.statusText)}))};
},{"../recommend-section":220,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],220:[function(require,module,exports){
"use strict";module.exports.showRecommendSection=function(){$("#recommend-section").show()};
},{}],221:[function(require,module,exports){
"use strict";var lazyInit=require("../../../../common/functions/func-avalon-lazy-init/lazy-init"),console=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").console;module.exports=function(e){avalon.ready((function(){if(e.ROOMID&&e.ANCHOR_NICK_NAME){var o=avalon.define({$id:"recommendVideoCtrl",title:e.ANCHOR_NICK_NAME+"的视频",spaceLink:"//space.bilibili.com/"+e.MASTERID,show:!1,videoList:[],mouseEnter:function(e){var o=e.target||e.srcElement;$(o).find(".video-props").addClass("hover"),$(o).find(".video-merge").addClass("hover")},mouseLeave:function(e){var o=e.target||e.srcElement;$(o).find(".video-props").removeClass("hover"),$(o).find(".video-merge").removeClass("hover")}});lazyInit($("recommend-videos")[0],o,(function(){e.NEED_VIDEO&&$.getJSON("/live/getVideoList/"+e.ROOMID).done((function(e){return 0!=e.code?console.warn("服务器返回数据错误",e.msg):void(e.data.length&&(o.videoList=e.data,o.show=!0,require("../recommend-section").showRecommendSection()))})).fail((function(e){console.error("推荐视频获取失败",e.statusText)}))}))}}))};
},{"../../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../recommend-section":220,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],222:[function(require,module,exports){
"use strict";module.exports=function(e){return e>=1e4&&(e=(e/1e4).toFixed(1)+"万"),e};
},{}],223:[function(require,module,exports){
"use strict";var livePopup=require("../../../common/components/live-widget/live-popup/live-popup"),liveToast=require("../../../common/components/live-widget/live-toast/live-toast"),randomEmoji=require("../../../common/functions/func-random-emoji/random-emoji"),btnTextInterval=null;module.exports=function(e,t){function o(e){function o(){function o(e){"0"==e.code?(i.remove(),a(e)):liveToast(i.confirmBtn,e.msg,!0)}function r(e){livePopup({title:"订单状态查询错误",html:"<p>您的订单状态查询失败，请您刷新页面并到个人中心检查您的金额，如果充值失败，请联系客服，真的非常抱歉！> <<br/><br/>失败原因: "+e.statusText+"</p>",width:"350px",type:"alert",button:{confirm:"真的很抱歉 > <"}})}function a(e){livePopup({title:"购买完成惹！",content:"您已经成功购买 "+e.data.orderGold+" 金瓜子，恭喜恭喜！"+randomEmoji.happy(),width:"300px",button:{confirm:"完成完成！"},type:"info"}),t.$fire("all!updateCurrency",{gold:e.data.gold}),t.$fire("getBp")}n.remove();var i=livePopup({title:"正在支付中……",content:'请在支付完毕后点击下方的 "支付完成" 按钮喔！'+randomEmoji.happy(),width:"350px",type:"info",button:{confirm:"支付完成"},onConfirm:function(){$.ajax({url:"/payCenter/orderStatus",type:"GET",data:{order:e.orderNo},dataType:"JSON",success:o,error:r})}})}var n=livePopup({title:"BP 不够惹",content:"您的 B 币余额不足，要不要充一点？"+randomEmoji.happy(),button:{confirm:"葱！",cancel:"先不葱了~"},width:"300px",onConfirm:function(){window.open(e.cashierURL),o()},onCancel:function(){t.$fire("all!updateCurrency"),t.$fire("getBp")}})}var n=e.target||e.srcElement,r=parseInt(t.data.charge.buyCount,10);return r<=0||isNaN(r)?void liveToast(n,"请输入大于 0 的数字喔 "+randomEmoji.helpless(),!0):(function(){t.doms.charge.btnText="正在兑换中.";var e=1;btnTextInterval=setInterval((function(){return e>=6?(t.doms.charge.btnText="正在兑换中",void(e=0)):(t.doms.charge.btnText+=".",void e++)}),500)}(),void $.ajax({url:"/payCenter/quickPay",type:"GET",data:{bpNum:r},dataType:"JSON",success:function(e){if(clearInterval(btnTextInterval),t.doms.charge.btnText="立刻购买",0==e.code)t.events.bpExchangeSuccess(),liveToast(n,"葱值成功！"+randomEmoji.happy(),"success",!0);else if(e.code==-400){var r={orderNo:e.data.order,cashierURL:e.data.cashier_url};o(r)}else liveToast(n,e.msg,"info",!0)},error:function(e){clearInterval(btnTextInterval),t.doms.charge.btnText="立刻购买",liveToast(n,"与服务器通信失败，请稍后再试 > <","error")}}))};
},{"../../../common/components/live-widget/live-popup/live-popup":146,"../../../common/components/live-widget/live-toast/live-toast":147,"../../../common/functions/func-random-emoji/random-emoji":155}],224:[function(require,module,exports){
"use strict";var vm=avalon.define({url:"/Exchange/getExchangeStatus",init:function(){this.getData()},getData:function(){var t=this.ajaxGetData();t.done((function(t){0===t.code&&vm.$fire("all!exchangeCoinConfig",t.data)})).fail()},ajaxGetData:function(){return $.ajax({url:this.url,type:"get",dataType:"json"})}});module.exports=function(){return vm.init(),vm};
},{}],225:[function(require,module,exports){
"use strict";var liveToast=require("../../../common/components/live-widget/live-toast/live-toast"),livePopup=require("../../../common/components/live-widget/live-popup/live-popup"),randomEmoji=require("../../../common/functions/func-random-emoji/random-emoji"),liveQuickLogin=require("../../../common/functions/func-live-quick-login/live-quick-login");module.exports={exchangeViaGold:function(e,o){liveQuickLogin();var i=e.target||e.srcElement,n=parseInt(o.data.exchange.count.gold,10);return isNaN(n)||n<1?void liveToast(i,"请输入正确的数量哦 "+randomEmoji.helpless(),!0):void $.ajax({url:"/gold/goldToSilver",type:"GET",data:{cgold:n},dataType:"JSON",success:function(e){if(0==e.code)liveToast(i,"已成功兑换 "+e.data.csilver+" 银瓜子！"+randomEmoji.happy(),"success"),o.$fire("all!updateCurrency",{gold:e.data.gold,silver:e.data.silver});else if(e.code==-400)var n=livePopup({title:"金瓜子不够惹~",content:"您的金瓜子不够了，要不要充一点？"+randomEmoji.helpless(),button:{confirm:"葱！",cancel:"先不葱了~"},width:"320px",onConfirm:function(){o.$fire("showExchange","charge"),n.remove(),n=null}});else liveToast(i,e.msg||"兑换出现问题，还请稍后再试，一定会好的……"+randomEmoji.sad(),"caution",!0)},error:function(e){var o=livePopup({title:"呜~~~……",html:"<p>兑换出现问题，可能是网络不通畅，也可能是炸了 "+randomEmoji.sad()+"，还请您稍后再试… 实在很抱歉 "+randomEmoji.sad()+"<br>错误原因: "+e.statusText+"</p>",type:"alert",width:300,onConfirm:function(){o.remove(),o=null}})}})},exchangeViaCoin:function(e,o){liveQuickLogin();var i=e.target||e.srcElement,n=parseInt(o.data.exchange.count.coin,10);return isNaN(n)||n<0?void liveToast(i,"请输入正确的数量哦 "+randomEmoji.helpless(),!0):void $.ajax({url:"/exchange/coin2silver",type:"POST",data:{coin:n},dataType:"JSON",success:function(e){return 0!=e.code?void liveToast(i,e.msg,"caution",!0):(liveToast(i,"成功兑换 "+e.data.silver+" 银瓜子！"+randomEmoji.happy(),"success",!0),void o.$fire("all!updateCurrency"))},error:function(e){var o=livePopup({title:"呜~~~……",html:"<p>兑换出现问题，可能是网络不通畅，也可能是炸了 "+randomEmoji.sad()+"，还请您稍后再试… 实在很抱歉 "+randomEmoji.sad()+"<br>错误原因: "+e.statusText+"</p>",type:"alert",width:300,onConfirm:function(){o.remove(),o=null}})}})}};
},{"../../../common/components/live-widget/live-popup/live-popup":146,"../../../common/components/live-widget/live-toast/live-toast":147,"../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../common/functions/func-random-emoji/random-emoji":155}],226:[function(require,module,exports){
"use strict";var lazyInit=require("../../../common/functions/func-avalon-lazy-init/lazy-init"),seedExchange=require("./exchange"),charge=require("./charge"),exchangeCoinConfig=require("./exchange-coin-config");module.exports=function(){avalon.ready((function(){function e(e){o.doms[e].out=!0,setTimeout((function(){o.doms[e].show=!1,o.doms[e].out=!1}),380)}function n(e){charge(e,o)}var o=avalon.define({$id:"seedExchangeCtrl",doms:{exchange:{out:!1,show:!1,outTimeout:null,open:function(){o.$fire("showExchange","exchange"),o.doms.noSeed.close()},close:function(){e("exchange")},panelNow:"gold",panelSwitch:function(e){o.doms.exchange.panelNow=e}},charge:{out:!1,show:!1,outTimeout:null,open:function(){o.$fire("showExchange","charge"),o.doms.noSeed.close()},close:function(){e("charge")},btnText:"立刻购买"},noSeed:{out:!1,show:!1,outTimeout:null,close:function(){e("noSeed")}}},data:{account:{gold:0,silver:0,biliCoin:0,isNeverRecharge:!1},exchange:{count:{gold:"",coin:""}},exchangeCoinConfig:{normalMax:0,normalFee:0,normalRate:0,vipMax:0,vipFee:0,vipRate:0},charge:{myBp:0,buyCount:""}},events:{exchange:{viaGold:function(e){seedExchange.exchangeViaGold(e,o)},viaCoin:function(e){seedExchange.exchangeViaCoin(e,o)}},buyGold:n,bpExchangeSuccess:function(){o.$fire("all!updateCurrency"),o.$fire("getBp")}}});o.$watch("showExchange",(function(e){o.doms[e].show=!0,o.$fire("all!updateCurrency"),"charge"===e&&o.$fire("getBp")})),o.$watch("noSeed",(function(){o.$fire("showExchange","noSeed")})),o.$watch("getBp",(function(){$.ajax({url:"/payCenter/getBp",type:"GET",cache:!1,dataType:"JSON",timeout:5e3,success:function(e){0==e.code&&(o.data.charge.myBp=e.data.bp.bp)},error:function(e){}})})),o.$watch("fillCurrency",(function(e){o.data.account.gold=e.gold,o.data.account.silver=e.silver,o.data.account.biliCoin=e.biliCoin,o.data.account.isNeverRecharge=e.isNeverRecharge})),o.$watch("exchangeCoinConfig",(function(e){o.data.exchangeCoinConfig=e})),lazyInit($("#seed-exchange")[0],o),exchangeCoinConfig()}))};
},{"../../../common/functions/func-avalon-lazy-init/lazy-init":148,"./charge":223,"./exchange":225,"./exchange-coin-config":224}],227:[function(require,module,exports){
"use strict";module.exports=function(){require("./javascripts/sign-up.js")()};
},{"./javascripts/sign-up.js":228}],228:[function(require,module,exports){
"use strict";function doSign(){return $.getJSON("/sign/doSign")}function delay(n,t){var a=Array.prototype.slice.call(arguments,2);return setTimeout((function(){return n.apply(null,a)}),t)}var liveQuickLogin=require("../../../../common/functions/func-live-quick-login/live-quick-login"),$signBtnSmallIcon=$("#room-left-sidebar").find(".small-wrap .sign");module.exports=function(){function n(n){return!(document.cookie.indexOf("DedeUserID")<0)&&(a.loggedIn=!0,void $.ajax({url:"/sign/GetSignInfo",type:"get",dataType:"json",success:function(t){0==t.code&&(a.status=t.data.status,a.taskStatus=t.data.taskStatus,a.newTask=t.data.newTask,t.data.status&&$signBtnSmallIcon.attr("data-label","已签到"),a.$fire("all!updateSignInfo",t.data),n&&n())}}))}function t(n){n.allDays&&n.hadSignDays==n.allDays&&a.$fire("all!newTitleNotice","title-17-1")}var a=avalon.define({$id:"signUpCtrl",taskStatus:1,status:0,newTask:!0,loggedIn:!1,openSignUpPopup:function(){a.status?(a.$fire("all!toggleSignUpPopup",!0),delay((function(){a.$fire("all!toggleSignUpPopup",!1),a.$fire("all!changeSignStatus")}),5e3)):doSign().done((function(n){a.$fire("all!roomDoSign"),a.$fire("all!changeSignInfo",n.data),t(n.data),a.$fire("all!toggleSignUpPopup",!0),delay((function(){a.$fire("all!toggleSignUpPopup",!1),a.$fire("all!changeSignStatus")}),5e3)}))},myTask:function(){liveQuickLogin(),window.open("//link.bilibili.com/p/center/index#/user-center/achievement/achievement-normal","_blank")}});a.$watch("roomDoSign",(function(){a.status=1,$signBtnSmallIcon.attr("data-label","已签到")})),$((function(){n()}))};
},{"../../../../common/functions/func-live-quick-login/live-quick-login":154}],229:[function(require,module,exports){
"use strict";function createNewGift(e){var i=e.superGiftInfo,t=e.hitNum,n=void 0===t?1:t,a=e.isFireball,o=e.isNewYear,s=a?'<span class="t-cyan">'+i.uname+"</span>":'感谢<span class="t-cyan">'+i.uname+"</span>",m='的<span class="t-cyan">'+i.num+'</span>个<span class="gift-name">'+i.giftName+"~</span>";a&&(m='<p>使用了<span style="color: orange">大火球术</span>！</p>'),o&&(m='<p style="width: 180px">陪大家一起跨年 ⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄</p>');var r='\n        <div class="dp-i-block v-top gift-img" style="background-image: url(//static.hdslb.com/live-static/live-room/images/gift-section/gift-'+i.giftId+'.gif)"></div>\n        <div class="dp-i-block v-top gift-info">\n            <p>'+s+"</p>\n            "+m+'\n        </div>\n        <div class="combo-text-ctnr">\n            <p class="combo-text">Combo</p>\n            <p class="combo-num">x '+n+"</p>\n        </div>\n    ";if($appendTarget.children().length>=moduleSettings.maxCount){var p=appendTarget.children[0];appendTarget.removeChild(p);var u=p.getAttribute("data-combo-id");clearTimeout(superGiftTimeouts[u]),delete superGiftTimeouts[u],p.className="super-gift-item move-in-left",p.setAttribute("data-combo-id",i.comboId),p.innerHTML=r,$appendTarget.find(".super-gift-item").addClass("move-up").one(ANIMTAION_EVENT_NAME,(function(){$(this).removeClass("move-up")})),superGiftExecCommonPart(p,i),p=null}else{var d=document.createElement("div");d.className="super-gift-item move-in-left",d.setAttribute("data-gift-id",i.id),d.setAttribute("data-combo-id",i.comboId),d.innerHTML=r,superGiftExecCommonPart(d,i),d=null}r=null}function superGiftExecCommonPart(e,i,t){var n=$(e);t?(n.find(".combo-num").remove(),n.find(".combo-text").after('<p class="combo-num">x '+i.hitNum+"</p>")):(appendTarget.appendChild(e),n.one(ANIMTAION_EVENT_NAME,(function(){$(this).removeClass("move-in-left")}))),$appendTarget.show(),_utils.EventBus.$emit(appConfig.eventNames.harunaMotion,"thanking"),superGiftTimeouts[i.comboId]=setTimeout((function(){"IE 9"===window.USERBROWSER?(n.removeClass("move-in-left").addClass("move-out-left").off(),setTimeout((function(){n.off().remove(),$appendTarget.children().length||$appendTarget.hide()}),380)):n.removeClass("move-in-left move-up").addClass("move-out-left").off().one(ANIMTAION_EVENT_NAME,(function(){$(this).off().remove(),$appendTarget.children().length||$appendTarget.hide()}));var e=i.comboId;clearTimeout(superGiftTimeouts[e]),delete superGiftTimeouts[e]}),moduleSettings.showTime)}var _utils=require("/Users/Felix/Bilibili/Repo/live-static/src/utils"),appConfig=require("/Users/Felix/Bilibili/Repo/live-static/src/common/app-config/app-config"),ANIMTAION_EVENT_NAME="webkitAnimationEnd mozAnimationEnd msAnimationEnd oanimationend animationend",moduleSettings={showTime:1e4,maxCount:3},$appendTarget=$("#super-gift-ctnr-haruna"),appendTarget=$appendTarget[0],superGiftTimeouts={};_utils.EventBus.$on(appConfig.eventNames.superGiftHaruna,(function(e){if(0!=e.super){_utils.EventBus.$emit(appConfig.eventNames.harunaSpeaking,!1);var i=e.uid+"_"+e.giftId+"_"+e.num+"_"+e.super,t="combo_"+e.uid+"_"+e.giftId+"_"+e.num,n={id:i,uid:e.uid,uname:e.uname,num:e.num,giftName:e.giftName,giftId:e.giftId,hitNum:e.super,comboId:t},a=$appendTarget.find("[data-combo-id="+t+"]");return a.length?(clearTimeout(superGiftTimeouts[t]),void superGiftExecCommonPart(a[0],n,!0)):void createNewGift({superGiftInfo:n,hitNum:e.super,isFireball:"FFF"===e.giftName,isNewYear:46===e.giftId})}}));var propContainer=$(".live-haruna-ctnr .props"),blessTag=propContainer.find(".bless")[0],imgTag1=propContainer.find(".img-1")[0],imgTag2=propContainer.find(".img-2")[0];
},{"/Users/Felix/Bilibili/Repo/live-static/src/common/app-config/app-config":137,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],230:[function(require,module,exports){
"use strict";function getCurrentTreasure(){return $.ajax({url:apiDomain+"/FreeSilver/getCurrentTask",type:"GET",dataType:"JSONP",jsonp:"callback",jsonpCallback:"cb"+randomString()})}function _getAward(n,e,t){return $.ajax({url:apiDomain+"/FreeSilver/getAward",type:"GET",cache:!1,timeout:1e4,data:{time_start:n,time_end:e,captcha:t},dataType:"JSONP",jsonp:"callback",jsonpCallback:"cb"+randomString()})}function getCaptcha(){return apiDomain+"/freeSilver/getCaptcha?ts="+Date.now()}var liveQuickLogin=require("../../../common/functions/func-live-quick-login/live-quick-login"),LiveCountDown=require("../../../common/functions/func-countdown/live-count-down"),appConfig=require("../../../common/app-config/app-config"),randomString=require("../../../common/functions/func-random-string/random-string"),mobilePopup=require("../mobile-tips/mobile-tips");module.exports=function(n){avalon.ready((function(){var e=$(".treasure-box-ctnr"),t=e.find(".get-award-btn"),a=avalon.define({$id:"treasureCtrl",silverSeed:!1,allowCtrl:!0,status:"waiting",finished:!1,boxHidden:!1,panelHidden:!0,panelOut:!1,aniStep:1,countdown:null,waitingEmoji:randomEmoji.happy(),panelEmoji:randomEmoji.helpless(),awardBtn:{text:"领取",bk:"",interval:null,awarding:function(){a.awardBtn.bk=a.awardBtn.text,a.awardBtn.text="领取中.",a.awardBtn.interval=setInterval((function(){return a.awardBtn.text.indexOf("...")>-1?void(a.awardBtn.text="领取中"):void(a.awardBtn.text+=".")}),500)},restore:function(){clearInterval(a.awardBtn.interval),a.awardBtn.text=a.awardBtn.bk}},taskInfo:{startTime:"",endTime:"",minute:"",award:"--"},captcha:{img:getCaptcha(),userInput:"",refresh:function(){a.captcha.img=getCaptcha()}},showBox:function(){a.boxHidden&&a.allowCtrl&&(a.boxHidden=!1)},hideBox:function(){a.allowCtrl&&!a.boxHidden&&(a.boxHidden=!0)},showPanel:function(){if(a.allowCtrl&&a.panelHidden){if(liveQuickLogin(),a.interruptPhone())return void mobilePopup();a.panelHidden=!1,"acquirable"===a.status&&a.captcha.refresh(),a.captcha.userInput="",i.panel(),i.waiting()}},hidePanel:function(){a.panelHidden||(a.allowCtrl=!1,a.panelOut=!0,setTimeout((function(){a.panelHidden=!0,a.panelOut=!1,a.allowCtrl=!0}),300))},makeAcquirable:function(){a.allowCtrl=!0,a.showBox(),a.playBoxAnimation(),a.status="acquirable"},makeWaiting:function(){a.status="waiting"},makeFinished:function(){a.finished=!0,$.cookie("F_S_T_"+n.UID,1)},playBoxAnimation:function(n){n=n||7;var e=setInterval((function(){a.aniStep++,a.aniStep>=n&&clearInterval(e)}),100)},restoreBox:function(){setTimeout((function(){var n=setInterval((function(){a.aniStep--,a.aniStep<=1&&(clearInterval(n),a.aniStep=1)}),100)}),250)},checkNewTask:function(){getCurrentTreasure().done((function(n){return void 0===n.code?void consoleText.log(appConfig.consoleText.error+"接口数据不完整：code 丢失."):(n.code=parseInt(n.code,10),n.code===-10017?void a.makeFinished():0!==n.code?void consoleText.log(appConfig.consoleText.caution+"宝箱任务设置失败："+n.msg):void a.setNewTask(n.data.time_start,n.data.time_end,parseInt(n.data.minute,10),parseInt(n.data.silver,10)))}))},setNewTask:function(n,e,t,i){a.hidePanel(),a.restoreBox(),setTimeout(a.makeWaiting,300),a.taskInfo.startTime=n,a.taskInfo.endTime=e,a.taskInfo.minute=t,a.taskInfo.award=i,a.setCountdown(t)},captchaKeyUp:function(n){13===n.keyCode&&a.getAward()},getAward:function(){if(a.allowCtrl){a.allowCtrl=!1,a.awardBtn.awarding();var n=a.taskInfo,e=a.captcha.userInput;_getAward(n.startTime,n.endTime,e).done((function(n){return 0!=n.code?(liveToast(t[0],n.msg+" "+randomEmoji.helpless(),"info"),a.allowCtrl=!0,a.captcha.refresh(),void a.awardBtn.restore()):1===parseInt(n.data.isEnd,10)?void a.makeFinished():(liveToast(t[0],"已成功领取 "+a.taskInfo.award+" 银瓜子！ "+randomEmoji.happy(),"success"),a.updateCurrency(),a.checkNewTask(),a.awardBtn.restore(),void(a.allowCtrl=!0))})).fail((function(n){liveToast(t[0],"系统错误，请稍后再试 "+randomEmoji.sad(),"error"),a.captcha.refresh(),a.awardBtn.restore(),a.allowCtrl=!0})).always((function(){a.captcha.userInput=""}))}},setCountdown:function(n){a.countdown&&a.clearCountdownTime();var t=new Date,i=t.getMinutes()+n;t.setMinutes(i),a.countdown=new LiveCountDown({endTime:t,element:e.find(".count-down-node"),callback:function(){a.makeAcquirable()}}),a.interruptPhone(),a.allowCtrl=!0},clearCountdownTime:function(){a.countdown.clearCountdown()},interruptPhone:function(){return!n.ISPHONE&&(e.find(".count-down-node").text("00:00"),a.clearCountdownTime(),!0)},updateCurrency:function(){if(!isNaN(parseInt(a.silverSeed,10))){var n=a.silverSeed+a.taskInfo.award;a.$fire("all!updateCurrency",{silver:n}),a.silverSeed=n}},init:function(){a.checkNewTask()}});a.$watch("fillCurrency",(function(n){a.silverSeed=n.silver}));var i={waiting:function(){a.waitingEmoji=randomEmoji.happy()},panel:function(){a.panelEmoji=randomEmoji.helpless()}};avalon.scan(e[0],a),a.init()}))};var apiDomain="//live.bilibili.com";
},{"../../../common/app-config/app-config":137,"../../../common/functions/func-countdown/live-count-down":149,"../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../common/functions/func-random-string/random-string":156,"../mobile-tips/mobile-tips":211}],231:[function(require,module,exports){
"use strict";var WeekRankCtr=avalon.define({$id:"WeekRank",url:"/activity/v1/rank/getAreaRank",data:{areaId:0,rank:"--",rankLinkUrl:"",panel:{show:!1,out:!1}},init:function(a){this.areaId=a,this.getData()},getData:function(){var a=this,n=this.url,t=this.areaId,e=MASTERID;$.ajax({type:"get",url:n,data:{areaId:t,ruid:e}}).done((function(n){var t=n.code,e=n.data;if(0===t){var r=e.rank,i=e.index;a.data.rank=r<10&&r>0?"0"+r:r,a.data.rankLinkUrl="/p/eden/rank#/childnav/vitality/"+i}})).fail()},showFunc:function(){WeekRankCtr.panel.out=!1,WeekRankCtr.panel.show=!0},hideFunc:function(){WeekRankCtr.panel.out=!0,WeekRankCtr.panel.show=!1}});module.exports=function(a){var n=a.AREAID;WeekRankCtr.init(n)};
},{}],232:[function(require,module,exports){
"use strict";module.exports=function(){return require("./javascripts/wish.js")()};
},{"./javascripts/wish.js":233}],233:[function(require,module,exports){
"use strict";var liveQuickLogin=require("./../../../../common/functions/func-live-quick-login/live-quick-login.js"),liveToast=require("./../../../../common/components/live-widget/live-toast/live-toast.js"),setNum=require("./../../../../common/functions/func-setnum/set-num.js");module.exports=function(){function t(){this.$el={},this.doms={},this.datas={},this.init()}function i(t){avalon.vmodels.giftCtrl.$fire("all!updateCurrency",{gold:t.gold,silver:t.silver})}function s(t){var t=t||function(){};$.ajax({url:"/lottery/index",cache:!1,success:function(i){var s=$.parseJSON(i);0===s.code&&t(s.data)}})}t.prototype={template:function(){return'<div class="wish-dialog" id="wis-dialog"><div class="dialog-main"><div class="wish-top"><div class="wish-top-icon"></div><span class="wish-ok-text"><a href="http://live.bilibili.com/lottery/lotteryResult" target="_blank" class="ok-target">愿望达成</a></span></div><div class="wish-main"><p class="wish-des"> 在绘马上画上自己的心愿（人家才不知道什么痛绘马呢），说不定就能梦想成真。每晚21点会从许愿的用户中抽取中奖用户，购买越多则中奖概率和最终奖励也会相应增加！</p><div class="wish-prize"><dl class="wish-prize-list"><dt>中奖奖励</dt><dd>一等奖 1份 <em class="prize-content"><span class="first-prize">'+this.formatNum(this.datas.first)+'</span>银瓜子</em></dd><dd>二等奖 10份 <em class="prize-content">每份<span class="second-prize">'+this.formatNum(this.datas.second)+'</span>银瓜子</em></dd><dd>三等奖 <em class="third-prize-num">'+this.datas.third+'</em>份 <em class="prize-content">每份B坷垃1个</em></dd></dl></div><div class="wish-set"><div class="wish-num-box"><p>绘马总数：<em class="wish-num" id="total-wish-num">'+this.datas.totalnum+'</em></p><p>我挂上的绘马：<em class="wish-num" id="my-wish-num">'+this.datas.num+'</em></p></div><div class="wish-buy"><div class="wish-buy-content">购买数量：<input type="text" class="ipt-num" value="1"><span class="wish-buy-type"><ul><li class="wish-buy-item"><input checked="checked" type="radio" name="buy-type" data-type="silver" id="type-silver"><label for="type-silver">银瓜子</label></li><li class="wish-buy-item"><input type="radio" name="buy-type" data-type="gold" id="type-gold"><label for="type-gold">金瓜子</label></li></ul></span></div><div class="wish-buy-tip"><span class="buy-tip-icon"></span>每个绘马需要2000银/金瓜子</div></div><div class="wish-set-btn">挂绘马</div></div></div></div><div class="close"></div></div>'},$dialog:"",$mask:"",csses:{iptNum:".ipt-num",btnBuy:".wish-set-btn",totalNum:"#total-wish-num",myNum:"#my-wish-num",firstNum:".first-prize",secondNum:".second-prize",thirdPrizeNum:".third-prize-num"},init:function(){this.$el=$("<div style='opacity:0'></div>").appendTo(".wish-panel"),this.bindEvent()},render:function(){this.$el.html(),this.$dialog=$(this.template()),this.$mask=$("<div class='mask'></div>"),this.$el.append(this.$dialog).append(this.$mask),this.setDoms()},setDoms:function(){var t=this.$el,i=this.csses;this.doms={$iptNum:$(i.iptNum,t),$btnBuy:$(i.btnBuy,t),$totalNum:$(i.totalNum,t),$myNum:$(i.myNum,t),$firstNum:$(i.firstNum,t),$secondNum:$(i.secondNum,t),$thirdPrizeNum:$(i.thirdPrizeNum,t)}},show:function(t){this.datas=t,this.render(),this.setStyle(),this.setPosition(),this.$el.animate({opacity:1},200)},hide:function(){var t=this;this.$el.animate({opacity:0},200,(function(){t.$el.html("").css("opacity",1)}))},setPosition:function(){var t,i,s,e=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=this.$dialog.width(),a=this.$dialog.height();t=n/2-a/2,i=e/2-o/2,t<0&&(t*=2),s={width:750,position:"fixed",zIndex:1100,left:i,top:t},this.$dialog.css(s)},setStyle:function(){var t=document.documentElement.clientHeight;t<750?this.$dialog.addClass("min-dialog"):this.$dialog.removeClass("min-dialog")},buy:function(){var t=this,i=$("[name=buy-type]",this.$el).filter(":checked"),s=i.data("type"),e=this.doms.$iptNum,n=e.val();this.checkNum()?this.ajaxBuy({coinType:s,num:n}):(e.focus().addClass("error"),liveToast(t.doms.$btnBuy,"请输入正确的数字哦~ (●'◡'●)ﾉ♥","error"))},ajaxBuy:function(t){var i=this;$.ajax({type:"post",url:"/lottery/buy",data:{coinType:t.coinType,num:t.num,token:$.cookie("LIVE_LOGIN_DATA")||""},success:function(t){var s=$.parseJSON(t);0===s.code?i.buySuccess(s.data):i.buyError(s.msg)}})},buySuccess:function(t){var e=this;liveToast(this.doms.$btnBuy[0],"购买成功","success",!1),i(t),s((function(t){var i=e.doms;i.$totalNum.text(t.totalnum),i.$myNum.text(t.num),i.$firstNum.text(e.formatNum(t.first)),i.$secondNum.text(e.formatNum(t.second)),i.$thirdPrizeNum.text(t.third)}))},buyError:function(t){liveToast(this.doms.$btnBuy[0],t,"error",!1)},checkNum:function(){var t=this.doms.$iptNum,i=t.val(),s=!0;return i&&!/[^0-9]/.test(i)||(s=!1),s?t.removeClass("error"):t.addClass("error"),s},formatNum:function(t){var i,s="";return t>=1e4?(i=t/1e4,s=i.toString().replace(/(\d+)(\.)?(\d+)/,(function(t,i,s,e){var n;return s?(n=e.toString().substring(0,1),i+(0==n?"":"."+n)):t})),s+="万"):s=t,s},bindEvent:function(){var t=this,i=(this.doms,this.$el),s=0;i.on("keyup",".ipt-num",(function(){t.checkNum()})),i.on("click",".wish-set-btn",(function(){t.buy()})),i.on("click",".close",(function(){t.hide()})),i.on("click",".mask",(function(){t.hide()})),$(window).resize((function(){s&&clearTimeout(s),s=setTimeout((function(){t.$el.html()&&(t.setStyle(),t.setPosition())}),50)}))}};var e=new t;return{show:function(){liveQuickLogin(),e.$el.html()||s((function(t){e.show(t)}))}}};
},{"./../../../../common/components/live-widget/live-toast/live-toast.js":147,"./../../../../common/functions/func-live-quick-login/live-quick-login.js":154,"./../../../../common/functions/func-setnum/set-num.js":158}],234:[function(require,module,exports){
"use strict";var appConfig=require("../common/app-config/app-config"),isMobile=require("../utils").isMobile;appConfig.avalonConfig(),appConfig.globalConfig(window),require("../common/app-config/avalon-filters")(),require("../common/app-config/ajax-prefilter").room(),require("../common/global-modules")(window),require("perfect-scrollbar/jquery")(window.jQuery),require("../common/components/live-top-navigator/intro-scripts")(),require("../common/components/live-sign-up/sign-up-popup-new")(),require("../flow"),require("../common/live-service/live-service-ctrl")(),require("./sys-core"),require("./room-javascripts")(),require("./components/super-gift"),require("./components/gift-section/intro-javascripts")(),require("./components/beat-storm/beat-storm"),require("./components/live-room-sidebar-left/intro")(),require("./components/my-attention/intro")(),require("./components/sign-up/intro")(),require("./components/seed-exchange/seed-exchange")(),require("../common/components/live-feedback/live-feedback")(),require("./components/activity-title-painted/activity-title-painted")(),require("./components/capsule-toy/intro")(),isMobile()&&require("browserify-require-async/loader")(require,{urlRoot:"//static.hdslb.com/live-static/live-room/chunks/",rethrowError:!1})([{name:"../common/components/to-mobile-hinter",hash:"d5b62f498f",url:"37341cf138.js",__requireAsync:!0}]);
},{"../common/app-config/ajax-prefilter":136,"../common/app-config/app-config":137,"../common/app-config/avalon-filters":138,"../common/components/live-feedback/live-feedback":141,"../common/components/live-sign-up/sign-up-popup-new":142,"../common/components/live-top-navigator/intro-scripts":143,"../common/global-modules":167,"../common/live-service/live-service-ctrl":171,"../flow":178,"../utils":283,"./components/activity-title-painted/activity-title-painted":181,"./components/beat-storm/beat-storm":182,"./components/capsule-toy/intro":188,"./components/gift-section/intro-javascripts":202,"./components/live-room-sidebar-left/intro":209,"./components/my-attention/intro":212,"./components/seed-exchange/seed-exchange":226,"./components/sign-up/intro":227,"./components/super-gift":229,"./room-javascripts":239,"./sys-core":277,"browserify-require-async/loader":19,"perfect-scrollbar/jquery":112}],235:[function(require,module,exports){
"use strict";function Eventer(t,e){this.id=t,this.evt={},this.keyEvt={};for(var i=0;i<e.length;i++)this.evt[e[i]]=[]}Eventer.prototype.$emit=function(t,e,i){i&&(this.keyEvt[t]={data:e});for(var n=this.evt[t],o=0;o<n.length;o++)n[o](e)},Eventer.prototype.$on=function(t,e,i){if(!this.evt[t])throw[t,e.toString()];this.evt[t].push(e.bind(i||window));var n=this.keyEvt[t];n&&n.data&&e.call(i,n.data)},module.exports=Eventer;
},{}],236:[function(require,module,exports){
"use strict";var Eventer=require("./event"),LIST=["ACTIVITY_NEW","ACTIVITY_GIFT_SEND_CALLBACK","ACTIVITY_FREEGIFT_UPDATE","ACTIVITY_FREEGIFT_REFRESH","ACTIVITY_FREEGIFT_CHOOSE","ACTIVITY_TOP3_UPDATE","ACTIVITY_LIGHTEN_NEW","ACTIVITY_LIGHTEN_END"],event=new Eventer("ACTIVITY",LIST);module.exports=event;
},{"./event":235}],237:[function(require,module,exports){
"use strict";var Eventer=require("./event"),LIST=["GIFT_OTHER_SEND_CALLBACK"],event=new Eventer("GIFT",LIST);module.exports=event;
},{"./event":235}],238:[function(require,module,exports){
"use strict";var Activity=require("./evt.activity"),Gift=require("./evt.gift");module.exports={Activity:Activity,Gift:Gift};
},{"./evt.activity":236,"./evt.gift":237}],239:[function(require,module,exports){
"use strict";function initDataRequest(){return $.ajax({url:"/live/getInfo",type:"GET",data:{roomid:window.ROOMID},dataType:"JSON",timeout:appConfig.appConfig.longXhrTimeout,success:function(e){return 0!=e.code?livePopup({title:"数据返回好像有问题……(ﾟДﾟ≡ﾟдﾟ)!?",html:"<p>页面基础数据返回貌似有问题，请您再次刷新或稍等片刻，真的很抱歉 > <</p><p>如果您频繁出现此问题，请将本页面截图后联系客服反馈，我们诚心希望听到您的意见与反馈 (●'◡'●)ﾉ♥</p><p>失败原因：code = "+e.code+"</p>",type:"info"}):void require("./room-init-funcs/func-set-global-variables")(window,e)}})}function roomInit(e){function o(){1!==parseInt(window.ISADMIN,10)&&setTimeout((function(){window.protocol.ROOM_SILENT_ON({roomid:window.ROOMID,data:{time:window.ROOM_SILENT_SECOND,level:window.ROOM_SILENT_LEVEL,type:window.ROOM_SILENT_TYPE}})}),1)}function r(){var o=parseInt(e.data.ISANCHOR,10),r=parseInt(e.data.ISADMIN,10);1===o&&setTimeout((function(){require("browserify-require-async/loader")(require,{urlRoot:"//static.hdslb.com/live-static/live-room/chunks/",rethrowError:!1})([{name:"./init.admin-funcs",hash:"085a155262",url:"e4cab5144b.js",__requireAsync:!0}],(function(){n()}))}),500),1===r&&1!==o&&setTimeout((function(){require("browserify-require-async/loader")(require,{urlRoot:"//static.hdslb.com/live-static/live-room/chunks/",rethrowError:!1})([{name:"../components/admin-room-edit-panel/javascripts/room-admin",hash:"518358e018",url:"d8805b8856.js",__requireAsync:!0}],(function(){n()}))}),500),n()}function n(){require("./room.funcs/func.front-router")(window)}require("./room.protocols"),require("../components/week-rank")(e.data),require("../components/header-section/header-section")(window,e),require("../components/chat-area/intro-javascripts")(e),require("./room.funcs/func.danmu-append"),require("../components/ranks/ranks"),require("./room.funcs/func.get-history-danmu")(),require("../components/treasure-box/treasure-box")(window),require("../components/recommend-section/recommend-videos/recommend-videos")(window),require("../components/recommend-section/recommend-drawing/recommend-drawing")(),require("../components/quiz-system/intro-scripts")(),require("../components/draw/draw-init")(e.data),require("./room-init-funcs/func-room-data-deferred")(e),require("./live-room-funcs").topNavOnScroll(window),require("../components/gift-section/javascripts/small-tv")(window),require("../components/guard/guard")(window),require("./room.protocols/events.definition"),require("../sys-user")(e),require("../sys-activity")(),r(),o(),require("./room.funcs/func.set-heartbeta")(),require("./room.funcs/func.room-data-report")(window),require("../components/beginner-guide/index")(),require("./room.funcs/func.load-external-scripts")}var appConfig=require("../../common/app-config/app-config"),livePopup=require("../../common/components/live-widget/live-popup/live-popup");module.exports=function(){require("./room-init-funcs/func-init-player")(window),require("./live-room-flash-func")(window),require("./room-init-funcs/func-set-global-module"),initDataRequest().done(roomInit).fail((function(e){throw livePopup({title:"页面数据加载失败",html:"<p>经过一分钟的努力加载，最终还是没有加载成功 …… 真是非常抱歉 > <</p><p>如果您频繁出现此问题，请将本页面截图后联系客服反馈，我们诚心希望听到您的意见与反馈 (●'◡'●)ﾉ♥</p><p>失败原因："+e.statusText+"</p>",type:"info"}),new Error(appConfig.consoleText.error+"getInfo 接口访问失败, 房间无法初始化.")}))};
},{"../../common/app-config/app-config":137,"../../common/components/live-widget/live-popup/live-popup":146,"../components/beginner-guide/index":187,"../components/chat-area/intro-javascripts":200,"../components/draw/draw-init":201,"../components/gift-section/javascripts/small-tv":205,"../components/guard/guard":206,"../components/header-section/header-section":208,"../components/quiz-system/intro-scripts":214,"../components/ranks/ranks":218,"../components/recommend-section/recommend-drawing/recommend-drawing":219,"../components/recommend-section/recommend-videos/recommend-videos":221,"../components/treasure-box/treasure-box":230,"../components/week-rank":231,"../sys-activity":257,"../sys-user":280,"./live-room-flash-func":240,"./live-room-funcs":241,"./room-init-funcs/func-init-player":242,"./room-init-funcs/func-room-data-deferred":243,"./room-init-funcs/func-set-global-module":245,"./room-init-funcs/func-set-global-variables":246,"./room.funcs/func.danmu-append":248,"./room.funcs/func.front-router":249,"./room.funcs/func.get-history-danmu":250,"./room.funcs/func.load-external-scripts":251,"./room.funcs/func.room-data-report":252,"./room.funcs/func.set-heartbeta":253,"./room.protocols":255,"./room.protocols/events.definition":254,"browserify-require-async/loader":19}],240:[function(require,module,exports){
"use strict";var appConfig=require("../../common/app-config/app-config"),liveToast=require("../../common/components/live-widget/live-toast/live-toast");module.exports=function(t){var e,n=LivePlayer,a=avalon.define({$id:"ctrlByFlash"});a.$watch("chatCtrlPanelService",(function(t){e=t})),t.getDanmuColor=function(){return t.colorfulDanMu.currentColor},t.PlayerSetOnline=function(t){t=parseInt(t,10),t<0&&(t=1),avalon.ready((function(){a.$fire("all!setViewerCount",t)}))},t.toggleDanmuPanel=function(){$(".danmu-config")[0].click()},t.globalShieldResult=function(t){return 0!==t.code?void liveToast($(".live-config-confirm")[0],t.msg,"error"):void a.$fire("all!masterShieldChoice",t)},t.userShieldResult=function(t){0!==t.code&&liveToast($(".shield-ul-btn")[0],t.msg,"error"),a.$fire("all!userShieldChoice",t)},t.server_callback=function(e){"ROOM_SILENT_OFF"==e.cmd&&a.$fire("all!updateCountdownStatus",e),t.protocol[e.cmd](e)},t.addMessage=function(e){t.liveRoomFuncs.addDanmu(e)},t.showBkela=function(){$(".gifts-ctnr .gift-item.gift-3").click()},t.flashAttendRoom=function(){$(".attention-btn-ctrl").find(".btn-transition").click()},t.player_fullwin=function(t){var e=$("body");t?(e.addClass("player-full-win"),setTimeout((function(){$(".chat-ctnr-hider-ctnr").click()}),1)):e.removeClass("player-full-win")},t.flash_danMuInit=function(t){e.init(t)},t.flash_receiveDanmuDensity=function(t){0==t&&(t=86),e.setDanmuDensity(t,"flash")},t.flash_receiveAutoDensity=function(t){e.setAutoDensity(t,"flash")},t.flash_noticeAutoDensity=function(t){e.f_noticeAutoDensity(t),e.setDanmuDensity(t,"flash")},t.flash_receiveDanmuSize=function(t){e.setDanmuSize(t,"flash")},t.flash_receiveDanmuAlpha=function(t){e.setDanmuAlpha(t,"flash")},t.flash_addShieldList=function(t){e.f_addShieldWord(t)},t.flash_deleteShieldId=function(t){e.f_removeShieldWord(t)},t.flash_setGlobalShield=function(t,n){e.f_setAnchorShieldOn(t,n)},t.receiveRoomListShield=function(t){e.f_setShieldToRoom(t)},t.setLevelShield=function(t){e.f_setLevelShield(t)},t.flash_postStatistics=function(t){$.ajax({url:t,type:"GET",dataType:"JSONP",callback:"callback",success:$.noop,error:$.noop})},(function(){function e(){var t=$("#gift-panel").find(".gifts-ctnr").children(),e=[];return t.each((function(){if(!$(this).hasClass("special-gifts")&&!$(this).hasClass("limited-gifts")){var t=[],a=$(this).find(".gift-item:not(.gift-39)");a.length>0&&a.each((function(e){var a=$(this),i=a.attr("data-gift-id"),l=a.attr("data-title"),o=a.attr("data-custom_input"),s=a.attr("data-count_set").split(","),f=!!a.attr("data-gold")&&parseInt(a.attr("data-gold"),10),c=!!a.attr("data-silver")&&parseInt(a.attr("data-silver"),10);t.push({index:e,giftId:parseInt(i,10),giftName:l,customInput:parseInt(o,10),countSet:n(s),gold:f,silver:c})})),e.push(t)}})),e}function n(t){for(var e=0,n=t.length;e<n;e++)t[e]=parseInt(t[e],10);return t}t.flash_giftInfo=function(){return e()}})(),t.flash_emojiList=function(){return appConfig.appConfig.emojiList},t.flash_popularWords=function(){var t=[];return $(".hot-words-panel").find("a").each((function(){t.push($(this).text())})),t},t.flash_sendGift=function(t){a.$fire("all!sendGift",{element:null,type:"normal",data:{giftId:t.giftId,num:t.giftNum,coinType:t.coinType},callback:function(t){200013==t.code&&(a.$fire("all!noSeed"),a.$fire("all!closeGiftSendPanel")),n.flash_sendGiftStatus(t.code,t.msg)},errorCallback:function(){n.flash_sendGiftStatus(-500,"发生未知错误，要不稍后再试试？")}})},t.flash_giftPackageStatus=function(){return t.avalon.vmodels.giftPackageCtrl.giftPackageStatus},t.flash_giftPackageOpen=function(){a.$fire("all!giftPackageToggle","open")},t.flash_showBlacklist=function(e){t.ISANCHOR?a.$fire("all!showLiveManageDialog",{curTarget:"blackManage",blackName:e}):a.$fire("all!showBlackDialog",{blackName:e})}};
},{"../../common/app-config/app-config":137,"../../common/components/live-widget/live-toast/live-toast":147}],241:[function(require,module,exports){
"use strict";function changeRoomBK(e){$(".bk-img").addClass("fade-out").removeClass("fade-in"),clearTimeout(changeRoomBKTimeout),changeRoomBKTimeout=setTimeout((function(){$(".bk-img").addClass("fade-in").removeClass("fade-out").css({"background-image":"url("+e+")"})}),380)}function loadingCutOffMsg(){1==window.ISANCHOR&&$.ajax({url:"/liveact/cutoffmsg",type:"POST",data:{roomid:window.ROOMID},dataType:"JSON",success:function(e){if(0==e.code&&e.msg)var o=window.livePopup({title:"友情提示 > <",html:'<p>您的直播间因<span style="color: red">"'+e.msg+'"</span>，已经被管理员 <span style="color: red">切断</span>，请更改直播内容。</p><p>如有疑问请通过客服邮箱 <span style="color: #61c7eb">livehelp@bilibili.com</span> 或 <span style="color: #61c7eb">客服 QQ: 800189233 </span>进行反馈。<a href="http://live.bilibili.com/news/detail/96" target="_blank" style="color: #61c7eb">查看规范</a></p><div><input type="checkbox" id="cut-off-acknowledge"><label for="cut-off-acknowledge" class="v-top dp-inline-block" style="margin-top: 7px">我知道了</label></div>',type:"info",onConfirm:function(){$("#cut-off-acknowledge").is(":checked")&&$.post("/liveact/del_cutoff_msg",{roomid:window.ROOMID},null,"JSON"),o.remove(),o=null}})}})}function topNavOnScroll(e){$((function(){var o=null;$(e).scroll((function(e){var n=e.currentTarget.scrollY||e.currentTarget.pageYOffset,t=n-o>0?"scrollDown":"scrollUp",l=$(".live-top-nav-ctnr");switch(t){case"scrollDown":l.addClass("fixed-hide"),o=n-1;break;case"scrollUp":l.removeClass("fixed-hide"),o=n+1}}))}))}var typeAdjust=require("../../common/functions/type-adjust"),liveCountDown=require("../../common/functions/func-countdown/live-count-down"),roomSilentTimer=null,$silentMerge=$(".room-silent-merge"),roomSilent={on:function(e,o){roomSilentTimer&&roomSilentTimer.clearCountdown(),roomSilentTimer=liveCountDown({endTime:o,element:$silentMerge.find(".count-down"),callback:function(){$silentMerge.fadeOut(200)}}),$silentMerge.show().find(".hint-text").text(e)},off:function(){roomSilentTimer.clearCountdown(),$silentMerge.fadeOut(200)}},changeRoomBKTimeout=null;module.exports={changeRoomBK:changeRoomBK,roomSilent:roomSilent,loadingCutOffMsg:loadingCutOffMsg,topNavOnScroll:topNavOnScroll};
},{"../../common/functions/func-countdown/live-count-down":149,"../../common/functions/type-adjust":162}],242:[function(require,module,exports){
"use strict";module.exports=function(e){e.LivePlayer=new EmbedPlayer({cid:e.ROOMID,container:document.getElementById("player-container")})};
},{}],243:[function(require,module,exports){
"use strict";var lazyInit=require("../../../common/functions/func-avalon-lazy-init/lazy-init");module.exports=function(n){avalon.ready((function(){var e=avalon.define({$id:"emptyNode"});lazyInit($("#empty-node")[0],e,(function(){setTimeout((function(){e.$fire("all!updateCurrency",{gold:parseInt(n.data.GOLD,10),silver:parseInt(n.data.SILVER,10)})}),1),require("./func-set-data-activity")(n,e),require("../live-room-funcs").loadingCutOffMsg()}))}))};
},{"../../../common/functions/func-avalon-lazy-init/lazy-init":148,"../live-room-funcs":241,"./func-set-data-activity":244}],244:[function(require,module,exports){
"use strict";var appConfig=require("../../../common/app-config/app-config");module.exports=function(e,i){if(window.IS_RED_BAG){var p="live-room/activity/rage-meme/";$("head").append('<link rel="stylesheet" href="'+appConfig.appConfig.cdnURL+p+'/rage-red-bag.min.css">'),$.getScript(appConfig.appConfig.cdnURL+p+"rage-red-bag.min.js")}if(window.IS_HAVE_VT){var a="live-room/activity/rage-vote/";$("head").append('<link rel="stylesheet" href="'+appConfig.appConfig.cdnURL+a+'rage-vote-system.min.css">'),$.getScript(appConfig.appConfig.cdnURL+a+"rage-vote-system.min.js")}};
},{"../../../common/app-config/app-config":137}],245:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),globalModules={livePopup:require("../../../common/components/live-widget/live-popup/live-popup"),liveToast:require("../../../common/components/live-widget/live-toast/live-toast"),liveQuickLogin:require("../../../common/functions/func-live-quick-login/live-quick-login"),randomEmoji:require("../../../common/functions/func-random-emoji/random-emoji")};(0,_keys2.default)(globalModules).forEach((function(e){window[e]=globalModules[e]}));
},{"../../../common/components/live-widget/live-popup/live-popup":146,"../../../common/components/live-widget/live-toast/live-toast":147,"../../../common/functions/func-live-quick-login/live-quick-login":154,"../../../common/functions/func-random-emoji/random-emoji":155,"babel-runtime/core-js/object/keys":11}],246:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys);module.exports=function(e,t){(0,_keys2.default)(t.data).forEach((function(u){e[u]=t.data[u]})),e.liveRoomFuncs={},localStorage.setItem("LIVE_PLAYER_UL",USER_LEVEL.level)};
},{"babel-runtime/core-js/object/keys":11}],247:[function(require,module,exports){
"use strict";var loadScript=require("../../../utils").loadScript,LINK="//static.hdslb.com/plugins/attentionLimitPopup/attentionLimitPopup.js";module.exports=function(t){if(t===-665)return void loadScript(LINK).then((function(){new attentionLimitPopup}))};
},{"../../../utils":283}],248:[function(require,module,exports){
"use strict";function addDanmuExec(e){!e||store.chatAreaUserEvent.locked&&e.info[2][0]!=UID||e.info[2][0]==UID&&e.info[0][5]==DANMU_RND||(danmuHTMLFactory(e),chatListChildren.length>100?(firstDanmu=chatListChildren[0],chatList.removeChild(firstDanmu),firstDanmu.innerHTML=msgHTML,chatList.appendChild(firstDanmu)):(danmuNodeFactory(msgHTML),chatList.appendChild(newDanmu)),store.chatAreaUserEvent.mouseover||danmuScroll())}function danmuHTMLFactory(e){if(guard="undefined"==typeof e.info[7]?GUARD:e.info[7],msgHTML='<div class="chat-msg '+(1===guard||2===guard?"guard-msg guard-lv"+guard:"")+'" data-uname="'+e.info[2][1]+'" data-uid="'+e.info[2][0]+'">',guard>0&&(msgHTML+='<a href="'+(GUARD_CONFIG.buyUrl+"&guard_level="+guard)+'" target="_blank"><span class="guard-icon-small lv'+guard+'" title="'+GUARD_CONFIG.level[guard.toString()]+'"></span></a>'),vipClass=1==e.info[2][4]||e.info[2][0]==UID&&1==SVIP?"year":1==e.info[2][3]||e.info[2][0]==UID&&1==VIP?"month":"",vipClass&&(msgHTML+='<a href="//link.bilibili.com/p/center/index#/user-center/my-info/operation?vip=true" target="_blank"><span class="vip-icon"><i class="live-icon vip-color v-middle '+vipClass+'"></i></span></a>'),(1==e.info[2][2]&&e.info[2][0]==MASTERID||e.info[2][0]==UID&&1==ISADMIN&&UID==MASTERID)&&(msgHTML+='<span class="square-icon master">播主</span>'),(1==e.info[2][2]||e.info[2][0]==UID&&1==ISADMIN)&&e.info[2][0]!=MASTERID&&(msgHTML+='<span class="square-icon admin">房管</span>'),(e.info[2][0]==UID&&!$.isEmptyObject(window.MEDAL)||e.info[3]&&e.info[3].length)&&(msgHTML=e.info[3]&&e.info[3].length?medalHTML({level:e.info[3][0],name:e.info[3][1],roomid:e.info[3][3],anchor:e.info[3][2]},msgHTML):medalHTML({level:window.MEDAL.level,name:window.MEDAL.medal_name,roomid:window.MEDAL.roomid,anchor:window.MEDAL.anchorName},msgHTML)),e.info[2][0]==UID&&!$.isEmptyObject(TITLE)&&TITLE.title){var n=(0,_noVue.titleParser)(TITLE.title),i=(0,_noVue.titleIconHtml)(n.id,n.level);msgHTML+='<a class="check-my-title" target="_blank" href="//link.bilibili.com/p/center/index#/user-center/wearing-center/library">'+i+"</a>"}if(msgHTML.indexOf("check-my-title")<0&&e.info[5]&&e.info[5].length&&e.info[5][1]){var a=(0,_noVue.titleParser)(e.info[5][1]),l=(0,_noVue.titleIconHtml)(a.id,a.level);msgHTML+='<a class="check-my-title" target="_blank" href="//link.bilibili.com/p/center/index#/user-center/wearing-center/library">'+l+"</a>"}return e.info[2][0]==UID?(!$.isEmptyObject(USER_LEVEL)&&USER_LEVEL.level>0&&(msgHTML+='<span class="user-level-icon lv-'+USER_LEVEL.level+'"> UL '+USER_LEVEL.level+' <div class="user-level-info"><div class="content"><p>用户等级：'+USER_LEVEL.level+'</p><p><a href="http://live.bilibili.com/p/eden/rank#/childnav/level/0" target="_blank">排名：'+USER_LEVEL.rank+"</a></p></div></div></span>"),msgHTML+='<span class="user-name">[自己] : </span>',msgHTML=msgHTML.replace('<div class="chat-msg"','<div class="chat-msg mine"')):($.isArray(e.info[4])&&e.info[4].length>0&&e.info[4][0]>0&&(msgHTML+='<div class="user-level-icon lv-'+e.info[4][0]+'"> UL '+e.info[4][0]+' <div class="user-level-info"><p>用户等级：'+e.info[4][0]+'</p><p><a href="http://live.bilibili.com/p/eden/rank#/childnav/level/0" target="_blank">排名：'+e.info[4][3]+"</a></p></div></div>"),msgHTML+='<span class="user-name color">'+e.info[2][1]+" : </span>"),msgHTML+='<span class="msg-content">'+e.info[1]+"</span></div>"}function danmuNodeFactory(e){return newDanmu=document.createElement("div"),newDanmu.className="msg-item-ctnr",newDanmu.innerHTML=e,newDanmu}function createDanmuNode(e){return danmuHTMLFactory(e),danmuNodeFactory(msgHTML)}function medalHTML(e,n){var i=e.level,a=e.name,l='<div class="medal-info"><a href="/'+e.roomid+'" target="_blank"><span class="content">勋章主播：'+e.anchor+"</span></a></div>",o=(0,_noVue2.getMedalHtml)(i,a,l);return n+o}function danmuNodeAppend(e){chatList.appendChild(e)}function danmuScroll(){chatList.scrollTop=chatList.scrollHeight}var _noVue=require("@bilibili-live/component.title/no-vue.js"),_noVue2=require("@blink-common/component.medal/no-vue.js"),GUARD_CONFIG=require("../../components/guard/guardConfig"),EventBusAvalon=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBusAvalon,store=require("/Users/Felix/Bilibili/Repo/live-static/src/flow").store,USER_LEVEL=window.USER_LEVEL,UID=window.UID,ISADMIN=window.ISADMIN,MASTERID=window.MASTERID,TITLE=window.TITLE,GUARD=window.GUARD,msgHTML="",vipClass="",guard=GUARD,firstDanmu={},newDanmu={},chatList=document.querySelector("#chat-msg-list"),chatListChildren=chatList.children;module.exports={addDanmu:addDanmuExec,createDanmuNode:createDanmuNode,danmuNodeAppend:danmuNodeAppend,danmuScroll:danmuScroll},window.liveRoomFuncs.addDanmu=addDanmuExec,EventBusAvalon.$watch("addDanmu",addDanmuExec);
},{"../../components/guard/guardConfig":207,"/Users/Felix/Bilibili/Repo/live-static/src/flow":178,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283,"@bilibili-live/component.title/no-vue.js":2,"@blink-common/component.medal/no-vue.js":6}],249:[function(require,module,exports){
"use strict";var hashWatcherModule=require("../../../common/functions/func-hash-watcher/hash-watcher"),hashWatcher=hashWatcherModule.hashWatcher,init=hashWatcherModule.init;module.exports=function(a){var e=avalon.define({$id:"routerCtrl"});hashWatcher("admin",(function(){e.$fire("all!showLiveManageDialog",{curTarget:"liveManage"})})),hashWatcher("info",(function(){e.$fire("all!showRoomEditDialog")})),hashWatcher("open",(function(){e.$fire("all!enterMyRoom")})),init()};
},{"../../../common/functions/func-hash-watcher/hash-watcher":153}],250:[function(require,module,exports){
"use strict";function protocolJsonConvert(e){var n={info:[]};return"Object"===utils.typeDetective(e)&&(n.info[0]=[],n.info[0][5]=null,n.info[1]=e.text,n.info[2]=[],n.info[2][0]=e.uid,n.info[2][1]=e.nickname,n.info[2][2]=e.isadmin,n.info[2][3]=e.vip,n.info[2][4]=e.svip,n.info[2][5]=e.rank,n.info[3]=e.medal,n.info[4]=e.user_level,n.info[5]=e.user_title?[""].concat(e.user_title):[],n.info[6]=e.teamid,n.info[7]=e.guard_level||0),n}var utils=require("/Users/Felix/Bilibili/Repo/live-static/src/utils"),danmuAppendModule=require("./func.danmu-append");module.exports=function(){$.ajax({url:"/ajax/msg",type:"POST",data:{roomid:window.ROOMID},dataType:"JSON",timeout:5e3}).done((function(e){if(0!=e.code)return utils.console.warn("历史弹幕获取失败","code ="+e.code);var n=document.createDocumentFragment(),o=e.data.room;o.forEach((function(e){return n.appendChild(danmuAppendModule.createDanmuNode(protocolJsonConvert(e)))})),danmuAppendModule.danmuNodeAppend(n),window.GUARD>0&&1===window.GUARD_INFO.notice_status&&utils.EventBusAvalon.$fire("all!addSelfWelcomeGuardMsg"),1==window.VIP&&1==window.VIP_TIPS&&utils.EventBusAvalon.$fire("all!addSelfWelcomeMsg"),danmuAppendModule.danmuScroll()}))};
},{"./func.danmu-append":248,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],251:[function(require,module,exports){
"use strict";var CDNLINK="//static.hdslb.com",loadScript=require("../../../utils").loadScript;!(function(){loadScript("//data.bilibili.com/rec.js");!(function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?8a6e55dbd2870f0f5bc9194cddf32a02";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)})()})();
},{"../../../utils":283}],252:[function(require,module,exports){
"use strict";function dataReport(i){$.ajax({url:i,type:"GET",dataType:"JSONP",jsonp:"callback",jsonpCallback:"cb"+randomString()})}function uvReport(){$.ajax({url:"//live-trace.bilibili.com/event/playuv",type:"GET",data:{uid:window.UID,roomid:window.ROOMID,buvid:$.cookie("LIVE_BUVID")||0,device:"live",platform:1},dataType:"JSONP"})}var randomString=require("../../../common/functions/func-random-string/random-string");module.exports=function(i){dataReport("//live-trace.bilibili.com/event/track/loading_time_room?time="+(Date.now()-i.INITTIME))};
},{"../../../common/functions/func-random-string/random-string":156}],253:[function(require,module,exports){
"use strict";var isLogin=require("../../../common/functions/is-login"),console=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").console;module.exports=function(){isLogin()&&setInterval((function(){$.ajax({url:"/User/userOnlineHeart",type:"post",dataType:"json",success:$.noop,error:function(e){console.error("userOnlineHeart 请求发送失败",e.statusText)}})}),3e5)};
},{"../../../common/functions/is-login":160,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],254:[function(require,module,exports){
"use strict";var EventBus=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBus,appConfig=require("/Users/Felix/Bilibili/Repo/live-static/src/common/app-config/app-config"),liveRoomFuncsModule=require("../live-room-funcs"),livePopup=require("../../../common/components/live-widget/live-popup/live-popup"),$msgPool=$("#chat-msg-list"),PREFIX="protocol:";EventBus.$on(PREFIX+"ROOM_SILENT_ON",(function(e){var o;switch(e.data.type){case 0:return;case"member":o="主播对所有用户开启了全局禁言";break;case"medal":o="主播对粉丝勋章"+e.data.level+"以下的用户开启了全局禁言";break;case"level":o="主播对用户等级UL."+e.data.level+"以下的用户开启了全局禁言"}$msgPool.append('<div><p class="system-msg" style="color: #f25d8e">[系统]：'+o+"</p></div>")})),EventBus.$on(PREFIX+"ROOM_SILENT_OFF",(function(e){$msgPool.append('<div><div class="system-msg" style="color: #4fc1e9">[系统]：主播取消了房间全局禁言</div></div>'),liveRoomFuncsModule.roomSilent.off()})),EventBus.$on(PREFIX+"ROOM_BLOCK_MSG",(function(e){$msgPool.append('<div><div class="system-msg">用户 <em style="color: #aaa">'+e.uname+"</em> 已被管理员禁言</div></div>")})),EventBus.$on(PREFIX+"ROOM_LOCK",(function(e){function o(){location.href="/"}var i={title:"系统通知",type:"info",onConfirm:o};window.UID==window.MASTERID?(i.content='您的房间已被<span style="color: #FF0000">锁定</span>。如有疑问请通过客服邮箱或客服 QQ 进行反馈。',i.width=350):(i.content="当前直播间被直播管理员关闭。",i.width=300),livePopup(i)}));
},{"../../../common/components/live-widget/live-popup/live-popup":146,"../live-room-funcs":241,"/Users/Felix/Bilibili/Repo/live-static/src/common/app-config/app-config":137,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],255:[function(require,module,exports){
"use strict";function sendSpecialGift(o){o.data[39]&&EventBus.$emit("GiftEvent:BeatStorm",o.data[39])}var liveRoomFuncsModule=require("./../live-room-funcs"),EventBus=require("/Users/Felix/Bilibili/Repo/live-static/src/utils").EventBus,randomEmoji=window.randomEmoji,livePopup=window.livePopup,RoomEvent=require("../../room-event"),flashProtoCtrl=avalon.define({$id:"flashProtoCtrl"});window.protocol={DANMU_MSG:function(o){window.liveRoomFuncs.addDanmu(o)},SEND_GIFT:function(o){window.liveRoomFuncs.addGift(o),RoomEvent.Activity.$emit("ACTIVITY_GIFT_SEND_CALLBACK",o)},SPECIAL_GIFT:function(o){sendSpecialGift(o)},SEND_TOP:function(o){flashProtoCtrl.$fire("all!updateGiftTop",o.data.top_list)},CHANGE_ROOM_INFO:function(o){liveRoomFuncsModule.changeRoomBK(o.background)},GUARD_BUY:function(o){EventBus.$emit("BuyEvent:BuyGuard",o.data)},WELCOME:function(o){flashProtoCtrl.$fire("all!addWelcomeMsg",o)},WELCOME_GUARD:function(o){flashProtoCtrl.$fire("all!addWelcomeGuardMsg",o.data)},WIN_ACTIVITY:function(o){activityDraw.win(o)},SYS_MSG:function(o){2==o.styleType&&window.DANMU_RND==o.rnd||2==o.styleType&&window.ROOMID==o.real_roomid||flashProtoCtrl.$fire("all!addSysMsg",o)},SYS_GIFT:function(o){flashProtoCtrl.$fire("all!SYS_GIF",o)},LIVE:function(o){flashProtoCtrl.$fire("all!liveStatusButton","on")},PREPARING:function(o){o.round&&1==o.round?flashProtoCtrl.$fire("all!liveStatusButton","round"):flashProtoCtrl.$fire("all!liveStatusButton","off")},END:function(o){},CLOSE:function(o){},BLOCK:function(o){},ROOM_SILENT_ON:function(o){EventBus.$emit("protocol:ROOM_SILENT_ON",o)},ROOM_SILENT_OFF:function(o){EventBus.$emit("protocol:ROOM_SILENT_OFF",o)},ROOM_BLOCK_MSG:function(o){EventBus.$emit("protocol:ROOM_BLOCK_MSG",o)},ROOM_LOCK:function(o){EventBus.$emit("protocol:ROOM_LOCK",o)},ROOM_KICKOUT:function(o){flashProtoCtrl.$fire("all!addKickoutMsg",o)},ROOM_BLOCK_INTO:function(o){parseInt(o.uid,10)===UID&&livePopup({title:"你被踢出房间 "+randomEmoji.sad(),content:"很不幸的是您被管理员踢出了房间…… 是不是做了什么不礼貌的事情呢？摸摸~ "+randomEmoji.helpless(),type:"alert",button:{confirm:"呜~~~~"},onConfirm:function(){location.href="/"}}),flashProtoCtrl.$fire("all!addKickoutMsg",o)},ROOM_AUDIT:function(o){},CUT_OFF:function(o){if(window.UID==window.MASTERID)flashProtoCtrl.$fire("all!liveCutOff"),liveRoomFuncsModule.loadingCutOffMsg();else var t=livePopup({title:"系统通知",content:"当前直播间被直播管理员切断直播。",type:"info",width:300,onConfirm:function(){t.remove(),t=null}})},ROOM_ADMINS:function(o){},ROOM_SHIELD:function(o){},LIGHTEN_START:function(o){RoomEvent.Activity.$emit("ACTIVITY_LIGHTEN_NEW",o)},LIGHTEN_END:function(o){RoomEvent.Activity.$emit("ACTIVITY_LIGHTEN_END",o)},WELCOME_SANTA_CLAUS:function(o){EventBus.$emit("Activity:WELCOME_SANTA_CLAUS",o)}};
},{"../../room-event":238,"./../live-room-funcs":241,"/Users/Felix/Bilibili/Repo/live-static/src/utils":283}],256:[function(require,module,exports){
"use strict";
},{}],257:[function(require,module,exports){
"use strict";require("./custom");var Module=require("./loader"),Top3=require("./module/activity-top3"),Heart=require("./module/activity-heart"),FreeGift=require("./module/activity-free-gift"),Watcher=require("./module/activity-watcher"),Lighten=require("./module/activity-lighten"),GetActivityInfo=require("./service/srv.index"),GetLightenInfo=require("./service/srv.lighten-check");module.exports=function(){Module.load(Lighten),Module.fetch(GetLightenInfo,{roomid:ROOMID},(function(e){Lighten.init(e)})),Module.fetch(GetActivityInfo,{ruid:MASTERID},(function(e){Module.load(Heart,e.heart),Module.load(FreeGift,e.freeGift),Module.load(Top3,e.top3),Module.load(Watcher,e.watcher)}))};
},{"./custom":256,"./loader":258,"./module/activity-free-gift":259,"./module/activity-heart":261,"./module/activity-lighten":262,"./module/activity-top3":265,"./module/activity-watcher":268,"./service/srv.index":271,"./service/srv.lighten-check":272}],258:[function(require,module,exports){
"use strict";var Core=require("../sys-core");module.exports=Core.createLoader("Activity");
},{"../sys-core":277}],259:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function AddGift(t){_gift[t.id]=t}function SendGift(t,e,i){liveQuickLogin();var n=_heart[e];if(!n||!n.bagId)return void ShowTip(t.target,"暂无道具");if(isNaN(i)||0===i)ShowTip(t.target,"请填写正确的送礼数量。");else{var r={bag_id:n.bagId,giftId:e,roomid:ROOMID,ruid:MASTERID,num:i,timestamp:TIMESTAMP(Date.now()),rnd:DANMU_RND,token:$.cookie("LIVE_LOGIN_DATA")||""};SendFreeGift(r).then((function(t){RoomEvent.Activity.$emit("ACTIVITY_GIFT_SEND_CALLBACK",t),RoomEvent.Gift.$emit("GIFT_OTHER_SEND_CALLBACK",t)}),(function(e){ShowTip(t.target,e.msg)}))}}function UpdateGift(t){var e=t.data.giftId;if(_heart[e]){var i=t.remain;_heart[e].num=i,ChangeGiftNum(e,i)}}function RefreshGift(t){$.extend(_heart,t);for(var e in t)ChangeGiftNum(e,t[e].num)}function ChangeGiftNum(t,e){$(".limited-gifts .gift-"+t+" .gift-num").text(e)}function GetGift(t){var e=t.target||t.srcElement;return $(e).hasClass("gift-item")?_gift[$(e).data("giftId")]:void(e=null)}function ShowTip(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";liveToast(t,e+randomEmoji.helpless(),i,!0)}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),TIMESTAMP=require("../../../../common/functions/func-timestamp-shorter/timestamp-shorter"),SendFreeGift=require("../../service/srv.send"),RoomEvent=require("../../../room-event"),_gift={},_heart={};RoomEvent.Activity.$on("ACTIVITY_FREEGIFT_UPDATE",UpdateGift),RoomEvent.Activity.$on("ACTIVITY_FREEGIFT_REFRESH",RefreshGift),module.exports={$name:"FreeGift",$load:function(t){return new _promise2.default(function(e){require("./view"),t.forEach((function(t){t.config.forEach((function(t){AddGift(t)})),RefreshGift(t.data)})),e()})},getGift:GetGift,sendGift:SendGift};
},{"../../../../common/functions/func-timestamp-shorter/timestamp-shorter":159,"../../../room-event":238,"../../service/srv.send":274,"./view":260,"babel-runtime/core-js/promise":12}],260:[function(require,module,exports){
"use strict";var FreeGift=require("./index"),RoomEvent=require("../../../room-event");module.exports=aVue({$id:"freeGiftPanelCtrl",data:{dom:{show:0,out:0},giftId:0,count:1,giftName:"--",desc:"--"},methods:{open:function(t){var e=FreeGift.getGift(t);e&&(this.giftId=e.id,this.count=1,this.giftName=e.name,this.desc=e.desc,this.dom.show=1)},close:function(){this.dom.show=0},send:function(t){var e=parseInt($(".activity-gift-panel input").val(),10),i=parseInt(this.count,10);i=i===e?i:e,FreeGift.sendGift(t,this.giftId,i)}},ready:function(){RoomEvent.Activity.$on("ACTIVITY_FREEGIFT_CHOOSE",this.open)}});
},{"../../../room-event":238,"./index":259}],261:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Beat(){Check()&&setTimeout((function(){Beat()}),_time)}function Check(){_heartTime=_heartEndTime-Date.now();var e=localStorage.getItem("ROOM_HEART_ID")||"0";return e=parseInt(e,10),e===ROOMID&&(_heartTime<=0?(_time=0,Update(),!1):(_time=_heartTime<HEART_BEAT_INTERVAL?_heartTime:HEART_BEAT_INTERVAL,!0))}function Update(){GetHeart({roomid:ROOMID}).then((function(e){e.heart&&Reset(),RoomEvent.Activity.$emit("ACTIVITY_FREEGIFT_REFRESH",e.gift)}),(function(e){e.code===-403&&e.data.heart&&(_retry=2),_retry&&(_retry--,Reset())}))}function Reset(){_heartEndTime=1e3*_heartInterval+Date.now(),Beat()}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),GetHeart=require("../../service/srv.heart"),RoomEvent=require("../../../room-event"),HEART_BEAT_INTERVAL=1e3,_active=!1,_time=0,_heartTime=0,_heartInterval=0,_heartEndTime=0,_evt=[],_retry=2;module.exports={$name:"Heart",$load:function(e){return new _promise2.default(function(t){_active=e.hasHeart,_heartInterval=e.heartTime,_heartEndTime=1e3*_heartInterval+Date.now(),localStorage.setItem("ROOM_HEART_ID",ROOMID),_active&&Beat(),t()})}};
},{"../../../room-event":238,"../../service/srv.heart":270,"babel-runtime/core-js/promise":12}],262:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function NewGift(e){var t=e.data;t.status=!1,t.time<=0||(_list[t.lightenId]=t,(!_current||_current&&1e3*t.time<1e3*_time-_timeLapse)&&(clearInterval(_countdown),_time=t.time,_current=t,StartQueue()))}function EndGift(e){var t=e.data;t.lightenId==_current.lightenId?ResetQueue():delete _list[t.lightenId]}function NewQueue(e){var t=e.length;if(t)for(var i=0;i<t;i++){var n=e[i];n.status||(n.time<_time?(_current&&(_list[_current.lightenId]=_current),_time=n.time,_current=n):_list[n.lightenId]=n)}}function StartQueue(){return _current?(vm.togglePanel([1,_current.type]),_startTime=Date.now(),void(_countdown=setInterval(UpdateQueue,1e3))):void vm.togglePanel([0,""])}function UpdateQueue(){_timeLapse=Date.now()-_startTime,_timeLapse>=1e3*_time&&ResetQueue()}function ResetQueue(){delete _list[_current.lightenId],_current=null,_time=99999,clearInterval(_countdown),OrderQueue(),StartQueue()}function OrderQueue(){for(var e in _list){var t=_list[e];t.time=Math.round((1e3*t.time-_timeLapse)/1e3),t.time>0?t.time<_time&&(_time=t.time,_current=t):delete _list[t.lightenId]}}function GetGift(){!_lock&&_current&&(_lock=1,RequestForGift({roomid:ROOMID,lightenId:_current.lightenId}).then((function(e){Info("success",e),ResetQueue(),_lock=0}),(function(e){Info("fail",e),_lock=0})))}function init(e){NewQueue(e),StartQueue()}function Listen(){RoomEvent.Activity.$on("ACTIVITY_LIGHTEN_NEW",NewGift),RoomEvent.Activity.$on("ACTIVITY_LIGHTEN_END",EndGift)}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),RequestForGift=require("../../service/srv.lighten-get"),RoomEvent=require("../../../room-event"),Info=require("./info"),vm=void 0,_countdown=void 0,_list={},_lock=0,_time=99999,_timeLapse=0,_startTime=0,_current=null;module.exports={$id:"Lighten",$load:function(){return new _promise2.default(function(e){vm=require("./view"),Listen(),e()})},init:init,getGift:GetGift};
},{"../../../room-event":238,"../../service/srv.lighten-get":273,"./info":263,"./view":264,"babel-runtime/core-js/promise":12}],263:[function(require,module,exports){
"use strict";function Info(t,n){var e=_default[t].title,i="确认",o=null,l="";"success"===t?l=_default[t].html:(l='<p style="text-align:center;margin-bottom:25px;">'+n.msg+"</p>",n.data.hasOwnProperty("phoneBind")&&1!==n.data.phoneBind&&(i="去认证",o=function(){window.open("//passport.bilibili.com/member/bindPhone","_blank")}));var a=new livePopup({title:e,className:"lighten-start-get",html:l,width:300,button:{confirm:i},type:"info",onConfirm:function(){o&&o(),a.remove()},onCancel:function(){a.remove()}})}var _default={success:{title:"恭喜你获得",html:'\n\t\t<div style="text-align:center">\n\t\t\t<p><i class="gift-item gift-69"></i></p>\n\t\t\t<p>应援棒x1</p>\n\t\t</div>\n\t\t'},fail:{title:"提示"}};module.exports=Info;
},{}],264:[function(require,module,exports){
"use strict";var Lighten=require("./index");module.exports=aVue({$id:"lightenStartCtrl",data:{on:0,className:"cp"},methods:{getGift:function(){Lighten.getGift()},togglePanel:function(t){this.on=parseInt(t[0]),this.className=t[1]}}});
},{"./index":262}],265:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(e){e.load({list:_dataList,evt:_mouseEvent})}function createRank(e){var r={tab:0,loading:1,apiPrefix:e.apiPrefix,className:"top3-"+e.keyword,keyword:e.keyword,type:e.type,masterTitle:e.masterTitle,score:ScoreFormat(e.score),info:{scores:[],rank:{},href:""},master:[],user:[]};_dataList.push(r),_mouseEvent.push(new MouseEventHandler(r.className,{ruid:MASTERID,api:r.apiPrefix}))}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),MouseEventHandler=require("./mouseEventHandler"),ScoreFormat=require("../../../components/score-format"),_dataList=[],_mouseEvent=[];module.exports={$id:"Top3",$load:function(e){return new _promise2.default(function(r){var t=require("./view");e.forEach((function(e){createRank(e)})),init(t),r()})}};
},{"../../../components/score-format":222,"./mouseEventHandler":266,"./view":267,"babel-runtime/core-js/promise":12}],266:[function(require,module,exports){
"use strict";function MouseEventHandler(t,e){this.requestData=e,this.timingOut=null,this.timingReset=null,this.name=t,this.out=0}MouseEventHandler.prototype.show=function(t){var e=$(".top3-panel ."+this.name+" .live-hover-panel");clearTimeout(this.timingOut),clearTimeout(this.timingReset),e.removeClass("out"),e.hasClass("show")||(e.addClass("show"),t&&t(this.requestData))},MouseEventHandler.prototype.hide=function(){var t=$(".top3-panel ."+this.name+" .live-hover-panel"),e=this;e.out=1,e.timingOut=setTimeout((function(){e.out&&(t.addClass("out"),e.timingReset=setTimeout((function(){t.removeClass("show out")}),400))}),400)},module.exports=function(t,e){return new MouseEventHandler(t,e)};
},{}],267:[function(require,module,exports){
"use strict";var GetTop3=require("../../service/srv.top3"),RoomEvent=require("../../../room-event"),ScoreFormat=require("../../../components/score-format");module.exports=aVue({$id:"activityTop3",data:{evt:[],dataList:[]},methods:{load:function(t){this.dataList=t.list,this.evt=t.evt},clickTab:function(t,e){this.dataList[t].tab=e},showPanel:function(t){var e=this;this.evt[t].show((function(o){GetTop3(o).then((function(o){e.updateTop3(t,o),e.dataList[t].loading=0})).catch((function(t){$moniter.catch(4,"VIEW-TOP3",t)}))}))},hidePanel:function(t){this.evt[t].hide()},updateTop3:function(t,e){var o=this.dataList[t];o.info.scores=e.info.scores,o.info.href=e.info.url,o.master=e.master,o.user=e.user},updateScore:function(t){this.dataList[t.index].score=ScoreFormat(t.score)}},ready:function(){RoomEvent.Activity.$on("ACTIVITY_TOP3_UPDATE",this.updateScore)}});
},{"../../../components/score-format":222,"../../../room-event":238,"../../service/srv.top3":275}],268:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function Watcher(t){this.opt=t}function isActivityGift(t){return $.inArray(t,this.opt.eventGifts)>-1}function sendGiftCallback(t){var e=t.data.giftId;isActivityGift.call(this,e)&&(RoomEvent.Activity.$emit("ACTIVITY_TOP3_UPDATE",{index:this.opt.index,score:t.data.eventScore}),RoomEvent.Activity.$emit("ACTIVITY_FREEGIFT_UPDATE",t))}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),RoomEvent=require("../../../room-event");Watcher.prototype.watchGiftEvent=function(){RoomEvent.Activity.$on("ACTIVITY_GIFT_SEND_CALLBACK",sendGiftCallback,this)},module.exports={$id:"Watcher",$load:function(t){return new _promise2.default(function(e){t.forEach((function(t){var e=new Watcher(t);e.watchGiftEvent()})),e()})}};
},{"../../../room-event":238,"babel-runtime/core-js/promise":12}],269:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function Http(){this.cacheData={}}function responseParser(t){return"object"!==("undefined"==typeof t?"undefined":(0,_typeof3.default)(t))||"number"!=typeof t.code||0!==t.code?{ok:0,data:t}:{ok:1,data:t.data}}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2);Http.prototype.init=function(){var t=localStorage.getItem("liveRoomCache");if(t)try{this.cacheData=JSON.parse(t),"object"!==(0,_typeof3.default)(this.cacheData)&&(this.cacheData={})}catch(t){$moniter.catch(1,"HTTP",t),this.cacheData={}}},Http.prototype.Get=function(t,e,a){var r=this;return new _promise2.default(function(o,i){$.ajax({type:"get",url:t,dataType:"json",data:e}).done((function(e){var n=responseParser(e);if(n.ok)return a&&r.Store(t,a,n.data),o(n.data);if(!a)return i(e);var c=r.Fetch(t,a);c?o(c):i(e)})).fail((function(){var e=r.Fetch(t,a);e?($moniter.catch(1,"HTTP","request failed."),o(e)):i("Request Error from "+t)}))})},Http.prototype.Post=function(t,e){return liveQuickLogin(),new _promise2.default(function(a,r){$.ajax({type:"post",url:t,dataType:"json",data:e}).done((function(t){var e=responseParser(t);return e.ok?a(e.data):r(e.data)})).fail((function(){r("Request Error from "+t)}))})},Http.prototype.Fetch=function(t,e){var a=this.cacheData;return"object"===(0,_typeof3.default)(a[t])&&"object"===(0,_typeof3.default)(a[t][e])&&a[t][e]},Http.prototype.Store=function(t,e,a){this.cacheData[t]||(this.cacheData[t]={}),this.cacheData[t][e]=a,localStorage.setItem("liveRoomCache",(0,_stringify2.default)(this.cacheData))};var http=new Http;http.init(),module.exports=http;
},{"babel-runtime/core-js/json/stringify":8,"babel-runtime/core-js/promise":12,"babel-runtime/helpers/typeof":18}],270:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(r,t){HTTP.Get("/eventRoom/heart",e).then((function(e){r(e)})).catch((function(e){return t(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],271:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(t,r){HTTP.Get("/eventRoom/index",e).then((function(e){var r={watcher:[],heart:{hasHeart:e.heart,heartTime:e.heartTime},top3:[],freeGift:[]};e.eventList.forEach((function(e,t){r.top3.push({apiPrefix:e.apiPrefix,keyword:e.keyword,type:e.type,masterTitle:e.masterTitle,score:e.score}),r.freeGift.push({config:e.freeGift,data:e.heartCfg}),r.watcher.push({eventGifts:e.eventGifts||[],index:t})})),t(r)})).catch((function(e){return r(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],272:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(t,r){HTTP.Get("/activity/v1/NeedYou/getLiveInfo",e).then((function(e){t(e)})).catch((function(e){return r(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],273:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(t,r){HTTP.Post("/activity/v1/NeedYou/getLiveAward",e).then((function(e){t(e)})).catch((function(e){return r(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],274:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(r,t){HTTP.Post("/eventRoom/send",e).then((function(e){r(e)})).catch((function(e){return t(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],275:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),HTTP=require("./http-ajax");module.exports=function(e){return new _promise2.default(function(r,t){HTTP.Get("/"+e.api+"/top3",{ruid:e.ruid}).then((function(e){r(e)})).catch((function(e){return t(e)}))})};
},{"./http-ajax":269,"babel-runtime/core-js/promise":12}],276:[function(require,module,exports){
"use strict";window.aVue=function(n){var a={},t=null;a.$id=n.$id||"undefinedAvalon"+Date.now();for(var e in n.data)a[e]=n.data[e];var i=function(e){a[e]=(function(){return function(){n.methods[e].apply(t,arguments)}})()};for(var o in n.methods)i(o);return t=avalon.define(a),n.ready&&setTimeout((function(){n.ready.call(t)}),0),t};
},{}],277:[function(require,module,exports){
"use strict";function Core(){this.version="0.1.0"}require("./moniter")(),require("./aVue");var Loader=require("./loader");Core.prototype.createLoader=function(e){return new Loader(e)},module.exports=new Core;
},{"./aVue":276,"./loader":278,"./moniter":279}],278:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function Loader(t){if(!sysConfig[t])throw"Invalid loader name: "+t;this.sid=sysConfig[t].id||0}var _typeof2=require("babel-runtime/helpers/typeof"),_typeof3=_interopRequireDefault(_typeof2),sysConfig={Activity:{id:4},User:{id:2}};Loader.prototype.catchError=function(t,e){$moniter.catch(this.sid,e,t)},Loader.prototype.load=function(t,e){var o=this;"object"===(0,_typeof3.default)(t.$interface)&&(this[t.$id]=t.$interface),"function"==typeof t.$load&&t.$load(e).catch((function(e){o.catchError(e,t.$id)}))},Loader.prototype.fetch=function(t,e,o){var i=this;t(e).then((function(t){o(t)})).catch((function(t){i.catchError(t,"LOADER-FETCH-CALLBACK")}))},module.exports=Loader;
},{"babel-runtime/helpers/typeof":18}],279:[function(require,module,exports){
"use strict";function catchError(o,r,e){var t=healthStatus[o];if(!(t.errors>100)){unreadCount++,consoleText.log("%c New message received("+unreadCount+" unread).",STYLE_B_WARNING);var n=new Date;errorPool.push({d:n.toLocaleDateString()+" "+n.toLocaleTimeString("en"),s:t.name,m:r,e:e}),t.status=0,t.errors++}}function showErrorLog(o){if(!errorPool.length)return consoleText.log(SYS_NAME+" no error log found.");if(unreadCount=0,"number"!=typeof o||o>=errorPool.length)consoleText.log("%cLOG LIST",STYLE_TITLE),consoleText.table(errorPool);else{consoleText.log("%c"+SYS_NAME+" Log detail at "+o+":",STYLE_ERROR);var r=errorPool[o];consoleText.log("- Date:",r.d),consoleText.log("- System:",r.s),consoleText.log("- Module:",r.m),consoleText.log("- Error:",r.e)}}function checkup(){consoleText.log("%cHEALTH CHECK",STYLE_TITLE),healthStatus.forEach((function(o){o.status?consoleText.log("%c"+o.id+"."+o.name+" -> OK",STYLE_SUCCESS):consoleText.log("%c"+o.id+"."+o.name+" -> ERROR("+o.errors+")",STYLE_ERROR)}))}function M(){this.version="0.1.0"}var SYS_NAME="[SYS MONITER]",STYLE_TITLE="background:#03a9f4;color:#fff;padding:2px 6px;line-height:32px;border-radius:4px;",STYLE_ERROR="color:#f66;",STYLE_SUCCESS="color:#4caf50;",STYLE_B_WARNING="background:#ffb300;color:#fff;padding:2px;border-radius:4px;line-height:32px;",STYLE_B_SUCCESS="background:#4caf50;color:#fff;padding:2px;border-radius:4px;line-height:32px;",STYLE_B_ERROR="background:#f33;color:#fff;padding:2px;border-radius:4px;line-height:32px;",unreadCount=0,errorPool=[],healthStatus=[{id:0,status:1,errors:0,name:"SYS COMMON"},{id:1,status:1,errors:0,name:"SYS SERVICE"},{id:2,status:1,errors:0,name:"SYS USER"},{id:3,status:1,errors:0,name:"SYS GIFT"},{id:4,status:1,errors:0,name:"SYS ACTIVITY"}];M.prototype.checkup=checkup,M.prototype.showErrorLog=showErrorLog,M.prototype.catch=catchError,module.exports=function(){window.$moniter=new M};
},{}],280:[function(require,module,exports){
"use strict";var Module=require("./loader"),AnchorTitle=require("./module/anchor-title");module.exports=function(e){Module.load(AnchorTitle,e)};
},{"./loader":281,"./module/anchor-title":282}],281:[function(require,module,exports){
"use strict";var Core=require("../sys-core");module.exports=Core.createLoader("User");
},{"../sys-core":277}],282:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function updateAnchorTitle(e){var r=e.PENDANT,t=e.AREAPENDANT,i=r||t;i&&$("div.anchor-title-image").addClass(i)}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);module.exports={name:"anchorTitle",$load:function(e){return new _promise2.default(function(r){updateAnchorTitle(e.data),r()})}};
},{"babel-runtime/core-js/promise":12}],283:[function(require,module,exports){
"use strict";var curry=require("./util.curry"),console=require("./util.console"),createElement=require("./util.create-element"),cypher=require("./util.cypher"),EventBus=require("./util.event-bus"),EventBusAvalon=require("./util.event-bus-avalon"),isMobile=require("./util.is-mobile"),loadScript=require("./util.load-script"),typeDetective=require("./util.type-detective.js"),uid=require("./util.uid");module.exports={curry:curry,console:console,createElement:createElement,cypher:cypher,EventBus:EventBus,EventBusAvalon:EventBusAvalon,isMobile:isMobile,loadScript:loadScript,typeDetective:typeDetective,uid:uid};
},{"./util.console":284,"./util.create-element":285,"./util.curry":286,"./util.cypher":287,"./util.event-bus":289,"./util.event-bus-avalon":288,"./util.is-mobile":290,"./util.load-script":291,"./util.type-detective.js":292,"./util.uid":293}],284:[function(require,module,exports){
"use strict";function consoleFunc(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";window.console&&window.consoleText[o]("["+capticalLetterToUpper(o)+"] "+n+": "+e)}}function capticalLetterToUpper(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o=o.substring(0,1).toUpperCase()+o.substring(1,o.length)}module.exports={log:consoleFunc("log"),info:consoleFunc("info"),warn:consoleFunc("warn"),error:consoleFunc("error")};
},{}],285:[function(require,module,exports){
"use strict";module.exports=function(e){return document.createElement(e)};
},{}],286:[function(require,module,exports){
"use strict";var slice=Array.prototype.slice;module.exports=function(l){var c=slice.call(arguments,1);return function(){var r=slice.call(arguments);l.apply(null,c.concat(r))}};
},{}],287:[function(require,module,exports){
"use strict";var dataStore={},consoleText=window.console;module.exports={start:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return dataStore[o]?(consoleText.warn("[Caution] Cypher: 统计名称 "+o+" 已经存在."),!1):(dataStore[o]=performance.now(),consoleText.log("[Info] Cypher: "+o+" 已开始统计."),o)},end:function(o){var e=dataStore[o];if(void 0===e)return consoleText.warn("[Caution] Cypher: 统计名称 "+o+" 不存在."),!1;var n=performance.now();return consoleText.log("[Info] "+o+" 耗时: "+(n-e)),consoleText.log(""),!0}};
},{}],288:[function(require,module,exports){
"use strict";module.exports=avalon.define({$id:"EventBus"});
},{}],289:[function(require,module,exports){
"use strict";window.liveEventsMap||(window.liveEventsMap={});var eventsMap=window.liveEventsMap,EventBus={$on:function(e,n){return void 0!==eventsMap[e]?window.console&&void 0:"function"!=typeof n?window.console&&void 0:void(eventsMap[e]=n)},$emit:function(e,n){var o=eventsMap[e];void 0!==o&&o(n)}};module.exports=EventBus;
},{}],290:[function(require,module,exports){
"use strict";module.exports=function(){var n=navigator.userAgent;return null!=n.match(/iPad/i)||null!=n.match(/iPhone/i)||null!=n.match(/iPod/i)||null!=n.match(/MicroMessenger/i)||null!=n.match(/Windows Phone/i)||null!=n.match(/Android/i)||"#html5"==location.hash};
},{}],291:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise);module.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new _promise2.default(function(r,o){$.getScript(e).done((function(e,o){r(e,o)})).fail((function(r,i,t){window.console&&consoleText.error('[Script Load Error] "'+e+'" 文件加载失败.'),o(r,i,t)}))})};
},{"babel-runtime/core-js/promise":12}],292:[function(require,module,exports){
"use strict";module.exports=function(t){return Object.prototype.toString.call(t).match(/ \w+/)[0].replace(" ","")};
},{}],293:[function(require,module,exports){
"use strict";module.exports=function(){return(Math.floor(1e4*Math.random())*Date.now()).toString(16)};
},{}]},{},[234]);
